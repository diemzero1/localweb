{"ast":null,"code":"import { __assign } from \"tslib\";\nimport { tooltip } from '../../adaptor/common';\nimport { deepAssign, flow } from '../../utils';\nimport { adaptor as columnAdaptor } from '../column/adaptor';\nexport { meta } from '../column/adaptor';\n/**\n * 处理默认配置项\n * 1. switch xField、 yField\n * 2. switch xAxis、 yAxis and adjust axis.position configuration\n */\nfunction defaultOptions(params) {\n  var options = params.options;\n  var xField = options.xField,\n    yField = options.yField,\n    xAxis = options.xAxis,\n    yAxis = options.yAxis;\n  var position = {\n    left: 'bottom',\n    right: 'top',\n    top: 'left',\n    bottom: 'right'\n  };\n  var verticalAxis = yAxis !== false ? __assign({\n    position: position[(yAxis === null || yAxis === void 0 ? void 0 : yAxis.position) || 'left']\n  }, yAxis) : false;\n  var horizontalAxis = xAxis !== false ? __assign({\n    position: position[(xAxis === null || xAxis === void 0 ? void 0 : xAxis.position) || 'bottom']\n  }, xAxis) : false;\n  return __assign(__assign({}, params), {\n    options: __assign(__assign({}, options), {\n      xField: yField,\n      yField: xField,\n      // 条形图 xAxis，yAxis 不可以做 deepAssign\n      xAxis: verticalAxis,\n      yAxis: horizontalAxis\n    })\n  });\n}\n/**\n * label 适配器\n * @param params\n */\nfunction label(params) {\n  var options = params.options;\n  var label = options.label;\n  // label of bar charts default position is left, if plot has label\n  if (label && !label.position) {\n    label.position = 'left';\n    // 配置默认的 label layout： 如果用户没有指定 layout 和 position， 则自动配置 layout\n    if (!label.layout) {\n      label.layout = [{\n        type: 'interval-adjust-position'\n      }, {\n        type: 'interval-hide-overlap'\n      }, {\n        type: 'adjust-color'\n      }, {\n        type: 'limit-in-plot',\n        cfg: {\n          action: 'hide'\n        }\n      }];\n    }\n  }\n  return deepAssign({}, params, {\n    options: {\n      label: label\n    }\n  });\n}\n/**\n * legend 适配器\n * @param params\n */\nfunction legend(params) {\n  var options = params.options;\n  // 默认 legend 位置\n  var seriesField = options.seriesField,\n    isStack = options.isStack;\n  var legend = options.legend;\n  if (seriesField) {\n    if (legend !== false) {\n      legend = __assign({\n        position: isStack ? 'top-left' : 'right-top'\n      }, legend || {});\n    }\n  } else {\n    legend = false;\n  }\n  return deepAssign({}, params, {\n    options: {\n      legend: legend\n    }\n  });\n}\n/**\n * coordinate 适配器\n * @param params\n */\nfunction coordinate(params) {\n  // transpose column to bar 对角变换 & y 方向镜像变换\n  var options = params.options;\n  var coordinateOptions = [{\n    type: 'transpose'\n  }, {\n    type: 'reflectY'\n  }].concat(options.coordinate || []);\n  return deepAssign({}, params, {\n    options: {\n      coordinate: coordinateOptions\n    }\n  });\n}\n/**\n * 柱形图适配器\n * @param params\n */\nexport function geometry(params) {\n  var chart = params.chart,\n    options = params.options;\n  var barStyle = options.barStyle,\n    barWidthRatio = options.barWidthRatio,\n    minBarWidth = options.minBarWidth,\n    maxBarWidth = options.maxBarWidth,\n    barBackground = options.barBackground;\n  return columnAdaptor({\n    chart: chart,\n    options: __assign(__assign({}, options), {\n      // rename attrs as column\n      columnStyle: barStyle,\n      columnWidthRatio: barWidthRatio,\n      minColumnWidth: minBarWidth,\n      maxColumnWidth: maxBarWidth,\n      columnBackground: barBackground\n    })\n  }, true);\n}\n/**\n * @param chart\n * @param options\n */\nexport function adaptor(params) {\n  // flow 的方式处理所有的配置到 G2 API\n  return flow(defaultOptions, label, legend, tooltip, coordinate, geometry)(params);\n}","map":{"version":3,"mappings":"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","names":["tooltip","deepAssign","flow","adaptor","columnAdaptor","meta","defaultOptions","params","options","yField","xAxis","yAxis","position","left","right","top","bottom","verticalAxis","__assign","horizontalAxis","xField","label","layout","type","cfg","action","legend","isStack","seriesField","coordinate","coordinateOptions","concat","geometry","barWidthRatio","minBarWidth","maxBarWidth","barBackground","chart","columnStyle","barStyle","columnWidthRatio","minColumnWidth","maxColumnWidth","columnBackground"],"sources":["/home/iam/Documents/network/node_modules/@antv/g2plot/src/plots/bar/adaptor.ts"],"sourcesContent":["import { tooltip } from '../../adaptor/common';\nimport { Params } from '../../core/adaptor';\nimport { Axis } from '../../types';\nimport { deepAssign, flow } from '../../utils';\nimport { adaptor as columnAdaptor } from '../column/adaptor';\nimport { BarOptions } from './types';\nexport { meta } from '../column/adaptor';\n\n/**\n * 处理默认配置项\n * 1. switch xField、 yField\n * 2. switch xAxis、 yAxis and adjust axis.position configuration\n */\nfunction defaultOptions(params: Params<BarOptions>): Params<BarOptions> {\n  const { options } = params;\n  const { xField, yField, xAxis, yAxis } = options;\n\n  const position = {\n    left: 'bottom',\n    right: 'top',\n    top: 'left',\n    bottom: 'right',\n  };\n\n  const verticalAxis =\n    yAxis !== false\n      ? {\n          position: position[yAxis?.position || 'left'],\n          ...yAxis,\n        }\n      : false;\n  const horizontalAxis =\n    xAxis !== false\n      ? {\n          position: position[xAxis?.position || 'bottom'],\n          ...xAxis,\n        }\n      : false;\n\n  return {\n    ...params,\n    options: {\n      ...options,\n      xField: yField,\n      yField: xField,\n      // 条形图 xAxis，yAxis 不可以做 deepAssign\n      xAxis: verticalAxis as Axis,\n      yAxis: horizontalAxis as Axis,\n    },\n  };\n}\n\n/**\n * label 适配器\n * @param params\n */\nfunction label(params: Params<BarOptions>): Params<BarOptions> {\n  const { options } = params;\n  const { label } = options;\n  // label of bar charts default position is left, if plot has label\n  if (label && !label.position) {\n    label.position = 'left';\n    // 配置默认的 label layout： 如果用户没有指定 layout 和 position， 则自动配置 layout\n    if (!label.layout) {\n      label.layout = [\n        { type: 'interval-adjust-position' },\n        { type: 'interval-hide-overlap' },\n        { type: 'adjust-color' },\n        { type: 'limit-in-plot', cfg: { action: 'hide' } },\n      ];\n    }\n  }\n\n  return deepAssign({}, params, { options: { label } });\n}\n\n/**\n * legend 适配器\n * @param params\n */\nfunction legend(params: Params<BarOptions>): Params<BarOptions> {\n  const { options } = params;\n\n  // 默认 legend 位置\n  const { seriesField, isStack } = options;\n  let { legend } = options;\n  if (seriesField) {\n    if (legend !== false) {\n      legend = {\n        position: isStack ? 'top-left' : 'right-top',\n        ...(legend || {}),\n      };\n    }\n  } else {\n    legend = false;\n  }\n\n  return deepAssign({}, params, { options: { legend } });\n}\n\n/**\n * coordinate 适配器\n * @param params\n */\nfunction coordinate(params: Params<BarOptions>): Params<BarOptions> {\n  // transpose column to bar 对角变换 & y 方向镜像变换\n  const { options } = params;\n  const coordinateOptions = [{ type: 'transpose' }, { type: 'reflectY' }].concat(options.coordinate || []);\n  return deepAssign({}, params, { options: { coordinate: coordinateOptions } });\n}\n\n/**\n * 柱形图适配器\n * @param params\n */\nexport function geometry(params: Params<BarOptions>) {\n  const { chart, options } = params;\n\n  const { barStyle, barWidthRatio, minBarWidth, maxBarWidth, barBackground } = options;\n\n  return columnAdaptor(\n    {\n      chart,\n      options: {\n        ...options,\n        // rename attrs as column\n        columnStyle: barStyle,\n        columnWidthRatio: barWidthRatio,\n        minColumnWidth: minBarWidth,\n        maxColumnWidth: maxBarWidth,\n        columnBackground: barBackground,\n      },\n    },\n    true\n  ) as Params<BarOptions>;\n}\n\n/**\n * @param chart\n * @param options\n */\nexport function adaptor(params: Params<BarOptions>): Params<BarOptions> {\n  // flow 的方式处理所有的配置到 G2 API\n  return flow<Params<BarOptions>>(defaultOptions, label, legend, tooltip, coordinate, geometry)(params);\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}