{"ast":null,"code":"import { __assign } from \"tslib\";\nimport { each } from '@antv/util';\nimport { geometry as geometryAdaptor } from '../../adaptor/geometries/base';\nimport { AXIS_META_CONFIG_KEYS } from '../../constant';\nimport { addViewAnimation, deepAssign, pick } from '../../utils';\n/**\n *\n * @param params 分面图 参数\n * @returns facet eachView 的回调设置每个 view 的展示\n */\nexport function execViewAdaptor(viewOfG2, options) {\n  var data = options.data,\n    coordinate = options.coordinate,\n    interactions = options.interactions,\n    annotations = options.annotations,\n    animation = options.animation,\n    tooltip = options.tooltip,\n    axes = options.axes,\n    meta = options.meta,\n    geometries = options.geometries;\n  // 1. data, optional\n  if (data) {\n    viewOfG2.data(data);\n  }\n  // 2. meta 配置\n  var scales = {};\n  if (axes) {\n    each(axes, function (axis, field) {\n      scales[field] = pick(axis, AXIS_META_CONFIG_KEYS);\n    });\n  }\n  scales = deepAssign({}, meta, scales);\n  viewOfG2.scale(scales);\n  // 3. coordinate 配置 (默认由顶层决定)\n  if (coordinate) {\n    viewOfG2.coordinate(coordinate);\n  }\n  // 4. axis 轴配置 (默认由顶层决定，但可以通过 false 强制关闭)\n  if (axes === false) {\n    viewOfG2.axis(false);\n  } else {\n    each(axes, function (axis, field) {\n      viewOfG2.axis(field, axis);\n    });\n  }\n  each(geometries, function (geometry) {\n    // Geometry\n    var ext = geometryAdaptor({\n      chart: viewOfG2,\n      options: geometry\n    }).ext;\n    // Geometry adjust\n    var adjust = geometry.adjust;\n    if (adjust) {\n      ext.geometry.adjust(adjust);\n    }\n  });\n  // 5. interactions\n  each(interactions, function (interaction) {\n    if (interaction.enable === false) {\n      viewOfG2.removeInteraction(interaction.type);\n    } else {\n      viewOfG2.interaction(interaction.type, interaction.cfg);\n    }\n  });\n  // 6. annotations\n  each(annotations, function (annotation) {\n    viewOfG2.annotation()[annotation.type](__assign({}, annotation));\n  });\n  // 7. animation (先做动画)\n  addViewAnimation(viewOfG2, animation);\n  if (tooltip) {\n    // 8. tooltip\n    viewOfG2.interaction('tooltip');\n    viewOfG2.tooltip(tooltip);\n  } else if (tooltip === false) {\n    viewOfG2.removeInteraction('tooltip');\n  }\n}","map":{"version":3,"mappings":";AACA,SAASA,IAAI,QAAQ,YAAY;AACjC,SAASC,QAAQ,IAAIC,eAAe,QAAQ,+BAA+B;AAC3E,SAASC,qBAAqB,QAAQ,gBAAgB;AAEtD,SAASC,gBAAgB,EAAEC,UAAU,EAAEC,IAAI,QAAQ,aAAa;AAGhE;;;;;AAKA,OAAM,SAAUC,eAAe,CAACC,QAAc,EAAEC,OAAc;EACpD,QAAI,GAAwFA,OAAO,KAA/F;IAAEC,UAAU,GAA4ED,OAAO,WAAnF;IAAEE,YAAY,GAA8DF,OAAO,aAArE;IAAEG,WAAW,GAAiDH,OAAO,YAAxD;IAAEI,SAAS,GAAsCJ,OAAO,UAA7C;IAAEK,OAAO,GAA6BL,OAAO,QAApC;IAAEM,IAAI,GAAuBN,OAAO,KAA9B;IAAEO,IAAI,GAAiBP,OAAO,KAAxB;IAAEQ,UAAU,GAAKR,OAAO,WAAZ;EAE/F;EACA,IAAIS,IAAI,EAAE;IACRV,QAAQ,CAACU,IAAI,CAACA,IAAI,CAAC;;EAGrB;EACA,IAAIC,MAAM,GAAwB,EAAE;EACpC,IAAIJ,IAAI,EAAE;IACRf,IAAI,CAACe,IAAI,EAAE,UAACK,IAAU,EAAEC,KAAa;MACnCF,MAAM,CAACE,KAAK,CAAC,GAAGf,IAAI,CAACc,IAAI,EAAEjB,qBAAqB,CAAC;IACnD,CAAC,CAAC;;EAGJgB,MAAM,GAAGd,UAAU,CAAC,EAAE,EAAEW,IAAI,EAAEG,MAAM,CAAC;EACrCX,QAAQ,CAACc,KAAK,CAACH,MAAM,CAAC;EAEtB;EACA,IAAIT,UAAU,EAAE;IACdF,QAAQ,CAACE,UAAU,CAACA,UAAU,CAAC;;EAGjC;EACA,IAAIK,IAAI,KAAK,KAAK,EAAE;IAClBP,QAAQ,CAACY,IAAI,CAAC,KAAK,CAAC;GACrB,MAAM;IACLpB,IAAI,CAACe,IAAI,EAAE,UAACK,IAAU,EAAEC,KAAa;MACnCb,QAAQ,CAACY,IAAI,CAACC,KAAK,EAAED,IAAI,CAAC;IAC5B,CAAC,CAAC;;EAGJpB,IAAI,CAACiB,UAAU,EAAE,UAAChB,QAAQ;IACxB;IACQ,OAAG,GAAKC,eAAe,CAAC;MAC9BqB,KAAK,EAAEf,QAAQ;MACfC,OAAO,EAAER;KACV,CAAC,IAHS;IAKX;IACQ,UAAM,GAAKA,QAAQ,OAAb;IACd,IAAIuB,MAAM,EAAE;MACVC,GAAG,CAACxB,QAAQ,CAACuB,MAAM,CAACA,MAAM,CAAC;;EAE/B,CAAC,CAAC;EAEF;EACAxB,IAAI,CAACW,YAAY,EAAE,UAACe,WAAwB;IAC1C,IAAIA,WAAW,CAACC,MAAM,KAAK,KAAK,EAAE;MAChCnB,QAAQ,CAACoB,iBAAiB,CAACF,WAAW,CAACG,IAAI,CAAC;KAC7C,MAAM;MACLrB,QAAQ,CAACkB,WAAW,CAACA,WAAW,CAACG,IAAI,EAAEH,WAAW,CAACI,GAAG,CAAC;;EAE3D,CAAC,CAAC;EACF;EACA9B,IAAI,CAACY,WAAW,EAAE,UAACmB,UAAU;IAC3BvB,QAAQ,CAACuB,UAAU,EAAE,CAACA,UAAU,CAACF,IAAI,CAAC,cACjCE,UAAU,EACb;EACJ,CAAC,CAAC;EAEF;EACA3B,gBAAgB,CAACI,QAAQ,EAAEK,SAAiC,CAAC;EAE7D,IAAIC,OAAO,EAAE;IACX;IACAN,QAAQ,CAACkB,WAAW,CAAC,SAAS,CAAC;IAC/BlB,QAAQ,CAACM,OAAO,CAACA,OAAO,CAAC;GAC1B,MAAM,IAAIA,OAAO,KAAK,KAAK,EAAE;IAC5BN,QAAQ,CAACoB,iBAAiB,CAAC,SAAS,CAAC;;AAEzC","names":["each","geometry","geometryAdaptor","AXIS_META_CONFIG_KEYS","addViewAnimation","deepAssign","pick","execViewAdaptor","viewOfG2","options","coordinate","interactions","annotations","animation","tooltip","axes","meta","geometries","data","scales","axis","field","scale","chart","adjust","ext","interaction","enable","removeInteraction","type","cfg","annotation"],"sources":["/home/iam/Documents/network/node_modules/@antv/g2plot/src/plots/facet/utils.ts"],"sourcesContent":["import { View } from '@antv/g2';\nimport { each } from '@antv/util';\nimport { geometry as geometryAdaptor } from '../../adaptor/geometries/base';\nimport { AXIS_META_CONFIG_KEYS } from '../../constant';\nimport { Axis, Interaction, Options } from '../../types';\nimport { addViewAnimation, deepAssign, pick } from '../../utils';\nimport { IView } from './types';\n\n/**\n *\n * @param params 分面图 参数\n * @returns facet eachView 的回调设置每个 view 的展示\n */\nexport function execViewAdaptor(viewOfG2: View, options: IView): void {\n  const { data, coordinate, interactions, annotations, animation, tooltip, axes, meta, geometries } = options;\n\n  // 1. data, optional\n  if (data) {\n    viewOfG2.data(data);\n  }\n\n  // 2. meta 配置\n  let scales: Record<string, any> = {};\n  if (axes) {\n    each(axes, (axis: Axis, field: string) => {\n      scales[field] = pick(axis, AXIS_META_CONFIG_KEYS);\n    });\n  }\n\n  scales = deepAssign({}, meta, scales);\n  viewOfG2.scale(scales);\n\n  // 3. coordinate 配置 (默认由顶层决定)\n  if (coordinate) {\n    viewOfG2.coordinate(coordinate);\n  }\n\n  // 4. axis 轴配置 (默认由顶层决定，但可以通过 false 强制关闭)\n  if (axes === false) {\n    viewOfG2.axis(false);\n  } else {\n    each(axes, (axis: Axis, field: string) => {\n      viewOfG2.axis(field, axis);\n    });\n  }\n\n  each(geometries, (geometry) => {\n    // Geometry\n    const { ext } = geometryAdaptor({\n      chart: viewOfG2,\n      options: geometry,\n    });\n\n    // Geometry adjust\n    const { adjust } = geometry;\n    if (adjust) {\n      ext.geometry.adjust(adjust);\n    }\n  });\n\n  // 5. interactions\n  each(interactions, (interaction: Interaction) => {\n    if (interaction.enable === false) {\n      viewOfG2.removeInteraction(interaction.type);\n    } else {\n      viewOfG2.interaction(interaction.type, interaction.cfg);\n    }\n  });\n  // 6. annotations\n  each(annotations, (annotation) => {\n    viewOfG2.annotation()[annotation.type]({\n      ...annotation,\n    });\n  });\n\n  // 7. animation (先做动画)\n  addViewAnimation(viewOfG2, animation as Options['animation']);\n\n  if (tooltip) {\n    // 8. tooltip\n    viewOfG2.interaction('tooltip');\n    viewOfG2.tooltip(tooltip);\n  } else if (tooltip === false) {\n    viewOfG2.removeInteraction('tooltip');\n  }\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}