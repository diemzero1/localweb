{"ast":null,"code":"import { animation, annotation, interaction, slider, theme } from '../../adaptor/common';\nimport { schema } from '../../adaptor/geometries';\nimport { AXIS_META_CONFIG_KEYS } from '../../constant';\nimport { deepAssign, flow, pick } from '../../utils';\nimport { TREND_DOWN, TREND_FIELD, TREND_UP, Y_FIELD } from './constant';\nimport { getStockData } from './utils';\n/**\n * 图表配置处理\n * @param params\n */\nfunction geometry(params) {\n  var chart = params.chart,\n    options = params.options;\n  var yField = options.yField;\n  var data = options.data,\n    risingFill = options.risingFill,\n    fallingFill = options.fallingFill,\n    tooltip = options.tooltip,\n    stockStyle = options.stockStyle;\n  chart.data(getStockData(data, yField));\n  var tooltipOptions = tooltip;\n  if (tooltipOptions !== false) {\n    tooltipOptions = deepAssign({}, {\n      fields: yField\n    }, tooltipOptions);\n  }\n  schema(deepAssign({}, params, {\n    options: {\n      schema: {\n        shape: 'candle',\n        color: [risingFill, fallingFill],\n        style: stockStyle\n      },\n      yField: Y_FIELD,\n      seriesField: TREND_FIELD,\n      rawFields: yField,\n      tooltip: tooltipOptions\n    }\n  }));\n  return params;\n}\n/**\n * meta 配置\n * @param params\n */\nexport function meta(params) {\n  var _a, _b;\n  var chart = params.chart,\n    options = params.options;\n  var meta = options.meta,\n    xAxis = options.xAxis,\n    yAxis = options.yAxis,\n    xField = options.xField;\n  var baseMeta = (_a = {}, _a[xField] = {\n    type: 'timeCat',\n    tickCount: 6\n  }, _a[TREND_FIELD] = {\n    values: [TREND_UP, TREND_DOWN]\n  }, _a);\n  var scales = deepAssign(baseMeta, meta, (_b = {}, _b[xField] = pick(xAxis, AXIS_META_CONFIG_KEYS), _b[Y_FIELD] = pick(yAxis, AXIS_META_CONFIG_KEYS), _b));\n  chart.scale(scales);\n  return params;\n}\n/**\n * axis 配置\n * @param params\n */\nexport function axis(params) {\n  var chart = params.chart,\n    options = params.options;\n  var xAxis = options.xAxis,\n    yAxis = options.yAxis,\n    xField = options.xField;\n  // 为 false 则是不显示轴\n  if (xAxis === false) {\n    chart.axis(xField, false);\n  } else {\n    chart.axis(xField, xAxis);\n  }\n  if (yAxis === false) {\n    chart.axis(Y_FIELD, false);\n  } else {\n    chart.axis(Y_FIELD, yAxis);\n  }\n  return params;\n}\n/**\n * tooltip 配置\n * @param params\n */\nexport function tooltip(params) {\n  var chart = params.chart,\n    options = params.options;\n  var tooltip = options.tooltip;\n  if (tooltip !== false) {\n    chart.tooltip(tooltip);\n  } else {\n    chart.tooltip(false);\n  }\n  return params;\n}\n/**\n * legend 配置\n * @param params\n */\nexport function legend(params) {\n  var chart = params.chart,\n    options = params.options;\n  var legend = options.legend;\n  if (legend) {\n    chart.legend(TREND_FIELD, legend);\n  } else if (legend === false) {\n    chart.legend(false);\n  }\n  return params;\n}\n/**\n * K线图适配器\n * @param chart\n * @param options\n */\nexport function adaptor(params) {\n  // flow 的方式处理所有的配置到 G2 API\n  flow(theme, geometry, meta, axis, tooltip, legend, interaction, animation, annotation(), slider)(params);\n}","map":{"version":3,"mappings":"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","names":["animation","annotation","interaction","slider","theme","schema","AXIS_META_CONFIG_KEYS","deepAssign","flow","pick","TREND_DOWN","TREND_FIELD","TREND_UP","Y_FIELD","getStockData","geometry","params","options","risingFill","fallingFill","tooltip","stockStyle","chart","data","yField","tooltipOptions","fields","shape","color","style","seriesField","rawFields","meta","xAxis","yAxis","xField","baseMeta","_a","type","tickCount","values","scales","_b","scale","axis","legend","adaptor"],"sources":["/home/iam/Documents/network/node_modules/@antv/g2plot/src/plots/stock/adaptor.ts"],"sourcesContent":["import { animation, annotation, interaction, slider, theme } from '../../adaptor/common';\nimport { schema } from '../../adaptor/geometries';\nimport { AXIS_META_CONFIG_KEYS } from '../../constant';\nimport { Params } from '../../core/adaptor';\nimport { deepAssign, flow, pick } from '../../utils';\nimport { TREND_DOWN, TREND_FIELD, TREND_UP, Y_FIELD } from './constant';\nimport { StockOptions } from './types';\nimport { getStockData } from './utils';\n\n/**\n * 图表配置处理\n * @param params\n */\nfunction geometry(params: Params<StockOptions>): Params<StockOptions> {\n  const { chart, options } = params;\n  const { yField } = options;\n\n  const { data, risingFill, fallingFill, tooltip, stockStyle } = options;\n\n  chart.data(getStockData(data, yField));\n\n  let tooltipOptions = tooltip;\n  if (tooltipOptions !== false) {\n    tooltipOptions = deepAssign({}, { fields: yField }, tooltipOptions);\n  }\n\n  schema(\n    deepAssign({}, params, {\n      options: {\n        schema: {\n          shape: 'candle',\n          color: [risingFill, fallingFill],\n          style: stockStyle,\n        },\n        yField: Y_FIELD,\n        seriesField: TREND_FIELD,\n        rawFields: yField,\n        tooltip: tooltipOptions,\n      },\n    })\n  );\n\n  return params;\n}\n\n/**\n * meta 配置\n * @param params\n */\nexport function meta(params: Params<StockOptions>): Params<StockOptions> {\n  const { chart, options } = params;\n  const { meta, xAxis, yAxis, xField } = options;\n\n  const baseMeta = {\n    [xField]: {\n      type: 'timeCat',\n      tickCount: 6,\n    },\n    [TREND_FIELD]: {\n      values: [TREND_UP, TREND_DOWN],\n    },\n  };\n\n  const scales = deepAssign(baseMeta, meta, {\n    [xField]: pick(xAxis, AXIS_META_CONFIG_KEYS),\n    [Y_FIELD]: pick(yAxis, AXIS_META_CONFIG_KEYS),\n  });\n\n  chart.scale(scales);\n\n  return params;\n}\n\n/**\n * axis 配置\n * @param params\n */\nexport function axis(params: Params<StockOptions>): Params<StockOptions> {\n  const { chart, options } = params;\n  const { xAxis, yAxis, xField } = options;\n\n  // 为 false 则是不显示轴\n  if (xAxis === false) {\n    chart.axis(xField, false);\n  } else {\n    chart.axis(xField, xAxis);\n  }\n\n  if (yAxis === false) {\n    chart.axis(Y_FIELD, false);\n  } else {\n    chart.axis(Y_FIELD, yAxis);\n  }\n\n  return params;\n}\n\n/**\n * tooltip 配置\n * @param params\n */\nexport function tooltip(params: Params<StockOptions>): Params<StockOptions> {\n  const { chart, options } = params;\n  const { tooltip } = options;\n\n  if (tooltip !== false) {\n    chart.tooltip(tooltip);\n  } else {\n    chart.tooltip(false);\n  }\n\n  return params;\n}\n\n/**\n * legend 配置\n * @param params\n */\nexport function legend(params: Params<StockOptions>): Params<StockOptions> {\n  const { chart, options } = params;\n  const { legend } = options;\n\n  if (legend) {\n    chart.legend(TREND_FIELD, legend);\n  } else if (legend === false) {\n    chart.legend(false);\n  }\n\n  return params;\n}\n\n/**\n * K线图适配器\n * @param chart\n * @param options\n */\nexport function adaptor(params: Params<StockOptions>) {\n  // flow 的方式处理所有的配置到 G2 API\n  flow(theme, geometry, meta, axis, tooltip, legend, interaction, animation, annotation(), slider)(params);\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}