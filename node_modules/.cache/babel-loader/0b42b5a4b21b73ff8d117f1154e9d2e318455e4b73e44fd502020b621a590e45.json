{"ast":null,"code":"import { deepAssign, flow } from '../../../utils';\nimport { basicFunnel } from './basic';\n/**\n * 处理字段数据\n * @param params\n */\nfunction field(params) {\n  var _a;\n  var chart = params.chart,\n    options = params.options;\n  var _b = options.data,\n    data = _b === void 0 ? [] : _b,\n    yField = options.yField;\n  // 绘制漏斗图\n  chart.data(data);\n  chart.scale((_a = {}, _a[yField] = {\n    sync: true\n  }, _a));\n  return params;\n}\n/**\n * geometry处理\n * @param params\n */\nfunction geometry(params) {\n  var chart = params.chart,\n    options = params.options;\n  var seriesField = options.seriesField,\n    isTransposed = options.isTransposed,\n    showFacetTitle = options.showFacetTitle;\n  chart.facet('rect', {\n    fields: [seriesField],\n    padding: [isTransposed ? 0 : 32, 10, 0, 10],\n    showTitle: showFacetTitle,\n    eachView: function (view, facet) {\n      basicFunnel(deepAssign({}, params, {\n        chart: view,\n        options: {\n          data: facet.data\n        }\n      }));\n    }\n  });\n  return params;\n}\n/**\n * 分面漏斗\n * @param chart\n * @param options\n */\nexport function facetFunnel(params) {\n  return flow(field, geometry)(params);\n}","map":{"version":3,"mappings":"AACA,SAASA,UAAU,EAAEC,IAAI,QAAQ,gBAAgB;AAEjD,SAASC,WAAW,QAAQ,SAAS;AAErC;;;;AAIA,SAASC,KAAK,CAACC,MAA6B;;EAClC,SAAK,GAAcA,MAAM,MAApB;IAAEC,OAAO,GAAKD,MAAM,QAAX;EACd,SAAsBC,OAAO,KAApB;IAATC,IAAI,mBAAG,EAAE;IAAEC,MAAM,GAAKF,OAAO,OAAZ;EACzB;EACAG,KAAK,CAACF,IAAI,CAACA,IAAI,CAAC;EAChBE,KAAK,CAACC,KAAK,WACTC,GAACH,MAAM,IAAG;IACRI,IAAI,EAAE;GACP,MACD;EACF,OAAOP,MAAM;AACf;AAEA;;;;AAIA,SAASQ,QAAQ,CAACR,MAA6B;EACrC,SAAK,GAAcA,MAAM,MAApB;IAAEC,OAAO,GAAKD,MAAM,QAAX;EACd,eAAW,GAAmCC,OAAO,YAA1C;IAAEQ,YAAY,GAAqBR,OAAO,aAA5B;IAAES,cAAc,GAAKT,OAAO,eAAZ;EAEjDG,KAAK,CAACO,KAAK,CAAC,MAAM,EAAE;IAClBC,MAAM,EAAE,CAACC,WAAW,CAAC;IACrBC,OAAO,EAAE,CAACL,YAAY,GAAG,CAAC,GAAG,EAAE,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,CAAC;IAC3CM,SAAS,EAAEL,cAAc;IACzBM,QAAQ,YAACC,IAAI,EAAEN,KAAK;MAClBb,WAAW,CACTF,UAAU,CAAC,EAAE,EAAEI,MAAM,EAAE;QACrBI,KAAK,EAAEa,IAAI;QACXhB,OAAO,EAAE;UACPC,IAAI,EAAES,KAAK,CAACT;;OAEf,CAAC,CACH;IACH;GACD,CAAC;EAEF,OAAOF,MAAM;AACf;AAEA;;;;;AAKA,OAAM,SAAUkB,WAAW,CAAClB,MAA6B;EACvD,OAAOH,IAAI,CAACE,KAAK,EAAES,QAAQ,CAAC,CAACR,MAAM,CAAC;AACtC","names":["deepAssign","flow","basicFunnel","field","params","options","data","yField","chart","scale","_a","sync","geometry","isTransposed","showFacetTitle","facet","fields","seriesField","padding","showTitle","eachView","view","facetFunnel"],"sources":["/home/iam/Documents/network/node_modules/@antv/g2plot/src/plots/funnel/geometries/facet.ts"],"sourcesContent":["import { Params } from '../../../core/adaptor';\nimport { deepAssign, flow } from '../../../utils';\nimport { FunnelOptions } from '../types';\nimport { basicFunnel } from './basic';\n\n/**\n * 处理字段数据\n * @param params\n */\nfunction field(params: Params<FunnelOptions>): Params<FunnelOptions> {\n  const { chart, options } = params;\n  const { data = [], yField } = options;\n  // 绘制漏斗图\n  chart.data(data);\n  chart.scale({\n    [yField]: {\n      sync: true,\n    },\n  });\n  return params;\n}\n\n/**\n * geometry处理\n * @param params\n */\nfunction geometry(params: Params<FunnelOptions>): Params<FunnelOptions> {\n  const { chart, options } = params;\n  const { seriesField, isTransposed, showFacetTitle } = options;\n\n  chart.facet('rect', {\n    fields: [seriesField],\n    padding: [isTransposed ? 0 : 32, 10, 0, 10],\n    showTitle: showFacetTitle,\n    eachView(view, facet) {\n      basicFunnel(\n        deepAssign({}, params, {\n          chart: view,\n          options: {\n            data: facet.data,\n          },\n        })\n      );\n    },\n  });\n\n  return params;\n}\n\n/**\n * 分面漏斗\n * @param chart\n * @param options\n */\nexport function facetFunnel(params: Params<FunnelOptions>) {\n  return flow(field, geometry)(params);\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}