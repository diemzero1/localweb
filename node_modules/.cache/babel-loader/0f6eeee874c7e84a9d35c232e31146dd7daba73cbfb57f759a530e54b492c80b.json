{"ast":null,"code":"import { __assign, __extends } from \"tslib\";\nimport { createDom, getOuterHeight, getOuterWidth, modifyCSS } from '@antv/dom-util';\nimport { isElement, isFunction, isNumber, isString } from '@antv/util';\nimport HtmlComponent from '../abstract/html-component';\nimport { clearDom } from '../util/util';\nvar HtmlAnnotation = /** @class */function (_super) {\n  __extends(HtmlAnnotation, _super);\n  function HtmlAnnotation() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  HtmlAnnotation.prototype.getDefaultCfg = function () {\n    var cfg = _super.prototype.getDefaultCfg.call(this);\n    return __assign(__assign({}, cfg), {\n      name: 'annotation',\n      type: 'html',\n      locationType: 'point',\n      x: 0,\n      y: 0,\n      containerTpl: \"<div class=\\\"g2-html-annotation\\\" style=\\\"position:absolute\\\"></div>\",\n      alignX: 'left',\n      alignY: 'top',\n      html: '',\n      zIndex: 7\n    });\n  };\n  HtmlAnnotation.prototype.render = function () {\n    var container = this.getContainer();\n    var html = this.get('html');\n    clearDom(container);\n    var rst = isFunction(html) ? html(container) : html;\n    if (isElement(rst)) {\n      container.appendChild(rst);\n    } else if (isString(rst) || isNumber(rst)) {\n      var dom = createDom(\"\" + rst);\n      if (dom) {\n        container.appendChild(dom);\n      }\n    }\n    this.resetPosition();\n  };\n  HtmlAnnotation.prototype.resetPosition = function () {\n    var container = this.getContainer();\n    var _a = this.getLocation(),\n      x = _a.x,\n      y = _a.y;\n    var alignX = this.get('alignX');\n    var alignY = this.get('alignY');\n    var offsetX = this.get('offsetX');\n    var offsetY = this.get('offsetY');\n    var domWidth = getOuterWidth(container);\n    var domHeight = getOuterHeight(container);\n    var position = {\n      x: x,\n      y: y\n    };\n    if (alignX === 'middle') {\n      position.x -= Math.round(domWidth / 2);\n    } else if (alignX === 'right') {\n      position.x -= Math.round(domWidth);\n    }\n    if (alignY === 'middle') {\n      position.y -= Math.round(domHeight / 2);\n    } else if (alignY === 'bottom') {\n      position.y -= Math.round(domHeight);\n    }\n    if (offsetX) {\n      position.x += offsetX;\n    }\n    if (offsetY) {\n      position.y += offsetY;\n    }\n    modifyCSS(container, {\n      position: 'absolute',\n      left: position.x + \"px\",\n      top: position.y + \"px\",\n      zIndex: this.get('zIndex')\n    });\n  };\n  return HtmlAnnotation;\n}(HtmlComponent);\nexport default HtmlAnnotation;","map":{"version":3,"mappings":"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","names":["createDom","getOuterHeight","getOuterWidth","modifyCSS","isElement","isFunction","isNumber","isString","HtmlComponent","clearDom","__extends","HtmlAnnotation","cfg","_super","getDefaultCfg","name","type","locationType","x","y","containerTpl","alignX","alignY","html","zIndex","container","getContainer","get","rst","appendChild","dom","resetPosition","getLocation","offsetX","offsetY","domWidth","domHeight","position","Math","round","left","top"],"sources":["/home/iam/Documents/network/node_modules/@antv/component/src/annotation/html.ts"],"sourcesContent":["import { createDom, getOuterHeight, getOuterWidth, modifyCSS } from '@antv/dom-util';\nimport { isElement, isFunction, isNumber, isString } from '@antv/util';\nimport HtmlComponent from '../abstract/html-component';\nimport { ILocation } from '../interfaces';\nimport { HtmlAnnotationCfg, PointLocationCfg } from '../types';\nimport { clearDom } from '../util/util';\n\nexport default class HtmlAnnotation extends HtmlComponent<HtmlAnnotationCfg> implements ILocation<PointLocationCfg> {\n  public getDefaultCfg() {\n    const cfg = super.getDefaultCfg();\n    return {\n      ...cfg,\n      name: 'annotation',\n      type: 'html',\n      locationType: 'point',\n      x: 0,\n      y: 0,\n      containerTpl: `<div class=\"g2-html-annotation\" style=\"position:absolute\"></div>`,\n      alignX: 'left',\n      alignY: 'top',\n      html: '',\n      zIndex: 7,\n    };\n  }\n\n  public render() {\n    const container = this.getContainer();\n    const html = this.get('html');\n\n    clearDom(container);\n\n    const rst: HTMLElement | string = isFunction(html) ? html(container) : html;\n\n    if (isElement(rst)) {\n      container.appendChild(rst as HTMLElement);\n    } else if (isString(rst) || isNumber(rst)) {\n      const dom = createDom(`${rst}` as string);\n      if (dom) {\n        container.appendChild(dom);\n      }\n    }\n\n    this.resetPosition();\n  }\n\n  protected resetPosition() {\n    const container = this.getContainer();\n    const { x, y } = this.getLocation();\n    const alignX = this.get('alignX');\n    const alignY = this.get('alignY');\n    const offsetX = this.get('offsetX');\n    const offsetY = this.get('offsetY');\n    const domWidth = getOuterWidth(container);\n    const domHeight = getOuterHeight(container);\n\n    const position = {\n      x, // alignX left\n      y, // alignY top\n    };\n\n    if (alignX === 'middle') {\n      position.x -= Math.round(domWidth / 2);\n    } else if (alignX === 'right') {\n      position.x -= Math.round(domWidth);\n    }\n    if (alignY === 'middle') {\n      position.y -= Math.round(domHeight / 2);\n    } else if (alignY === 'bottom') {\n      position.y -= Math.round(domHeight);\n    }\n    if (offsetX) {\n      position.x += offsetX;\n    }\n    if (offsetY) {\n      position.y += offsetY;\n    }\n\n    modifyCSS(container, {\n      position: 'absolute',\n      left: `${position.x}px`,\n      top: `${position.y}px`,\n      zIndex: this.get('zIndex'),\n    });\n  }\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}