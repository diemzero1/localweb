{"ast":null,"code":"var __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n  for (var p in s) {\n    if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  }\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\nimport G6 from '@antv/g6';\nimport { isEqual, isFunction, isObject, isString, omit } from '@antv/util';\nimport { useEffect, useRef } from 'react';\nimport { createNode } from '../utils/create-node';\nimport { createToolbar, Menu } from '../plugins';\nimport { bindDefaultEvents, bindSourceMapCollapseEvents, bindStateEvents, deepClone, getAnchorPoints, getArrowCfg, getCommonCfg, getGraphId, getGraphSize, getLevelData, getMarkerPosition, processMinimap, renderGraph, setTag, bindRadialExplore, getCenterNode } from '../utils';\nimport { setGlobalInstance } from '../utils/global';\nexport default function useGraph(graphClass, config, extra) {\n  if (extra === void 0) {\n    extra = {};\n  }\n  var container = useRef(null);\n  var graphRef = useRef();\n  var graphOptions = useRef();\n  // data 单独处理，会被 G6 修改\n  var graphData = useRef();\n  var data = config.data,\n    width = config.width,\n    height = config.height,\n    layout = config.layout,\n    minimapCfg = config.minimapCfg,\n    behaviors = config.behaviors,\n    fitCenter = config.fitCenter,\n    nodeCfg = config.nodeCfg,\n    edgeCfg = config.edgeCfg,\n    markerCfg = config.markerCfg,\n    level = config.level,\n    toolbarCfg = config.toolbarCfg,\n    customLayout = config.customLayout;\n  var graph = graphRef.current;\n  /** 隐藏孤立边 */\n  var setEdgesState = function setEdgesState(edges) {\n    edges.forEach(function (edge) {\n      var _a, _b;\n      var _c = edge.getModel(),\n        source = _c.source,\n        target = _c.target;\n      var sourceVisible = (_a = graph === null || graph === void 0 ? void 0 : graph.findById(source)) === null || _a === void 0 ? void 0 : _a.get('visible');\n      var targetVisible = (_b = graph === null || graph === void 0 ? void 0 : graph.findById(target)) === null || _b === void 0 ? void 0 : _b.get('visible');\n      if (sourceVisible === false || targetVisible === false) {\n        edge.changeVisibility(false);\n      }\n    });\n  };\n  var changeData = function changeData() {\n    var _a;\n    if (!graph) {\n      return;\n    }\n    var currentData = data;\n    if (level) {\n      currentData = setTag(data);\n    }\n    graph.changeData(level ? getLevelData(currentData, level) : data);\n    (_a = graph.get('eventData')) === null || _a === void 0 ? void 0 : _a.setData(currentData);\n    setEdgesState(graph.getEdges());\n    if (fitCenter) {\n      graph.fitCenter();\n    }\n  };\n  var updateLayout = function updateLayout() {\n    graph === null || graph === void 0 ? void 0 : graph.updateLayout(layout);\n    if (fitCenter) {\n      graph === null || graph === void 0 ? void 0 : graph.fitCenter();\n    }\n  };\n  var updateNodes = function updateNodes() {\n    if (!graph) {\n      return;\n    }\n    var _a = nodeCfg !== null && nodeCfg !== void 0 ? nodeCfg : {},\n      nodeType = _a.type,\n      nodeAnchorPoints = _a.anchorPoints,\n      nodeStyle = _a.style,\n      nodeLabelCfg = _a.title;\n    graph.getNodes().forEach(function (node) {\n      var anchorPoints = getAnchorPoints(nodeAnchorPoints, node.getModel());\n      graph.updateItem(node, {\n        nodeCfg: nodeCfg,\n        markerCfg: markerCfg,\n        type: nodeType,\n        style: nodeStyle,\n        anchorPoints: anchorPoints,\n        labelCfg: nodeLabelCfg\n      });\n    });\n  };\n  var updateEdges = function updateEdges() {\n    if (!graph) {\n      return;\n    }\n    var _a = edgeCfg !== null && edgeCfg !== void 0 ? edgeCfg : {},\n      edgeType = _a.type,\n      edgeStyle = _a.style,\n      startArrowCfg = _a.startArrow,\n      endArrowCfg = _a.endArrow,\n      labelCfg = _a.label;\n    graph.getEdges().forEach(function (edge) {\n      // 资金流向图&来源去向图\n      if (['fund-line', 'labels-line'].includes(edgeType)) {\n        graph.updateItem(edge, {\n          edgeCfg: edgeCfg\n        });\n      } else {\n        var edgeCfgModel = edge.getModel();\n        var startArrow = getArrowCfg(startArrowCfg, edgeCfgModel);\n        var endArrow = getArrowCfg(endArrowCfg, edgeCfgModel);\n        var _a = labelCfg !== null && labelCfg !== void 0 ? labelCfg : {},\n          style = _a.style,\n          content = _a.content;\n        graph.updateItem(edge, {\n          type: edgeType,\n          label: getCommonCfg(content, edgeCfgModel, graph),\n          labelCfg: {\n            style: getCommonCfg(style, edgeCfgModel, graph)\n          },\n          style: __assign({\n            stroke: '#ccc',\n            startArrow: startArrow,\n            endArrow: endArrow\n          }, typeof edgeStyle === 'function' ? edgeStyle(edgeCfgModel, graph) : edgeStyle)\n        });\n      }\n    });\n  };\n  // 目前仅支持更新位置\n  var updateMarker = function updateMarker() {\n    if (!graph) {\n      return;\n    }\n    graph.getNodes().forEach(function (node) {\n      var _a = (typeof markerCfg === 'function' ? markerCfg(node.getModel(), node.get('group')) : markerCfg).position,\n        position = _a === void 0 ? 'right' : _a;\n      var _b = node.getBBox(),\n        width = _b.width,\n        height = _b.height;\n      var markerShape = node.get('group').get('children').find(function (item) {\n        return item.get('name') === 'collapse-icon';\n      });\n      if (markerShape) {\n        markerShape === null || markerShape === void 0 ? void 0 : markerShape.attr(__assign({}, getMarkerPosition(position, [width, height])));\n      }\n    });\n  };\n  var getEdgeStateStyles = function getEdgeStateStyles(edgeStateStyles) {\n    var _a = extra.name,\n      name = _a === void 0 ? '' : _a;\n    if (name !== 'FundFlowGraph') {\n      return edgeStateStyles;\n    }\n    if (!edgeStateStyles) {\n      return;\n    }\n    var _b = edgeStateStyles.hover,\n      hover = _b === void 0 ? {} : _b;\n    var endArrow = hover.endArrow,\n      startArrow = hover.startArrow;\n    if (!endArrow && !startArrow) {\n      return edgeStateStyles;\n    }\n    return {\n      hover: __assign(__assign({}, hover), {\n        endArrow: endArrow ? getArrowCfg(endArrow) : false,\n        startArrow: startArrow ? getArrowCfg(startArrow) : false\n      })\n    };\n  };\n  useEffect(function () {\n    var _a;\n    if (graph && !graph.destroyed) {\n      if (isEqual(data, graphData.current)) {\n        return;\n      }\n      if (extra.name === 'RadialGraph' && !((_a = graphData.current.nodes) === null || _a === void 0 ? void 0 : _a.length)) {\n        var centerNode = getCenterNode(data);\n        graph.set('centerNode', centerNode);\n        graph.updateLayout(__assign(__assign({}, layout), {\n          focusNode: centerNode\n        }));\n      } else {\n        changeData();\n      }\n      graphData.current = deepClone(data);\n    }\n  }, [data]);\n  useEffect(function () {\n    var _a, _b, _c, _d, _e;\n    if (graph && !graph.destroyed) {\n      if (isEqual(config, graphOptions.current)) {\n        return;\n      }\n      if (!customLayout && !isEqual(layout, (_a = graphOptions.current) === null || _a === void 0 ? void 0 : _a.layout)) {\n        updateLayout();\n      }\n      if (!isEqual(minimapCfg, (_b = graphOptions.current) === null || _b === void 0 ? void 0 : _b.minimapCfg)) {\n        processMinimap(minimapCfg, graph);\n      }\n      if (!isEqual(nodeCfg, (_c = graphOptions.current) === null || _c === void 0 ? void 0 : _c.nodeCfg)) {\n        updateNodes();\n      }\n      if (!isEqual(edgeCfg, (_d = graphOptions.current) === null || _d === void 0 ? void 0 : _d.edgeCfg)) {\n        updateEdges();\n      }\n      if (!isEqual(markerCfg, (_e = graphOptions.current) === null || _e === void 0 ? void 0 : _e.markerCfg)) {\n        updateMarker();\n      }\n      graphOptions.current = config;\n    }\n  }, [config]);\n  useEffect(function () {\n    if (graph && !graph.destroyed) {\n      var graphSize = getGraphSize(width, height, container);\n      graph.changeSize(graphSize[0], graphSize[1]);\n    }\n  }, [container, width, height]);\n  useEffect(function () {\n    if (graph && !graph.destroyed) {\n      var defaultMode = graph.get('modes').default;\n      var removingBehaviors_1 = [];\n      defaultMode.forEach(function (be) {\n        if (isObject(be)) {\n          removingBehaviors_1.push(be.type);\n        } else if (isString(be)) {\n          removingBehaviors_1.push(be);\n        }\n      });\n      graph.removeBehaviors(removingBehaviors_1, 'default');\n      graph.addBehaviors(behaviors, 'default');\n    }\n  }, [behaviors]);\n  useEffect(function () {\n    if (container.current && graphClass) {\n      var _a = extra.name,\n        name_1 = _a === void 0 ? '' : _a;\n      var graphSize = getGraphSize(width, height, container);\n      var plugins = [];\n      var nodeCfg_1 = config.nodeCfg,\n        edgeCfg_1 = config.edgeCfg,\n        behaviors_1 = config.behaviors,\n        layout_1 = config.layout,\n        animate = config.animate,\n        autoFit = config.autoFit,\n        fitCenter_1 = config.fitCenter,\n        onReady = config.onReady,\n        tooltipCfg = config.tooltipCfg,\n        customLayout_1 = config.customLayout,\n        menuCfg = config.menuCfg,\n        fetchLoading = config.fetchLoading;\n      var _b = nodeCfg_1 !== null && nodeCfg_1 !== void 0 ? nodeCfg_1 : {},\n        nodeType_1 = _b.type,\n        nodeAnchorPoints_1 = _b.anchorPoints,\n        nodeStateStyles = _b.nodeStateStyles,\n        nodeStyle_1 = _b.style,\n        nodeLabelCfg_1 = _b.title,\n        linkCenter = _b.linkCenter,\n        getChildren = _b.getChildren,\n        asyncData = _b.asyncData;\n      var _c = edgeCfg_1 !== null && edgeCfg_1 !== void 0 ? edgeCfg_1 : {},\n        edgeType = _c.type,\n        edgeStyle_1 = _c.style,\n        startArrowCfg_1 = _c.startArrow,\n        endArrowCfg_1 = _c.endArrow,\n        labelCfg_1 = _c.label,\n        edgeStateStyles = _c.edgeStateStyles;\n      // tooltip\n      if (tooltipCfg && isFunction(tooltipCfg.customContent)) {\n        var customContent_1 = tooltipCfg.customContent,\n          rest = __rest(tooltipCfg, [\"customContent\"]);\n        var tooltipPlugin = new G6.Tooltip(__assign(__assign({\n          offsetX: 10,\n          offsetY: 20,\n          itemTypes: ['node']\n        }, rest), {\n          getContent: function getContent(e) {\n            return createNode(customContent_1(e.item.getModel()), 'g6-tooltip');\n          }\n        }));\n        plugins.push(tooltipPlugin);\n      }\n      // menu\n      if (menuCfg && isFunction(menuCfg.customContent)) {\n        var menuPlugin = new Menu(__assign({\n          offsetX: 16 + 10,\n          offsetY: 0,\n          itemTypes: ['node']\n        }, menuCfg));\n        plugins.push(menuPlugin);\n      }\n      graphRef.current = new G6[graphClass]({\n        container: container.current,\n        width: graphSize[0],\n        height: graphSize[1],\n        animate: animate,\n        linkCenter: linkCenter,\n        modes: {\n          default: behaviors_1\n        },\n        defaultNode: __assign(__assign({}, nodeCfg_1), {\n          nodeCfg: nodeCfg_1\n        }),\n        defaultEdge: __assign(__assign({}, omit(edgeCfg_1, ['label'])), {\n          edgeCfg: edgeCfg_1,\n          labelCfg: labelCfg_1 === null || labelCfg_1 === void 0 ? void 0 : labelCfg_1.style\n        }),\n        nodeStateStyles: nodeStateStyles,\n        edgeStateStyles: getEdgeStateStyles(edgeStateStyles),\n        layout: customLayout_1 ? undefined : layout_1,\n        fitView: autoFit,\n        fitCenter: fitCenter_1,\n        plugins: plugins\n      });\n      var graphId_1 = getGraphId(graphRef.current, name_1);\n      var graph_1 = graphRef.current;\n      graph_1.set('id', graphId_1);\n      setGlobalInstance(graphId_1, graph_1);\n      var getLabel_1 = function getLabel_1(value) {\n        // 辐射树图\n        if (isString(value)) {\n          return value;\n        }\n        if (name_1 === 'FundFlowGraph') {\n          return value === null || value === void 0 ? void 0 : value.text;\n        }\n        return value === null || value === void 0 ? void 0 : value.title;\n      };\n      var customNode_1 = ['fund-card', 'indicator-card'];\n      // defaultNode 默认只能绑定 plainObject，针对 Function 类型需要通过该模式绑定\n      graph_1.node(function (node) {\n        if (customNode_1.includes(nodeType_1) || name_1 === 'OrganizationGraph') {\n          var anchorPoints = getAnchorPoints(nodeAnchorPoints_1, node);\n          node.markerCfg = markerCfg;\n          return {\n            anchorPoints: anchorPoints,\n            _graphId: graphId_1\n          };\n        }\n        var style = (nodeLabelCfg_1 !== null && nodeLabelCfg_1 !== void 0 ? nodeLabelCfg_1 : {}).style;\n        return {\n          _graphId: graphId_1,\n          label: getLabel_1(node.value),\n          labelCfg: {\n            style: getCommonCfg(style, node, graph_1)\n          },\n          style: __assign({\n            stroke: '#ccc'\n          }, typeof nodeStyle_1 === 'function' ? nodeStyle_1(node, graph_1) : nodeStyle_1)\n        };\n      });\n      var getEdgeLabel_1 = function getEdgeLabel_1(edge) {\n        var content = (labelCfg_1 !== null && labelCfg_1 !== void 0 ? labelCfg_1 : {}).content;\n        if (['DecompositionTreeGraph', 'OrganizationGraph', 'RadialTreeGraph'].includes(name_1)) {\n          return getCommonCfg(content, edge, graph_1);\n        }\n        if (['FundFlowGraph', 'FlowAnalysisGraph'].includes(name_1)) {\n          var value = edge.value;\n          // @ts-ignore\n          return typeof value === 'object' ? value === null || value === void 0 ? void 0 : value.text : value;\n        }\n        return edge.value;\n      };\n      if (!['fund-line', 'labels-line'].includes(edgeType)) {\n        graph_1.edge(function (edge) {\n          var startArrow = getArrowCfg(startArrowCfg_1, edge);\n          var endArrow = getArrowCfg(endArrowCfg_1, edge);\n          var style = (labelCfg_1 !== null && labelCfg_1 !== void 0 ? labelCfg_1 : {}).style;\n          return {\n            label: getEdgeLabel_1(edge),\n            labelCfg: {\n              style: getCommonCfg(style, edge, graph_1)\n            },\n            style: __assign({\n              stroke: '#ccc',\n              startArrow: startArrow,\n              endArrow: endArrow\n            }, typeof edgeStyle_1 === 'function' ? edgeStyle_1(edge, graph_1) : edgeStyle_1)\n          };\n        });\n      }\n      processMinimap(minimapCfg, graph_1);\n      bindStateEvents(graph_1, config);\n      if (markerCfg) {\n        var sourceGraph = ['FlowAnalysisGraph', 'FundFlowGraph'];\n        sourceGraph.includes(name_1) ? bindSourceMapCollapseEvents(graph_1, asyncData, fetchLoading) : bindDefaultEvents(graph_1, level, getChildren, fetchLoading);\n      }\n      if (name_1 === 'RadialGraph') {\n        var centerNode = getCenterNode(data);\n        graph_1.set('centerNode', centerNode);\n        bindRadialExplore(graph_1, asyncData, layout_1, fetchLoading);\n      }\n      renderGraph(graph_1, data, level);\n      if (fitCenter_1) {\n        graph_1.fitCenter();\n      }\n      if (onReady) {\n        onReady(graph_1);\n      }\n      graphData.current = deepClone(data);\n    }\n  }, []);\n  useEffect(function () {\n    if (graphRef.current && toolbarCfg) {\n      createToolbar({\n        graph: graphRef.current,\n        container: container.current,\n        toolbarCfg: toolbarCfg\n      });\n    }\n  }, [graphRef, toolbarCfg]);\n  useEffect(function () {\n    return function () {\n      if ((graph === null || graph === void 0 ? void 0 : graph.current) && !graph.current.destroyed) {\n        graph.current.destroy();\n      }\n    };\n  }, []);\n  return {\n    container: container\n  };\n}","map":{"version":3,"names":["__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","__rest","e","indexOf","getOwnPropertySymbols","propertyIsEnumerable","G6","isEqual","isFunction","isObject","isString","omit","useEffect","useRef","createNode","createToolbar","Menu","bindDefaultEvents","bindSourceMapCollapseEvents","bindStateEvents","deepClone","getAnchorPoints","getArrowCfg","getCommonCfg","getGraphId","getGraphSize","getLevelData","getMarkerPosition","processMinimap","renderGraph","setTag","bindRadialExplore","getCenterNode","setGlobalInstance","useGraph","graphClass","config","extra","container","graphRef","graphOptions","graphData","data","width","height","layout","minimapCfg","behaviors","fitCenter","nodeCfg","edgeCfg","markerCfg","level","toolbarCfg","customLayout","graph","current","setEdgesState","edges","forEach","edge","_a","_b","_c","getModel","source","target","sourceVisible","findById","get","targetVisible","changeVisibility","changeData","currentData","setData","getEdges","updateLayout","updateNodes","nodeType","type","nodeAnchorPoints","anchorPoints","nodeStyle","style","nodeLabelCfg","title","getNodes","node","updateItem","labelCfg","updateEdges","edgeType","edgeStyle","startArrowCfg","startArrow","endArrowCfg","endArrow","label","includes","edgeCfgModel","content","stroke","updateMarker","position","getBBox","markerShape","find","item","attr","getEdgeStateStyles","edgeStateStyles","name","hover","destroyed","nodes","centerNode","set","focusNode","_d","_e","graphSize","changeSize","defaultMode","default","removingBehaviors_1","be","push","removeBehaviors","addBehaviors","name_1","plugins","nodeCfg_1","edgeCfg_1","behaviors_1","layout_1","animate","autoFit","fitCenter_1","onReady","tooltipCfg","customLayout_1","menuCfg","fetchLoading","nodeType_1","nodeAnchorPoints_1","nodeStateStyles","nodeStyle_1","nodeLabelCfg_1","linkCenter","getChildren","asyncData","edgeStyle_1","startArrowCfg_1","endArrowCfg_1","labelCfg_1","customContent","customContent_1","rest","tooltipPlugin","Tooltip","offsetX","offsetY","itemTypes","getContent","menuPlugin","modes","defaultNode","defaultEdge","undefined","fitView","graphId_1","graph_1","getLabel_1","value","text","customNode_1","_graphId","getEdgeLabel_1","sourceGraph","destroy"],"sources":["/home/iam/Documents/LocalWeb-master/node_modules/@ant-design/graphs/es/hooks/useGraphs.js"],"sourcesContent":["var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport G6 from '@antv/g6';\nimport { isEqual, isFunction, isObject, isString, omit } from '@antv/util';\nimport { useEffect, useRef } from 'react';\nimport { createNode } from '../utils/create-node';\nimport { createToolbar, Menu } from '../plugins';\nimport { bindDefaultEvents, bindSourceMapCollapseEvents, bindStateEvents, deepClone, getAnchorPoints, getArrowCfg, getCommonCfg, getGraphId, getGraphSize, getLevelData, getMarkerPosition, processMinimap, renderGraph, setTag, bindRadialExplore, getCenterNode, } from '../utils';\nimport { setGlobalInstance } from '../utils/global';\nexport default function useGraph(graphClass, config, extra) {\n    if (extra === void 0) { extra = {}; }\n    var container = useRef(null);\n    var graphRef = useRef();\n    var graphOptions = useRef();\n    // data 单独处理，会被 G6 修改\n    var graphData = useRef();\n    var data = config.data, width = config.width, height = config.height, layout = config.layout, minimapCfg = config.minimapCfg, behaviors = config.behaviors, fitCenter = config.fitCenter, nodeCfg = config.nodeCfg, edgeCfg = config.edgeCfg, markerCfg = config.markerCfg, level = config.level, toolbarCfg = config.toolbarCfg, customLayout = config.customLayout;\n    var graph = graphRef.current;\n    /** 隐藏孤立边 */\n    var setEdgesState = function (edges) {\n        edges.forEach(function (edge) {\n            var _a, _b;\n            var _c = edge.getModel(), source = _c.source, target = _c.target;\n            var sourceVisible = (_a = graph === null || graph === void 0 ? void 0 : graph.findById(source)) === null || _a === void 0 ? void 0 : _a.get('visible');\n            var targetVisible = (_b = graph === null || graph === void 0 ? void 0 : graph.findById(target)) === null || _b === void 0 ? void 0 : _b.get('visible');\n            if (sourceVisible === false || targetVisible === false) {\n                edge.changeVisibility(false);\n            }\n        });\n    };\n    var changeData = function () {\n        var _a;\n        if (!graph) {\n            return;\n        }\n        var currentData = data;\n        if (level) {\n            currentData = setTag(data);\n        }\n        graph.changeData(level ? getLevelData(currentData, level) : data);\n        (_a = graph.get('eventData')) === null || _a === void 0 ? void 0 : _a.setData(currentData);\n        setEdgesState(graph.getEdges());\n        if (fitCenter) {\n            graph.fitCenter();\n        }\n    };\n    var updateLayout = function () {\n        graph === null || graph === void 0 ? void 0 : graph.updateLayout(layout);\n        if (fitCenter) {\n            graph === null || graph === void 0 ? void 0 : graph.fitCenter();\n        }\n    };\n    var updateNodes = function () {\n        if (!graph) {\n            return;\n        }\n        var _a = nodeCfg !== null && nodeCfg !== void 0 ? nodeCfg : {}, nodeType = _a.type, nodeAnchorPoints = _a.anchorPoints, nodeStyle = _a.style, nodeLabelCfg = _a.title;\n        graph.getNodes().forEach(function (node) {\n            var anchorPoints = getAnchorPoints(nodeAnchorPoints, node.getModel());\n            graph.updateItem(node, {\n                nodeCfg: nodeCfg,\n                markerCfg: markerCfg,\n                type: nodeType,\n                style: nodeStyle,\n                anchorPoints: anchorPoints,\n                labelCfg: nodeLabelCfg,\n            });\n        });\n    };\n    var updateEdges = function () {\n        if (!graph) {\n            return;\n        }\n        var _a = edgeCfg !== null && edgeCfg !== void 0 ? edgeCfg : {}, edgeType = _a.type, edgeStyle = _a.style, startArrowCfg = _a.startArrow, endArrowCfg = _a.endArrow, labelCfg = _a.label;\n        graph.getEdges().forEach(function (edge) {\n            // 资金流向图&来源去向图\n            if (['fund-line', 'labels-line'].includes(edgeType)) {\n                graph.updateItem(edge, {\n                    edgeCfg: edgeCfg,\n                });\n            }\n            else {\n                var edgeCfgModel = edge.getModel();\n                var startArrow = getArrowCfg(startArrowCfg, edgeCfgModel);\n                var endArrow = getArrowCfg(endArrowCfg, edgeCfgModel);\n                var _a = labelCfg !== null && labelCfg !== void 0 ? labelCfg : {}, style = _a.style, content = _a.content;\n                graph.updateItem(edge, {\n                    type: edgeType,\n                    label: getCommonCfg(content, edgeCfgModel, graph),\n                    labelCfg: {\n                        style: getCommonCfg(style, edgeCfgModel, graph),\n                    },\n                    style: __assign({ stroke: '#ccc', startArrow: startArrow, endArrow: endArrow }, (typeof edgeStyle === 'function' ? edgeStyle(edgeCfgModel, graph) : edgeStyle)),\n                });\n            }\n        });\n    };\n    // 目前仅支持更新位置\n    var updateMarker = function () {\n        if (!graph) {\n            return;\n        }\n        graph.getNodes().forEach(function (node) {\n            var _a = (typeof markerCfg === 'function' ? markerCfg(node.getModel(), node.get('group')) : markerCfg).position, position = _a === void 0 ? 'right' : _a;\n            var _b = node.getBBox(), width = _b.width, height = _b.height;\n            var markerShape = node\n                .get('group')\n                .get('children')\n                .find(function (item) { return item.get('name') === 'collapse-icon'; });\n            if (markerShape) {\n                markerShape === null || markerShape === void 0 ? void 0 : markerShape.attr(__assign({}, getMarkerPosition(position, [width, height])));\n            }\n        });\n    };\n    var getEdgeStateStyles = function (edgeStateStyles) {\n        var _a = extra.name, name = _a === void 0 ? '' : _a;\n        if (name !== 'FundFlowGraph') {\n            return edgeStateStyles;\n        }\n        if (!edgeStateStyles) {\n            return;\n        }\n        var _b = edgeStateStyles.hover, hover = _b === void 0 ? {} : _b;\n        var endArrow = hover.endArrow, startArrow = hover.startArrow;\n        if (!endArrow && !startArrow) {\n            return edgeStateStyles;\n        }\n        return {\n            hover: __assign(__assign({}, hover), { endArrow: endArrow ? getArrowCfg(endArrow) : false, startArrow: startArrow ? getArrowCfg(startArrow) : false }),\n        };\n    };\n    useEffect(function () {\n        var _a;\n        if (graph && !graph.destroyed) {\n            if (isEqual(data, graphData.current)) {\n                return;\n            }\n            if (extra.name === 'RadialGraph' && !((_a = graphData.current.nodes) === null || _a === void 0 ? void 0 : _a.length)) {\n                var centerNode = getCenterNode(data);\n                graph.set('centerNode', centerNode);\n                graph.updateLayout(__assign(__assign({}, layout), { focusNode: centerNode }));\n            }\n            else {\n                changeData();\n            }\n            graphData.current = deepClone(data);\n        }\n    }, [data]);\n    useEffect(function () {\n        var _a, _b, _c, _d, _e;\n        if (graph && !graph.destroyed) {\n            if (isEqual(config, graphOptions.current)) {\n                return;\n            }\n            if (!customLayout && !isEqual(layout, (_a = graphOptions.current) === null || _a === void 0 ? void 0 : _a.layout)) {\n                updateLayout();\n            }\n            if (!isEqual(minimapCfg, (_b = graphOptions.current) === null || _b === void 0 ? void 0 : _b.minimapCfg)) {\n                processMinimap(minimapCfg, graph);\n            }\n            if (!isEqual(nodeCfg, (_c = graphOptions.current) === null || _c === void 0 ? void 0 : _c.nodeCfg)) {\n                updateNodes();\n            }\n            if (!isEqual(edgeCfg, (_d = graphOptions.current) === null || _d === void 0 ? void 0 : _d.edgeCfg)) {\n                updateEdges();\n            }\n            if (!isEqual(markerCfg, (_e = graphOptions.current) === null || _e === void 0 ? void 0 : _e.markerCfg)) {\n                updateMarker();\n            }\n            graphOptions.current = config;\n        }\n    }, [config]);\n    useEffect(function () {\n        if (graph && !graph.destroyed) {\n            var graphSize = getGraphSize(width, height, container);\n            graph.changeSize(graphSize[0], graphSize[1]);\n        }\n    }, [container, width, height]);\n    useEffect(function () {\n        if (graph && !graph.destroyed) {\n            var defaultMode = graph.get('modes').default;\n            var removingBehaviors_1 = [];\n            defaultMode.forEach(function (be) {\n                if (isObject(be)) {\n                    removingBehaviors_1.push(be.type);\n                }\n                else if (isString(be)) {\n                    removingBehaviors_1.push(be);\n                }\n            });\n            graph.removeBehaviors(removingBehaviors_1, 'default');\n            graph.addBehaviors(behaviors, 'default');\n        }\n    }, [behaviors]);\n    useEffect(function () {\n        if (container.current && graphClass) {\n            var _a = extra.name, name_1 = _a === void 0 ? '' : _a;\n            var graphSize = getGraphSize(width, height, container);\n            var plugins = [];\n            var nodeCfg_1 = config.nodeCfg, edgeCfg_1 = config.edgeCfg, behaviors_1 = config.behaviors, layout_1 = config.layout, animate = config.animate, autoFit = config.autoFit, fitCenter_1 = config.fitCenter, onReady = config.onReady, tooltipCfg = config.tooltipCfg, customLayout_1 = config.customLayout, menuCfg = config.menuCfg, fetchLoading = config.fetchLoading;\n            var _b = nodeCfg_1 !== null && nodeCfg_1 !== void 0 ? nodeCfg_1 : {}, nodeType_1 = _b.type, nodeAnchorPoints_1 = _b.anchorPoints, nodeStateStyles = _b.nodeStateStyles, nodeStyle_1 = _b.style, nodeLabelCfg_1 = _b.title, linkCenter = _b.linkCenter, getChildren = _b.getChildren, asyncData = _b.asyncData;\n            var _c = edgeCfg_1 !== null && edgeCfg_1 !== void 0 ? edgeCfg_1 : {}, edgeType = _c.type, edgeStyle_1 = _c.style, startArrowCfg_1 = _c.startArrow, endArrowCfg_1 = _c.endArrow, labelCfg_1 = _c.label, edgeStateStyles = _c.edgeStateStyles;\n            // tooltip\n            if (tooltipCfg && isFunction(tooltipCfg.customContent)) {\n                var customContent_1 = tooltipCfg.customContent, rest = __rest(tooltipCfg, [\"customContent\"]);\n                var tooltipPlugin = new G6.Tooltip(__assign(__assign({ offsetX: 10, offsetY: 20, itemTypes: ['node'] }, rest), { getContent: function (e) {\n                        return createNode(customContent_1(e.item.getModel()), 'g6-tooltip');\n                    } }));\n                plugins.push(tooltipPlugin);\n            }\n            // menu\n            if (menuCfg && isFunction(menuCfg.customContent)) {\n                var menuPlugin = new Menu(__assign({ offsetX: 16 + 10, offsetY: 0, itemTypes: ['node'] }, menuCfg));\n                plugins.push(menuPlugin);\n            }\n            graphRef.current = new G6[graphClass]({\n                container: container.current,\n                width: graphSize[0],\n                height: graphSize[1],\n                animate: animate,\n                linkCenter: linkCenter,\n                modes: {\n                    default: behaviors_1,\n                },\n                defaultNode: __assign(__assign({}, nodeCfg_1), { nodeCfg: nodeCfg_1 }),\n                defaultEdge: __assign(__assign({}, omit(edgeCfg_1, ['label'])), { edgeCfg: edgeCfg_1, labelCfg: labelCfg_1 === null || labelCfg_1 === void 0 ? void 0 : labelCfg_1.style }),\n                nodeStateStyles: nodeStateStyles,\n                edgeStateStyles: getEdgeStateStyles(edgeStateStyles),\n                layout: customLayout_1 ? undefined : layout_1,\n                fitView: autoFit,\n                fitCenter: fitCenter_1,\n                plugins: plugins,\n            });\n            var graphId_1 = getGraphId(graphRef.current, name_1);\n            var graph_1 = graphRef.current;\n            graph_1.set('id', graphId_1);\n            setGlobalInstance(graphId_1, graph_1);\n            var getLabel_1 = function (value) {\n                // 辐射树图\n                if (isString(value)) {\n                    return value;\n                }\n                if (name_1 === 'FundFlowGraph') {\n                    return value === null || value === void 0 ? void 0 : value.text;\n                }\n                return value === null || value === void 0 ? void 0 : value.title;\n            };\n            var customNode_1 = ['fund-card', 'indicator-card'];\n            // defaultNode 默认只能绑定 plainObject，针对 Function 类型需要通过该模式绑定\n            graph_1.node(function (node) {\n                if (customNode_1.includes(nodeType_1) || name_1 === 'OrganizationGraph') {\n                    var anchorPoints = getAnchorPoints(nodeAnchorPoints_1, node);\n                    node.markerCfg = markerCfg;\n                    return {\n                        anchorPoints: anchorPoints,\n                        _graphId: graphId_1,\n                    };\n                }\n                var style = (nodeLabelCfg_1 !== null && nodeLabelCfg_1 !== void 0 ? nodeLabelCfg_1 : {}).style;\n                return {\n                    _graphId: graphId_1,\n                    label: getLabel_1(node.value),\n                    labelCfg: {\n                        style: getCommonCfg(style, node, graph_1),\n                    },\n                    style: __assign({ stroke: '#ccc' }, (typeof nodeStyle_1 === 'function' ? nodeStyle_1(node, graph_1) : nodeStyle_1)),\n                };\n            });\n            var getEdgeLabel_1 = function (edge) {\n                var content = (labelCfg_1 !== null && labelCfg_1 !== void 0 ? labelCfg_1 : {}).content;\n                if (['DecompositionTreeGraph', 'OrganizationGraph', 'RadialTreeGraph'].includes(name_1)) {\n                    return getCommonCfg(content, edge, graph_1);\n                }\n                if (['FundFlowGraph', 'FlowAnalysisGraph'].includes(name_1)) {\n                    var value = edge.value;\n                    // @ts-ignore\n                    return typeof value === 'object' ? value === null || value === void 0 ? void 0 : value.text : value;\n                }\n                return edge.value;\n            };\n            if (!['fund-line', 'labels-line'].includes(edgeType)) {\n                graph_1.edge(function (edge) {\n                    var startArrow = getArrowCfg(startArrowCfg_1, edge);\n                    var endArrow = getArrowCfg(endArrowCfg_1, edge);\n                    var style = (labelCfg_1 !== null && labelCfg_1 !== void 0 ? labelCfg_1 : {}).style;\n                    return {\n                        label: getEdgeLabel_1(edge),\n                        labelCfg: {\n                            style: getCommonCfg(style, edge, graph_1),\n                        },\n                        style: __assign({ stroke: '#ccc', startArrow: startArrow, endArrow: endArrow }, (typeof edgeStyle_1 === 'function' ? edgeStyle_1(edge, graph_1) : edgeStyle_1)),\n                    };\n                });\n            }\n            processMinimap(minimapCfg, graph_1);\n            bindStateEvents(graph_1, config);\n            if (markerCfg) {\n                var sourceGraph = ['FlowAnalysisGraph', 'FundFlowGraph'];\n                sourceGraph.includes(name_1)\n                    ? bindSourceMapCollapseEvents(graph_1, asyncData, fetchLoading)\n                    : bindDefaultEvents(graph_1, level, getChildren, fetchLoading);\n            }\n            if (name_1 === 'RadialGraph') {\n                var centerNode = getCenterNode(data);\n                graph_1.set('centerNode', centerNode);\n                bindRadialExplore(graph_1, asyncData, layout_1, fetchLoading);\n            }\n            renderGraph(graph_1, data, level);\n            if (fitCenter_1) {\n                graph_1.fitCenter();\n            }\n            if (onReady) {\n                onReady(graph_1);\n            }\n            graphData.current = deepClone(data);\n        }\n    }, []);\n    useEffect(function () {\n        if (graphRef.current && toolbarCfg) {\n            createToolbar({ graph: graphRef.current, container: container.current, toolbarCfg: toolbarCfg });\n        }\n    }, [graphRef, toolbarCfg]);\n    useEffect(function () {\n        return function () {\n            if ((graph === null || graph === void 0 ? void 0 : graph.current) && !graph.current.destroyed) {\n                graph.current.destroy();\n            }\n        };\n    }, []);\n    return {\n        container: container,\n    };\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}