{"ast":null,"code":"import _regeneratorRuntime from\"/home/iam/Documents/LocalWeb-master/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/iam/Documents/LocalWeb-master/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/iam/Documents/LocalWeb-master/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{Button,Col,Space,Modal,Card}from'antd';import{PortForwardEdit}from'components/antd/security/port-forward/edit';import{PortForwardTable}from'components/antd/security/port-forward/table';import React from'react';import ubusApi from'service/api/ubus-api';import{useTranslation}from\"react-i18next\";import\"../../../translations/i18n\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Page=function Page(){var _React$useState=React.useState(null),_React$useState2=_slicedToArray(_React$useState,2),item=_React$useState2[0],setItem=_React$useState2[1];var _React$useState3=React.useState(false),_React$useState4=_slicedToArray(_React$useState3,2),showModal=_React$useState4[0],setShowModal=_React$useState4[1];var _React$useState5=React.useState(),_React$useState6=_slicedToArray(_React$useState5,2),tableData=_React$useState6[0],settableData=_React$useState6[1];var _React$useState7=React.useState(),_React$useState8=_slicedToArray(_React$useState7,2),data=_React$useState8[0],setData=_React$useState8[1];var _useTranslation=useTranslation(),t=_useTranslation.t;var refreshData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var dataF;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return ubusApi.show_network_nat();case 2:dataF=_context.sent;settableData(dataF.nat_data);case 4:case\"end\":return _context.stop();}}},_callee);}));return function refreshData(){return _ref.apply(this,arguments);};}();React.useEffect(function(){refreshData();},[]);var onEditItem=function onEditItem(group){if(group.name){setItem(Object.assign({},group));setShowModal(true);}else{setItem(Object.assign({},group));setShowModal(true);}};var onCreateItem=function onCreateItem(group){setItem({});setShowModal(true);};var onModalCancel=function onModalCancel(){setShowModal(false);setItem(null);};var onModalOk=function onModalOk(){setShowModal(false);};var onDone=function onDone(){setShowModal(false);setItem(null);};var showModalContent=function showModalContent(){if(!showModal){return null;}return/*#__PURE__*/_jsx(Modal,{width:700,open:true,onCancel:onModalCancel,onOk:onModalOk,footer:null,children:/*#__PURE__*/_jsx(Col,{span:23,children:/*#__PURE__*/_jsx(Card,{title:t(\"port_forward_configuration\"),type:\"inner\",headStyle:{background:\"linear-gradient(109.6deg, rgb(44, 83, 131), rgb(44, 83, 131) 18.9%, rgb(68, 124, 143), rgb(44, 83, 131) 91.1%, rgb(44, 83, 131))\",color:'white'},children:/*#__PURE__*/_jsx(PortForwardEdit,{item:item,onDone:onDone})})})});};return/*#__PURE__*/_jsx(Card,{title:t(\"port_forward_list\"),headStyle:{background:\"linear-gradient(109.6deg, rgb(44, 83, 131), rgb(44, 83, 131) 18.9%, rgb(68, 124, 143), rgb(44, 83, 131) 91.1%, rgb(44, 83, 131))\",color:'white'},children:/*#__PURE__*/_jsxs(Space,{direction:\"vertical\",size:\"middle\",style:{display:'flex'},children:[/*#__PURE__*/_jsx(\"div\",{style:{overflowX:'auto'},children:/*#__PURE__*/_jsx(PortForwardTable,{tableData:tableData,onEditItem:onEditItem})}),showModalContent(),/*#__PURE__*/_jsx(Button,{type:\"primary\",onClick:onCreateItem,children:t(\"create\")})]})});};export default Page;","map":{"version":3,"names":["Button","Col","Space","Modal","Card","PortForwardEdit","PortForwardTable","React","ubusApi","useTranslation","Page","useState","item","setItem","showModal","setShowModal","tableData","settableData","data","setData","t","refreshData","show_network_nat","dataF","nat_data","useEffect","onEditItem","group","name","Object","assign","onCreateItem","onModalCancel","onModalOk","onDone","showModalContent","background","color","display","overflowX"],"sources":["/home/iam/Documents/LocalWeb-master/src/pages/security/port-forward/index.tsx"],"sourcesContent":["import { Button, Col, Row, Space, Table, Typography, Modal, Input, Select, message, Form, Card } from 'antd'\nimport AntdLayout from 'components/antd/layout';\nimport { VlanTable, VlanTable1 } from 'components/antd/network/vlan/table';\nimport { PortForwardEdit } from 'components/antd/security/port-forward/edit';\nimport { PortForwardTable } from 'components/antd/security/port-forward/table';\nimport React, { useState, useRef } from 'react';\nimport ubusApi from 'service/api/ubus-api';\nimport { useTranslation } from \"react-i18next\";\nimport \"../../../translations/i18n\";\n\nconst Page = () => {\n    const [item, setItem] = React.useState(null)\n    const [showModal, setShowModal] = React.useState(false)\n    const [tableData, settableData] = React.useState()\n    const [data, setData] = React.useState()\n    const { t } = useTranslation();\n\n    const refreshData = async () => {\n        const dataF = await ubusApi.show_network_nat()\n        settableData(dataF.nat_data)\n    }\n    React.useEffect(() => {\n        refreshData()\n    }, [])\n\n    const onEditItem = (group: any) => {\n        if (group.name) {\n            setItem(Object.assign({}, group))\n            setShowModal(true)\n        } else {\n            setItem(Object.assign({}, group))\n            setShowModal(true)\n        }\n    }\n    const onCreateItem = (group: any) => {\n        setItem({} as any)\n        setShowModal(true)\n    }\n    const onModalCancel = () => {\n        setShowModal(false)\n        setItem(null)\n    }\n    const onModalOk = () => {\n        setShowModal(false)\n    }\n    const onDone = () => {\n        setShowModal(false)\n        setItem(null)\n    }\n\n    const showModalContent = () => {\n        if (!showModal) {\n            return null\n        }\n        return (\n            <Modal width={700} open={true} onCancel={onModalCancel} onOk={onModalOk} footer={null}>\n                <Col span={23}>\n                    <Card title={t(\"port_forward_configuration\")} type=\"inner\" headStyle={{background:\"linear-gradient(109.6deg, rgb(44, 83, 131), rgb(44, 83, 131) 18.9%, rgb(68, 124, 143), rgb(44, 83, 131) 91.1%, rgb(44, 83, 131))\",color: 'white'}}>\n                        <PortForwardEdit item={item}\n                            onDone={onDone} />\n                    </Card>\n                </Col>\n            </Modal>\n        )\n    }\n    return (\n        <Card title={t(\"port_forward_list\")} headStyle={{background:\"linear-gradient(109.6deg, rgb(44, 83, 131), rgb(44, 83, 131) 18.9%, rgb(68, 124, 143), rgb(44, 83, 131) 91.1%, rgb(44, 83, 131))\",color: 'white'}}>\n            <Space\n                direction=\"vertical\"\n                size=\"middle\"\n                style={{\n                    display: 'flex',\n                }}\n            >\n                <div style={{ overflowX: 'auto' }}>\n                <PortForwardTable\n                    tableData={tableData}\n                    onEditItem={onEditItem}\n                />\n                </div>\n                {showModalContent()}\n                <Button type=\"primary\" onClick={onCreateItem} >\n                    {t(\"create\")}\n                </Button>\n            </Space>\n        </Card>\n    )\n}\nexport default Page\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}