{"ast":null,"code":"import { __assign } from \"tslib\";\nimport { isArray, isNil } from '@antv/util';\nimport { registerShape } from '../base';\nimport { getStyle } from '../util/get-style';\nfunction parseValue(value) {\n  var array = !isArray(value) ? [value] : value;\n  var min = array[0]; // 最小值\n  var max = array[array.length - 1]; // 最大值\n  var min1 = array.length > 1 ? array[1] : min;\n  var max1 = array.length > 3 ? array[3] : max;\n  var median = array.length > 2 ? array[2] : min1;\n  return {\n    min: min,\n    max: max,\n    min1: min1,\n    max1: max1,\n    median: median\n  };\n}\nfunction getBoxPoints(x, y, size) {\n  var halfSize = size / 2;\n  var pointsArray;\n  if (isArray(y)) {\n    // 2维\n    var _a = parseValue(y),\n      min = _a.min,\n      max = _a.max,\n      median = _a.median,\n      min1 = _a.min1,\n      max1 = _a.max1;\n    var minX = x - halfSize;\n    var maxX = x + halfSize;\n    pointsArray = [[minX, max], [maxX, max], [x, max], [x, max1], [minX, min1], [minX, max1], [maxX, max1], [maxX, min1], [x, min1], [x, min], [minX, min], [maxX, min], [minX, median], [maxX, median]];\n  } else {\n    // 只有一个维度\n    y = isNil(y) ? 0.5 : y;\n    var _b = parseValue(x),\n      min = _b.min,\n      max = _b.max,\n      median = _b.median,\n      min1 = _b.min1,\n      max1 = _b.max1;\n    var minY = y - halfSize;\n    var maxY = y + halfSize;\n    pointsArray = [[min, minY], [min, maxY], [min, y], [min1, y], [min1, minY], [min1, maxY], [max1, maxY], [max1, minY], [max1, y], [max, y], [max, minY], [max, maxY], [median, minY], [median, maxY]];\n  }\n  return pointsArray.map(function (arr) {\n    return {\n      x: arr[0],\n      y: arr[1]\n    };\n  });\n}\nfunction getBoxPath(points) {\n  return [['M', points[0].x, points[0].y], ['L', points[1].x, points[1].y], ['M', points[2].x, points[2].y], ['L', points[3].x, points[3].y], ['M', points[4].x, points[4].y], ['L', points[5].x, points[5].y], ['L', points[6].x, points[6].y], ['L', points[7].x, points[7].y], ['L', points[4].x, points[4].y], ['Z'], ['M', points[8].x, points[8].y], ['L', points[9].x, points[9].y], ['M', points[10].x, points[10].y], ['L', points[11].x, points[11].y], ['M', points[12].x, points[12].y], ['L', points[13].x, points[13].y]];\n}\n// box shape\nregisterShape('schema', 'box', {\n  getPoints: function (shapePoint) {\n    var x = shapePoint.x,\n      y = shapePoint.y,\n      size = shapePoint.size;\n    return getBoxPoints(x, y, size);\n  },\n  draw: function (cfg, container) {\n    var style = getStyle(cfg, true, false);\n    var path = this.parsePath(getBoxPath(cfg.points));\n    var shape = container.addShape('path', {\n      attrs: __assign(__assign({}, style), {\n        path: path,\n        name: 'schema'\n      })\n    });\n    return shape;\n  },\n  getMarker: function (markerCfg) {\n    var color = markerCfg.color;\n    return {\n      symbol: function (x, y, r) {\n        var yValues = [y - 6, y - 3, y, y + 3, y + 6];\n        var points = getBoxPoints(x, yValues, r);\n        return [['M', points[0].x + 1, points[0].y], ['L', points[1].x - 1, points[1].y], ['M', points[2].x, points[2].y], ['L', points[3].x, points[3].y], ['M', points[4].x, points[4].y], ['L', points[5].x, points[5].y], ['L', points[6].x, points[6].y], ['L', points[7].x, points[7].y], ['L', points[4].x, points[4].y], ['Z'], ['M', points[8].x, points[8].y], ['L', points[9].x, points[9].y], ['M', points[10].x + 1, points[10].y], ['L', points[11].x - 1, points[11].y], ['M', points[12].x, points[12].y], ['L', points[13].x, points[13].y]];\n      },\n      style: {\n        r: 6,\n        lineWidth: 1,\n        stroke: color\n      }\n    };\n  }\n});","map":{"version":3,"mappings":"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","names":["isArray","isNil","registerShape","getStyle","parseValue","value","array","min","max","length","min1","max1","median","getBoxPoints","x","y","size","halfSize","pointsArray","minX","maxX","minY","maxY","map","arr","getBoxPath","points","getPoints","shapePoint","draw","cfg","container","style","path","parsePath","shape","addShape","attrs","name","getMarker","markerCfg","symbol","r","yValues","lineWidth","stroke","color"],"sources":["/home/iam/Documents/network/node_modules/@antv/g2/src/geometry/shape/schema/box.ts"],"sourcesContent":["import { isArray, isNil } from '@antv/util';\nimport { IGroup, PathCommand } from '../../../dependents';\nimport { Point, ShapeInfo, ShapeMarkerCfg, ShapePoint } from '../../../interface';\n\nimport { registerShape } from '../base';\nimport { getStyle } from '../util/get-style';\n\nfunction parseValue(value: number[]) {\n  const array = !isArray(value) ? [value] : value;\n\n  const min = array[0]; // 最小值\n  const max = array[array.length - 1]; // 最大值\n  const min1 = array.length > 1 ? array[1] : min;\n  const max1 = array.length > 3 ? array[3] : max;\n  const median = array.length > 2 ? array[2] : min1;\n\n  return {\n    min, // 最小值\n    max, // 最大值\n    min1,\n    max1,\n    median,\n  };\n}\n\nfunction getBoxPoints(x: number | number[], y: number | number[], size: number): Point[] {\n  const halfSize = size / 2;\n  let pointsArray;\n  if (isArray(y)) {\n    // 2维\n    const { min, max, median, min1, max1 } = parseValue(y);\n    const minX = (x as number) - halfSize;\n    const maxX = (x as number) + halfSize;\n    pointsArray = [\n      [minX, max],\n      [maxX, max],\n      [x as number, max],\n      [x as number, max1],\n      [minX, min1],\n      [minX, max1],\n      [maxX, max1],\n      [maxX, min1],\n      [x as number, min1],\n      [x as number, min],\n      [minX, min],\n      [maxX, min],\n      [minX, median],\n      [maxX, median],\n    ];\n  } else {\n    // 只有一个维度\n    y = isNil(y) ? 0.5 : y;\n    const { min, max, median, min1, max1 } = parseValue(x as number[]);\n    const minY = y - halfSize;\n    const maxY = y + halfSize;\n    pointsArray = [\n      [min, minY],\n      [min, maxY],\n      [min, y],\n      [min1, y],\n      [min1, minY],\n      [min1, maxY],\n      [max1, maxY],\n      [max1, minY],\n      [max1, y],\n      [max, y],\n      [max, minY],\n      [max, maxY],\n      [median, minY],\n      [median, maxY],\n    ];\n  }\n\n  return pointsArray.map((arr) => {\n    return {\n      x: arr[0],\n      y: arr[1],\n    };\n  });\n}\n\nfunction getBoxPath(points): PathCommand[] {\n  return [\n    ['M', points[0].x, points[0].y],\n    ['L', points[1].x, points[1].y],\n    ['M', points[2].x, points[2].y],\n    ['L', points[3].x, points[3].y],\n    ['M', points[4].x, points[4].y],\n    ['L', points[5].x, points[5].y],\n    ['L', points[6].x, points[6].y],\n    ['L', points[7].x, points[7].y],\n    ['L', points[4].x, points[4].y], // 封闭 z\n    ['Z'],\n    ['M', points[8].x, points[8].y],\n    ['L', points[9].x, points[9].y],\n    ['M', points[10].x, points[10].y],\n    ['L', points[11].x, points[11].y],\n    ['M', points[12].x, points[12].y],\n    ['L', points[13].x, points[13].y],\n  ];\n}\n\n// box shape\nregisterShape('schema', 'box', {\n  getPoints(shapePoint: ShapePoint) {\n    const { x, y, size } = shapePoint;\n    return getBoxPoints(x as number, y as number[], size);\n  },\n  draw(cfg: ShapeInfo, container: IGroup) {\n    const style = getStyle(cfg, true, false);\n    const path = this.parsePath(getBoxPath(cfg.points));\n    const shape = container.addShape('path', {\n      attrs: {\n        ...style,\n        path,\n        name: 'schema',\n      },\n    });\n\n    return shape;\n  },\n  getMarker(markerCfg: ShapeMarkerCfg) {\n    const { color } = markerCfg;\n    return {\n      symbol(x: number, y: number, r: number) {\n        const yValues = [y - 6, y - 3, y, y + 3, y + 6];\n        const points = getBoxPoints(x, yValues, r);\n        return [\n          ['M', points[0].x + 1, points[0].y],\n          ['L', points[1].x - 1, points[1].y],\n          ['M', points[2].x, points[2].y],\n          ['L', points[3].x, points[3].y],\n          ['M', points[4].x, points[4].y],\n          ['L', points[5].x, points[5].y],\n          ['L', points[6].x, points[6].y],\n          ['L', points[7].x, points[7].y],\n          ['L', points[4].x, points[4].y],\n          ['Z'],\n          ['M', points[8].x, points[8].y],\n          ['L', points[9].x, points[9].y],\n          ['M', points[10].x + 1, points[10].y],\n          ['L', points[11].x - 1, points[11].y],\n          ['M', points[12].x, points[12].y],\n          ['L', points[13].x, points[13].y],\n        ];\n      },\n      style: {\n        r: 6,\n        lineWidth: 1,\n        stroke: color,\n      },\n    };\n  },\n});\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}