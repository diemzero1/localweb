{"ast":null,"code":"import React, { useEffect, useRef, Fragment } from 'react';\nimport useFullscreen from '../../hooks/useFullscreen';\nimport { setStyles, render } from '../../utils';\nvar Toolbar = function (_a) {\n  var toolbarCfg = _a.toolbarCfg,\n    container = _a.container,\n    graph = _a.graph;\n  var useGraph = useRef();\n  var width = useRef();\n  var height = useRef();\n  var zoom = useRef(1);\n  var _b = toolbarCfg.zoomFactor,\n    zoomFactor = _b === void 0 ? 0.25 : _b,\n    renderIcon = toolbarCfg.renderIcon,\n    customContent = toolbarCfg.customContent;\n  var _c = useFullscreen(container),\n    fullscreen = _c[0],\n    toggleFullscreen = _c[1];\n  // 获取当全屏时的窗口大小\n  var getWindow = function () {\n    return [window.outerWidth, window.outerHeight];\n  };\n  // 切换全屏时保存 graph 尺寸\n  var toggleWidth = function (f) {\n    var _a;\n    var size = f ? getWindow() : [width.current, height.current];\n    (_a = useGraph.current) === null || _a === void 0 ? void 0 : _a.changeSize(size[0], size[1]);\n  };\n  // 获取缩放中心\n  var getCenter = function () {\n    if (!container) {\n      return {\n        x: 0,\n        y: 0\n      };\n    }\n    return {\n      x: container.clientWidth / 2,\n      y: container.clientHeight / 2\n    };\n  };\n  // in 放大\n  var zoomIn = function () {\n    var _a;\n    (_a = useGraph.current) === null || _a === void 0 ? void 0 : _a.zoom(Math.min(zoom.current + zoomFactor, 5), getCenter());\n  };\n  // out 缩小\n  var zoomOut = function () {\n    var _a;\n    (_a = useGraph.current) === null || _a === void 0 ? void 0 : _a.zoom(Math.max(zoom.current - zoomFactor, 0.25), getCenter());\n  };\n  useEffect(function () {\n    if (graph) {\n      useGraph.current = graph;\n      width.current = container === null || container === void 0 ? void 0 : container.clientWidth;\n      height.current = container === null || container === void 0 ? void 0 : container.clientHeight;\n    }\n  }, [graph]);\n  var setToggleFullscreen = function () {\n    toggleFullscreen();\n    toggleWidth(!document.fullscreenElement);\n  };\n  var customRender = customContent || renderIcon;\n  if (customRender) {\n    return customRender({\n      zoomIn: zoomIn,\n      zoomOut: zoomOut,\n      toggleFullscreen: setToggleFullscreen,\n      fullscreen: fullscreen,\n      graph: graph\n    });\n  }\n  return React.createElement(Fragment, null, !fullscreen ? React.createElement(\"span\", {\n    style: {\n      cursor: 'pointer'\n    },\n    onClick: setToggleFullscreen\n  }, \"\\u2610\") : React.createElement(\"span\", {\n    style: {\n      cursor: 'pointer'\n    },\n    onClick: setToggleFullscreen\n  }, \"\\u2684\"), React.createElement(\"span\", {\n    style: {\n      cursor: 'pointer'\n    },\n    onClick: zoomIn\n  }, \"+\"), React.createElement(\"span\", {\n    style: {\n      cursor: 'pointer'\n    },\n    onClick: zoomOut\n  }, \"-\"));\n};\nexport var createToolbar = function (_a) {\n  var _b;\n  var graph = _a.graph,\n    container = _a.container,\n    toolbarCfg = _a.toolbarCfg;\n  var style = toolbarCfg.style,\n    show = toolbarCfg.show,\n    className = toolbarCfg.className;\n  var toolbarId = \"\".concat(graph.get('id'), \"-toolbar\");\n  var exist = document.querySelector(\"#\".concat(toolbarId));\n  if (exist) {\n    (_b = exist.parentNode) === null || _b === void 0 ? void 0 : _b.removeChild(exist);\n  }\n  if (!show) {\n    return;\n  }\n  var defaultStyle = {\n    position: 'absolute',\n    right: '12px',\n    top: '12px',\n    display: 'flex',\n    flexDirection: 'column',\n    padding: '6px',\n    borderRadius: '2px',\n    fontSize: '24px',\n    textAlign: 'center',\n    lineHeight: '24px',\n    color: 'rgba(0,0,0,.65)',\n    backgroundColor: '#fff',\n    boxShadow: '0 0 3px #ccc'\n  };\n  var mountPoint = document.createElement('div');\n  mountPoint.id = toolbarId;\n  mountPoint.className = className !== null && className !== void 0 ? className : 'charts-toolbar';\n  setStyles(mountPoint, defaultStyle);\n  setStyles(mountPoint, style);\n  render(React.createElement(Toolbar, {\n    graph: graph,\n    container: container,\n    toolbarCfg: toolbarCfg\n  }), mountPoint);\n  // @ts-ignore\n  container.appendChild(mountPoint);\n};","map":{"version":3,"names":["React","useEffect","useRef","Fragment","useFullscreen","setStyles","render","Toolbar","_a","toolbarCfg","container","graph","useGraph","width","height","zoom","_b","zoomFactor","renderIcon","customContent","_c","fullscreen","toggleFullscreen","getWindow","window","outerWidth","outerHeight","toggleWidth","f","size","current","changeSize","getCenter","x","y","clientWidth","clientHeight","zoomIn","Math","min","zoomOut","max","setToggleFullscreen","document","fullscreenElement","customRender","createElement","style","cursor","onClick","createToolbar","show","className","toolbarId","concat","get","exist","querySelector","parentNode","removeChild","defaultStyle","position","right","top","display","flexDirection","padding","borderRadius","fontSize","textAlign","lineHeight","color","backgroundColor","boxShadow","mountPoint","id","appendChild"],"sources":["/home/iam/Documents/LocalWeb-master/node_modules/@ant-design/graphs/es/plugins/toolbar/index.js"],"sourcesContent":["import React, { useEffect, useRef, Fragment } from 'react';\nimport useFullscreen from '../../hooks/useFullscreen';\nimport { setStyles, render } from '../../utils';\nvar Toolbar = function (_a) {\n    var toolbarCfg = _a.toolbarCfg, container = _a.container, graph = _a.graph;\n    var useGraph = useRef();\n    var width = useRef();\n    var height = useRef();\n    var zoom = useRef(1);\n    var _b = toolbarCfg.zoomFactor, zoomFactor = _b === void 0 ? 0.25 : _b, renderIcon = toolbarCfg.renderIcon, customContent = toolbarCfg.customContent;\n    var _c = useFullscreen(container), fullscreen = _c[0], toggleFullscreen = _c[1];\n    // 获取当全屏时的窗口大小\n    var getWindow = function () {\n        return [window.outerWidth, window.outerHeight];\n    };\n    // 切换全屏时保存 graph 尺寸\n    var toggleWidth = function (f) {\n        var _a;\n        var size = f ? getWindow() : [width.current, height.current];\n        (_a = useGraph.current) === null || _a === void 0 ? void 0 : _a.changeSize(size[0], size[1]);\n    };\n    // 获取缩放中心\n    var getCenter = function () {\n        if (!container) {\n            return {\n                x: 0,\n                y: 0,\n            };\n        }\n        return {\n            x: container.clientWidth / 2,\n            y: container.clientHeight / 2,\n        };\n    };\n    // in 放大\n    var zoomIn = function () {\n        var _a;\n        (_a = useGraph.current) === null || _a === void 0 ? void 0 : _a.zoom(Math.min(zoom.current + zoomFactor, 5), getCenter());\n    };\n    // out 缩小\n    var zoomOut = function () {\n        var _a;\n        (_a = useGraph.current) === null || _a === void 0 ? void 0 : _a.zoom(Math.max(zoom.current - zoomFactor, 0.25), getCenter());\n    };\n    useEffect(function () {\n        if (graph) {\n            useGraph.current = graph;\n            width.current = container === null || container === void 0 ? void 0 : container.clientWidth;\n            height.current = container === null || container === void 0 ? void 0 : container.clientHeight;\n        }\n    }, [graph]);\n    var setToggleFullscreen = function () {\n        toggleFullscreen();\n        toggleWidth(!document.fullscreenElement);\n    };\n    var customRender = customContent || renderIcon;\n    if (customRender) {\n        return customRender({\n            zoomIn: zoomIn,\n            zoomOut: zoomOut,\n            toggleFullscreen: setToggleFullscreen,\n            fullscreen: fullscreen,\n            graph: graph,\n        });\n    }\n    return (React.createElement(Fragment, null,\n        !fullscreen ? (React.createElement(\"span\", { style: {\n                cursor: 'pointer',\n            }, onClick: setToggleFullscreen }, \"\\u2610\")) : (React.createElement(\"span\", { style: {\n                cursor: 'pointer',\n            }, onClick: setToggleFullscreen }, \"\\u2684\")),\n        React.createElement(\"span\", { style: {\n                cursor: 'pointer',\n            }, onClick: zoomIn }, \"+\"),\n        React.createElement(\"span\", { style: {\n                cursor: 'pointer',\n            }, onClick: zoomOut }, \"-\")));\n};\nexport var createToolbar = function (_a) {\n    var _b;\n    var graph = _a.graph, container = _a.container, toolbarCfg = _a.toolbarCfg;\n    var style = toolbarCfg.style, show = toolbarCfg.show, className = toolbarCfg.className;\n    var toolbarId = \"\".concat(graph.get('id'), \"-toolbar\");\n    var exist = document.querySelector(\"#\".concat(toolbarId));\n    if (exist) {\n        (_b = exist.parentNode) === null || _b === void 0 ? void 0 : _b.removeChild(exist);\n    }\n    if (!show) {\n        return;\n    }\n    var defaultStyle = {\n        position: 'absolute',\n        right: '12px',\n        top: '12px',\n        display: 'flex',\n        flexDirection: 'column',\n        padding: '6px',\n        borderRadius: '2px',\n        fontSize: '24px',\n        textAlign: 'center',\n        lineHeight: '24px',\n        color: 'rgba(0,0,0,.65)',\n        backgroundColor: '#fff',\n        boxShadow: '0 0 3px #ccc',\n    };\n    var mountPoint = document.createElement('div');\n    mountPoint.id = toolbarId;\n    mountPoint.className = className !== null && className !== void 0 ? className : 'charts-toolbar';\n    setStyles(mountPoint, defaultStyle);\n    setStyles(mountPoint, style);\n    render(React.createElement(Toolbar, { graph: graph, container: container, toolbarCfg: toolbarCfg }), mountPoint);\n    // @ts-ignore\n    container.appendChild(mountPoint);\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}