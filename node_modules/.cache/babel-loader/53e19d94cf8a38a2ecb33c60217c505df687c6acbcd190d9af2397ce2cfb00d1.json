{"ast":null,"code":"import { registerAction, registerInteraction } from '@antv/g2';\nimport { get, isArray } from '@antv/util';\nimport { DrillDownAction } from './actions/drill-down';\n/**\n * 判断是否为父节点\n */\nexport function isParentNode(context) {\n  var data = get(context, ['event', 'data', 'data'], {});\n  return isArray(data.children) && data.children.length > 0;\n}\n/**\n * 判断是否在中心\n */\nfunction inCenter(context) {\n  var coordinate = context.view.getCoordinate();\n  var innerRadius = coordinate.innerRadius;\n  if (innerRadius) {\n    var _a = context.event,\n      x = _a.x,\n      y = _a.y;\n    var _b = coordinate.center,\n      centerX = _b.x,\n      centerY = _b.y;\n    var r = coordinate.getRadius() * innerRadius;\n    var distance = Math.sqrt(Math.pow(centerX - x, 2) + Math.pow(centerY - y, 2));\n    return distance < r;\n  }\n  return false;\n}\nregisterAction('drill-down-action', DrillDownAction);\nregisterInteraction('drill-down', {\n  showEnable: [{\n    trigger: 'element:mouseenter',\n    action: 'cursor:pointer',\n    isEnable: isParentNode\n  }, {\n    trigger: 'element:mouseleave',\n    action: 'cursor:default'\n  },\n  // 中心处，肯定会触发 element:mouseleave 操作\n  {\n    trigger: 'element:mouseleave',\n    action: 'cursor:pointer',\n    isEnable: inCenter\n  }],\n  start: [{\n    trigger: 'element:click',\n    isEnable: isParentNode,\n    action: ['drill-down-action:click']\n  }, {\n    trigger: 'afterchangesize',\n    action: ['drill-down-action:resetPosition']\n  }, {\n    // 点击中心，返回上一层\n    trigger: 'click',\n    isEnable: inCenter,\n    action: ['drill-down-action:back']\n  }]\n});","map":{"version":3,"mappings":"AAAA,SAASA,cAAc,EAAEC,mBAAmB,QAAQ,UAAU;AAC9D,SAASC,GAAG,EAAEC,OAAO,QAAQ,YAAY;AACzC,SAASC,eAAe,QAAQ,sBAAsB;AAEtD;;;AAGA,OAAM,SAAUC,YAAY,CAACC,OAAO;EAClC,IAAMC,IAAI,GAAGL,GAAG,CAACI,OAAO,EAAE,CAAC,OAAO,EAAE,MAAM,EAAE,MAAM,CAAC,EAAE,EAAE,CAAC;EACxD,OAAOH,OAAO,CAACI,IAAI,CAACC,QAAQ,CAAC,IAAID,IAAI,CAACC,QAAQ,CAACC,MAAM,GAAG,CAAC;AAC3D;AAEA;;;AAGA,SAASC,QAAQ,CAACJ,OAAO;EACvB,IAAMK,UAAU,GAAGL,OAAO,CAACM,IAAI,CAACC,aAAa,EAAE;EACvC,eAAW,GAAKF,UAAU,YAAf;EACnB,IAAIG,WAAW,EAAE;IACT,SAAWR,OAAO,CAACS,KAAK;MAAtBC,CAAC;MAAEC,CAAC,OAAkB;IACxB,SAA6BN,UAAU,CAACO,MAAM;MAAzCC,OAAO;MAAKC,OAAO,OAAsB;IACpD,IAAMC,CAAC,GAAGV,UAAU,CAACW,SAAS,EAAE,GAAGR,WAAW;IAC9C,IAAMS,QAAQ,GAAGC,IAAI,CAACC,IAAI,CAACD,SAACL,OAAO,GAAGH,CAAC,EAAK,CAAC,IAAGQ,SAACJ,OAAO,GAAGH,CAAC,EAAK,CAAC,EAAC;IACnE,OAAOM,QAAQ,GAAGF,CAAC;;EAErB,OAAO,KAAK;AACd;AAEArB,cAAc,CAAC,mBAAmB,EAAEI,eAAe,CAAC;AACpDH,mBAAmB,CAAC,YAAY,EAAE;EAChCyB,UAAU,EAAE,CACV;IAAEC,OAAO,EAAE,oBAAoB;IAAEC,MAAM,EAAE,gBAAgB;IAAEC,QAAQ,EAAExB;EAAY,CAAE,EACnF;IAAEsB,OAAO,EAAE,oBAAoB;IAAEC,MAAM,EAAE;EAAgB,CAAE;EAC3D;EACA;IAAED,OAAO,EAAE,oBAAoB;IAAEC,MAAM,EAAE,gBAAgB;IAAEC,QAAQ,EAAEnB;EAAQ,CAAE,CAChF;EACDoB,KAAK,EAAE,CACL;IACEH,OAAO,EAAE,eAAe;IACxBE,QAAQ,EAAExB,YAAY;IACtBuB,MAAM,EAAE,CAAC,yBAAyB;GACnC,EACD;IACED,OAAO,EAAE,iBAAiB;IAC1BC,MAAM,EAAE,CAAC,iCAAiC;GAC3C,EACD;IACE;IACAD,OAAO,EAAE,OAAO;IAChBE,QAAQ,EAAEnB,QAAQ;IAClBkB,MAAM,EAAE,CAAC,wBAAwB;GAClC;CAEJ,CAAC","names":["registerAction","registerInteraction","get","isArray","DrillDownAction","isParentNode","context","data","children","length","inCenter","coordinate","view","getCoordinate","innerRadius","event","x","y","center","centerX","centerY","r","getRadius","distance","Math","sqrt","showEnable","trigger","action","isEnable","start"],"sources":["/home/iam/Documents/network/node_modules/@antv/g2plot/src/interactions/drill-down.ts"],"sourcesContent":["import { registerAction, registerInteraction } from '@antv/g2';\nimport { get, isArray } from '@antv/util';\nimport { DrillDownAction } from './actions/drill-down';\n\n/**\n * 判断是否为父节点\n */\nexport function isParentNode(context) {\n  const data = get(context, ['event', 'data', 'data'], {});\n  return isArray(data.children) && data.children.length > 0;\n}\n\n/**\n * 判断是否在中心\n */\nfunction inCenter(context) {\n  const coordinate = context.view.getCoordinate();\n  const { innerRadius } = coordinate;\n  if (innerRadius) {\n    const { x, y } = context.event;\n    const { x: centerX, y: centerY } = coordinate.center;\n    const r = coordinate.getRadius() * innerRadius;\n    const distance = Math.sqrt((centerX - x) ** 2 + (centerY - y) ** 2);\n    return distance < r;\n  }\n  return false;\n}\n\nregisterAction('drill-down-action', DrillDownAction);\nregisterInteraction('drill-down', {\n  showEnable: [\n    { trigger: 'element:mouseenter', action: 'cursor:pointer', isEnable: isParentNode },\n    { trigger: 'element:mouseleave', action: 'cursor:default' },\n    // 中心处，肯定会触发 element:mouseleave 操作\n    { trigger: 'element:mouseleave', action: 'cursor:pointer', isEnable: inCenter },\n  ],\n  start: [\n    {\n      trigger: 'element:click',\n      isEnable: isParentNode,\n      action: ['drill-down-action:click'],\n    },\n    {\n      trigger: 'afterchangesize',\n      action: ['drill-down-action:resetPosition'],\n    },\n    {\n      // 点击中心，返回上一层\n      trigger: 'click',\n      isEnable: inCenter,\n      action: ['drill-down-action:back'],\n    },\n  ],\n});\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}