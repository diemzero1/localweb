{"ast":null,"code":"import _regeneratorRuntime from\"/home/iam/Documents/LocalWeb-master/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/iam/Documents/LocalWeb-master/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/iam/Documents/LocalWeb-master/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{Card,Form,Input,Button,message,AutoComplete}from'antd';import React from'react';import ubusApi from'service/api/ubus-api';import{useTranslation}from\"react-i18next\";import\"../../../../translations/i18n\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var URLfilterEdit=function URLfilterEdit(props){var item=props.item,onDone=props.onDone;var pattern=/^[a-zA-Z0-9_.]+$/;var pattern1=/[-a-zA-Z0-9@:%._\\+~#=]{1,256}\\.[a-zA-Z0-9()]{1,6}\\b([-a-zA-Z0-9()@:%_\\+.~#?&//=]*)?/;var _Form$useForm=Form.useForm(),_Form$useForm2=_slicedToArray(_Form$useForm,1),form=_Form$useForm2[0];var _useTranslation=useTranslation(),t=_useTranslation.t;var abc=t('error_fill');var refreshData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var name,action,type,url;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(item){name=item.name,action=item.action,type=item.type,url=item.url;form.setFieldsValue({name:name,action:action,type:type,url:url});}case 1:case\"end\":return _context.stop();}}},_callee);}));return function refreshData(){return _ref.apply(this,arguments);};}();React.useEffect(function(){refreshData();},[]);var refreshPage=function refreshPage(){window.location.reload();};function randomName(length){var result='';var characters='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';var charactersLength=characters.length;for(var i=0;i<length;i++){result+=characters.charAt(Math.floor(Math.random()*charactersLength));}return result;}var onFinish=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(values){var param,key,_param,_key;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!(values.name==null)){_context2.next=10;break;}_context2.next=3;return ubusApi.config_url_filter(randomName(4),\"add\",\"block\",values.url);case 3:param=_context2.sent;key='updatable';message.loading({content:t('loading'),key:key});setTimeout(function(){message.success({content:t('success'),key:key,duration:2});},1000);setTimeout(function(){window.location.reload();},1500);_context2.next=17;break;case 10:_context2.next=12;return ubusApi.config_url_filter(values.name,\"add\",\"block\",values.url);case 12:_param=_context2.sent;_key='updatable';message.loading({content:t('loading'),key:_key});setTimeout(function(){message.success({content:t('success'),key:_key,duration:2});},1000);setTimeout(function(){window.location.reload();},1500);case 17:case\"end\":return _context2.stop();}}},_callee2);}));return function onFinish(_x){return _ref2.apply(this,arguments);};}();var _React$useState=React.useState([]),_React$useState2=_slicedToArray(_React$useState,2),autoCompleteResult=_React$useState2[0],setAutoCompleteResult=_React$useState2[1];var onWebsiteChange=function onWebsiteChange(value){if(!value){setAutoCompleteResult([]);}else{setAutoCompleteResult(['.com','.org','.net','.vn','.edu.vn','.net.vn','.org.vn','.com.vn','.info.vn','.gov.vn','.tel.vn'].map(function(domain){return\"\".concat(value).concat(domain);}));}};var websiteOptions=autoCompleteResult.map(function(website){return{label:website,value:website};});return/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(Form,{form:form,labelCol:{span:4},wrapperCol:{span:25},onFinish:onFinish,children:[/*#__PURE__*/_jsx(Form.Item,{label:t('name'),name:\"name\",hidden:true,children:/*#__PURE__*/_jsx(Input,{defaultValue:\"\"})}),/*#__PURE__*/_jsx(Form.Item,{label:\"URL\",name:\"url\",rules:[{required:true,message:String(t(\"error_fill\"))},{validator:function validator(_,value){return pattern1.test(value)?Promise.resolve():Promise.reject('fail form url');}}],children:/*#__PURE__*/_jsx(AutoComplete,{options:websiteOptions,onChange:onWebsiteChange,placeholder:\"dantri.com.vn\"})}),/*#__PURE__*/_jsx(Form.Item,{wrapperCol:{offset:4,span:25},children:/*#__PURE__*/_jsx(Button,{type:\"primary\",htmlType:\"submit\",children:t('submit')})})]})});};export default URLfilterEdit;","map":{"version":3,"names":["Card","Form","Input","Button","message","AutoComplete","React","ubusApi","useTranslation","URLfilterEdit","props","item","onDone","pattern","pattern1","useForm","form","t","abc","refreshData","name","action","type","url","setFieldsValue","useEffect","refreshPage","window","location","reload","randomName","length","result","characters","charactersLength","i","charAt","Math","floor","random","onFinish","values","config_url_filter","param","key","loading","content","setTimeout","success","duration","useState","autoCompleteResult","setAutoCompleteResult","onWebsiteChange","value","map","domain","websiteOptions","website","label","span","required","String","validator","_","test","Promise","resolve","reject","offset"],"sources":["/home/iam/Documents/LocalWeb-master/src/components/antd/security/URLfilter/URLfilterEdit.tsx"],"sourcesContent":["import { Action } from '@remix-run/router'\nimport { message as antdMessage, Card, Form, Input, Button, message, AutoComplete, Select } from 'antd'\nimport { type } from 'os'\nimport React from 'react'\nimport ubusApi from 'service/api/ubus-api'\nimport { useTranslation } from \"react-i18next\"\nimport \"../../../../translations/i18n\"\n\nexport const URLfilterEdit = (props: any) => {\n    const { item, onDone, } = props\n    let pattern = /^[a-zA-Z0-9_.]+$/\n    let pattern1 = /[-a-zA-Z0-9@:%._\\+~#=]{1,256}\\.[a-zA-Z0-9()]{1,6}\\b([-a-zA-Z0-9()@:%_\\+.~#?&//=]*)?/\n    const [form] = Form.useForm()\n    const {t} = useTranslation()\n    const abc = t('error_fill')\n    const refreshData = async () => {\n        if (item) {\n            const { name, action, type, url, } = item\n            form.setFieldsValue({\n                name, action, type, url ,  \n            })\n        }\n    }\n    React.useEffect(() => {\n        refreshData()\n    }, [])\n    const refreshPage = ()=>{\n        window.location.reload()\n    }\n    function randomName(length: number) {\n        let result = ''\n        const characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789'\n        const charactersLength = characters.length\n        for (let i = 0; i < length; i++) {\n          result += characters.charAt(Math.floor(Math.random() * charactersLength))\n        }\n        return result\n    }\n    const onFinish = async (values: any) => {\n        if(values.name == null){\n\n            const param = await ubusApi.config_url_filter( randomName(4), \"add\", \"block\", values.url, )\n            const key = 'updatable';\n            message.loading({ content: t('loading'), key });\n            setTimeout(() => {\n                message.success({ content: t('success'), key, duration: 2 });\n            }, 1000);\n            setTimeout(() => {\n                window.location.reload()\n            }, 1500);\n        }\n        else{\n\n            const param = await ubusApi.config_url_filter(values.name, \"add\", \"block\", values.url,)\n            const key = 'updatable';\n            message.loading({ content: t('loading'), key });\n            setTimeout(() => {\n                message.success({ content: t('success'), key, duration: 2 });\n            }, 1000);\n            setTimeout(() => {\n                window.location.reload()\n            }, 1500);\n        }\n    }\n    const [autoCompleteResult, setAutoCompleteResult] = React.useState<string[]>([]);\n    const onWebsiteChange = (value: string) => {\n        if (!value) {\n          setAutoCompleteResult([]);\n        } else {\n            setAutoCompleteResult(['.com', '.org', '.net', '.vn', '.edu.vn', '.net.vn', '.org.vn', '.com.vn', '.info.vn', '.gov.vn', '.tel.vn'].map((domain) => `${value}${domain}`));\n        }\n    };\n    const websiteOptions = autoCompleteResult.map((website) => ({\n        label: website,\n        value: website,\n    }));\n    return (\n        <Card>\n        <Form\n            form={form}\n            labelCol={{ span: 4 }}\n            wrapperCol={{ span: 25 }}\n            onFinish={onFinish}\n        >\n            <Form.Item label={t('name')} name=\"name\" hidden\n            >\n                <Input defaultValue=\"\"></Input> \n            </Form.Item>\n            \n            <Form.Item label=\"URL\" name=\"url\"\n             rules={[{ required: true, message: String(t(\"error_fill\")) },\n                {\n                  validator: (_, value) =>\n                    pattern1.test(value) ? Promise.resolve() : Promise.reject('fail form url')\n                }  \n                ]}\n            >\n                <AutoComplete options={websiteOptions} onChange={onWebsiteChange} placeholder=\"dantri.com.vn\"></AutoComplete>\n            </Form.Item>            \n            <Form.Item wrapperCol={{ offset: 4, span: 25 }}>\n                <Button\n                    type='primary'\n                    htmlType=\"submit\"\n                >\n                    {t('submit')}\n                </Button>\n            </Form.Item>\n        </Form>\n        </Card>\n    )\n}\nexport default URLfilterEdit\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}