{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics(d, b);\n  };\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n    _extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n  for (var p in s) {\n    if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  }\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\n/**\n * 基于 G 的时间轴组件\n */\nimport { Canvas as GCanvas } from '@antv/g-canvas';\nimport { Canvas as GSVGCanvas } from '@antv/g-svg';\nimport { createDom, modifyCSS } from '@antv/dom-util';\nimport Base from '../base';\nimport TrendTimeBar from './trendTimeBar';\nimport TimeBarSlice from './timeBarSlice';\nimport { VALUE_CHANGE } from './constant';\nimport { isString, throttle } from '@antv/util';\n// simple 版本默认高度\nvar DEFAULT_SIMPLE_HEIGHT = 4;\n// trend 版本默认高度\nvar DEFAULT_TREND_HEIGHT = 26;\nvar TimeBar = /** @class */function (_super) {\n  __extends(TimeBar, _super);\n  function TimeBar(config) {\n    var _this = _super.call(this, config) || this;\n    _this.afterrenderListener = function (e) {\n      return _this.filterData({});\n    };\n    _this.valueChangeListener = throttle(function (e) {\n      return _this.filterData(e);\n    },\n    // 不可简写，否则 filterData 中 this 指针不对\n    200, {\n      trailing: true,\n      leading: true\n    });\n    _this.changeData = function (e) {\n      var graph = _this.get('graph');\n      _this.cacheGraphData = graph.get('data');\n      _this.filterData({});\n    };\n    return _this;\n  }\n  TimeBar.prototype.getDefaultCfgs = function () {\n    return {\n      container: null,\n      className: 'g6-component-timebar',\n      padding: 10,\n      type: 'trend',\n      trend: {\n        data: [],\n        isArea: false,\n        smooth: true\n      },\n      controllerCfg: {\n        speed: 1,\n        loop: false\n      },\n      slider: {\n        start: 0.1,\n        end: 0.9,\n        minText: 'min',\n        maxText: 'max'\n      },\n      tick: {\n        start: 0.1,\n        end: 0.9,\n        data: []\n      },\n      textStyle: {},\n      filterEdge: false,\n      filterItemTypes: ['node'],\n      containerCSS: {}\n    };\n  };\n  /**\n   * 初始化 TimeBar 的容器\n   */\n  TimeBar.prototype.initContainer = function () {\n    var graph = this.get('graph');\n    var _a = this._cfgs,\n      width = _a.width,\n      height = _a.height;\n    var className = this.get('className') || 'g6-component-timebar';\n    var container = this.get('container');\n    var graphContainer = this.get('graph').get('container');\n    var timeBarContainer;\n    if (!container) {\n      timeBarContainer = createDom(\"<div class='\".concat(className, \"'></div>\"));\n      modifyCSS(timeBarContainer, {\n        position: 'relative'\n      });\n    } else {\n      if (isString(container)) {\n        container = document.getElementById(container);\n      }\n      timeBarContainer = container;\n    }\n    graphContainer.appendChild(timeBarContainer);\n    this.set('timeBarContainer', timeBarContainer);\n    var canvas;\n    var renderer = graph.get('renderer');\n    if (renderer === 'SVG') {\n      canvas = new GSVGCanvas({\n        container: timeBarContainer,\n        width: width,\n        height: height\n      });\n    } else {\n      canvas = new GCanvas({\n        container: timeBarContainer,\n        width: width,\n        height: height\n      });\n    }\n    // 根据传入的参数修改容器 CSS 样式\n    if (this.get('containerCSS')) modifyCSS(timeBarContainer, this.get('containerCSS'));\n    this.set('canvas', canvas);\n  };\n  TimeBar.prototype.init = function () {\n    this.initContainer();\n    var canvas = this.get('canvas');\n    var timeBarGroup = canvas.addGroup({\n      name: 'timebar-group'\n    });\n    this.set('timeBarGroup', timeBarGroup);\n    this.renderTrend();\n    this.initEvent();\n    var fontFamily = typeof window !== 'undefined' ? window.getComputedStyle(document.body, null).getPropertyValue('font-family') || 'Arial, sans-serif' : 'Arial, sans-serif';\n    this.set('fontFamily', fontFamily);\n  };\n  /**\n   * 触发时间轴播放\n   */\n  TimeBar.prototype.play = function () {\n    this.togglePlay(true);\n  };\n  /**\n   * 触发时间轴暂停\n   */\n  TimeBar.prototype.pause = function () {\n    this.togglePlay(false);\n  };\n  /**\n   * 时间轴播放状态（播放/暂停）的切换\n   */\n  TimeBar.prototype.togglePlay = function (play) {\n    var timebar = this.get('timebar');\n    if (!timebar) return;\n    timebar.isPlay = !!play;\n    timebar.changePlayStatus();\n  };\n  TimeBar.prototype.renderTrend = function () {\n    var _this = this;\n    var _a = this._cfgs,\n      width = _a.width,\n      x = _a.x,\n      y = _a.y,\n      padding = _a.padding,\n      type = _a.type,\n      trend = _a.trend,\n      slider = _a.slider,\n      controllerCfg = _a.controllerCfg,\n      textStyle = _a.textStyle,\n      tick = _a.tick,\n      backgroundStyle = _a.backgroundStyle,\n      foregroundStyle = _a.foregroundStyle;\n    var data = trend.data,\n      other = __rest(trend, [\"data\"]);\n    var realWidth = width - 2 * padding;\n    var defaultHeight = type === 'trend' ? DEFAULT_TREND_HEIGHT : DEFAULT_SIMPLE_HEIGHT;\n    var graph = this.get('graph');\n    var group = this.get('timeBarGroup');\n    var canvas = this.get('canvas');\n    var timebar = null;\n    if (type === 'trend' || type === 'simple') {\n      var getValue_1 = this.get('getValue');\n      timebar = new TrendTimeBar(__assign(__assign({\n        graph: graph,\n        canvas: canvas,\n        group: group,\n        type: type,\n        x: x + padding,\n        y: type === 'trend' ? y + padding : y + padding + 15,\n        width: realWidth,\n        height: defaultHeight,\n        padding: padding,\n        backgroundStyle: backgroundStyle,\n        foregroundStyle: foregroundStyle,\n        trendCfg: __assign(__assign({}, other), {\n          data: data.map(function (d) {\n            return (getValue_1 === null || getValue_1 === void 0 ? void 0 : getValue_1(d)) || d.value;\n          })\n        })\n      }, slider), {\n        tick: {\n          ticks: data,\n          tickLabelFormatter: tick.tickLabelFormatter,\n          tickLabelStyle: tick.tickLabelStyle,\n          tickLineStyle: tick.tickLineStyle\n        },\n        handlerStyle: __assign(__assign({}, slider.handlerStyle), {\n          height: slider.height || defaultHeight\n        }),\n        controllerCfg: controllerCfg,\n        textStyle: textStyle\n      }));\n    } else if (type === 'tick') {\n      // 刻度时间轴\n      timebar = new TimeBarSlice(__assign({\n        graph: graph,\n        canvas: canvas,\n        group: group,\n        x: x + padding,\n        y: y + padding,\n        width: width,\n        height: 42,\n        padding: 2,\n        controllerCfg: controllerCfg\n      }, tick));\n    }\n    // 鼠标按下左/右滑块或范围条后在任意地方释放，都触发暂停播放\n    var handleMouseUp = function handleMouseUp() {\n      var timebarInstance = _this.get('timebar');\n      timebarInstance.draggingHandler = false;\n      if (timebarInstance.isPlay) {\n        timebarInstance.isPlay = false;\n        timebarInstance.currentHandler = timebarInstance.maxHandlerShape;\n        timebarInstance.changePlayStatus();\n      }\n      document.removeEventListener('mouseup', handleMouseUp);\n    };\n    canvas.on('mousedown', function (e) {\n      if (e.target.get('name') === 'maxHandlerShape-handler' || e.target.get('name') === 'minHandlerShape-handler' || e.target === timebar.foregroundShape) {\n        document.addEventListener('mouseup', handleMouseUp);\n      }\n    });\n    this.set('timebar', timebar);\n  };\n  TimeBar.prototype.filterData = function (evt) {\n    var _a;\n    var value = evt.value;\n    if (!value) {\n      value = [];\n      var type_1 = this._cfgs.type;\n      if (!type_1 || type_1 === 'trend' || type_1 === 'simple') {\n        value[0] = this._cfgs.slider.start;\n        value[1] = this._cfgs.slider.end;\n      } else if (type_1 === 'tick') {\n        value[0] = this._cfgs.tick.start;\n        value[1] = this._cfgs.tick.end;\n      }\n    }\n    var trendData = null;\n    var type = this._cfgs.type;\n    if (type === 'trend' || type === 'simple') {\n      trendData = this._cfgs.trend.data;\n    } else if (type === 'tick') {\n      trendData = this._cfgs.tick.data;\n    }\n    if (!trendData || trendData.length === 0) {\n      console.warn('请配置 TimeBar 组件的数据');\n      return;\n    }\n    var rangeChange = this.get('rangeChange');\n    var graph = this.get('graph');\n    var min = Math.round(trendData.length * value[0]);\n    var max = Math.round(trendData.length * value[1]);\n    max = max >= trendData.length ? trendData.length - 1 : max;\n    min = min >= trendData.length ? trendData.length - 1 : min;\n    var tickLabelFormatter = (_a = this._cfgs.tick) === null || _a === void 0 ? void 0 : _a.tickLabelFormatter;\n    var minText = tickLabelFormatter ? tickLabelFormatter(trendData[min]) : trendData[min].date;\n    var maxText = tickLabelFormatter ? tickLabelFormatter(trendData[max]) : trendData[max].date;\n    if (type !== 'tick') {\n      var timebar = this.get('timebar');\n      timebar.setText(minText, maxText);\n    }\n    if (rangeChange) {\n      rangeChange(graph, minText, maxText);\n    } else {\n      // 自动过滤数据，并渲染 graph\n      if (!this.cacheGraphData || this.cacheGraphData.nodes && this.cacheGraphData.nodes.length === 0) {\n        this.cacheGraphData = graph.get('data'); // graph.save() as GraphData;\n      }\n\n      var filterItemTypes = this.get('filterItemTypes');\n      var changeData = this.get('changeData');\n      // 过滤不在 min 和 max 范围内的节点\n      var getDate_1 = this.get('getDate');\n      var shouldIgnore_1 = this.get('shouldIgnore');\n      var minDate_1 = trendData[min].date,\n        maxDate_1 = trendData[max].date;\n      if (changeData || changeData === undefined) {\n        var originNodes = this.cacheGraphData.nodes;\n        var originEdges = this.cacheGraphData.edges;\n        var currentNodeExistMap_1 = {};\n        var currentEdgeExistMap_1 = {};\n        graph.getNodes().forEach(function (node) {\n          return currentNodeExistMap_1[node.getID()] = true;\n        });\n        graph.getEdges().forEach(function (edge) {\n          return currentEdgeExistMap_1[edge.getID()] = true;\n        });\n        if (filterItemTypes.includes('node')) {\n          originNodes.forEach(function (node) {\n            var date = +((getDate_1 === null || getDate_1 === void 0 ? void 0 : getDate_1(node)) || node.date);\n            var hitRange = date >= minDate_1 && date <= maxDate_1 || (shouldIgnore_1 === null || shouldIgnore_1 === void 0 ? void 0 : shouldIgnore_1('node', node, {\n              min: minDate_1,\n              max: maxDate_1\n            }));\n            var exist = currentNodeExistMap_1[node.id];\n            if (exist && !hitRange) {\n              graph.removeItem(node.id);\n              currentNodeExistMap_1[node.id] = false;\n            } else if (!exist && hitRange) {\n              graph.addItem('node', node);\n              currentNodeExistMap_1[node.id] = true;\n            }\n          });\n          // 过滤 source 或 target 不在 min 和 max 范围内的边\n          originEdges === null || originEdges === void 0 ? void 0 : originEdges.forEach(function (edge) {\n            var shouldShow = currentNodeExistMap_1[edge.source] && currentNodeExistMap_1[edge.target] || (shouldIgnore_1 === null || shouldIgnore_1 === void 0 ? void 0 : shouldIgnore_1('edge', edge, {\n              min: minDate_1,\n              max: maxDate_1\n            }));\n            var exist = !!graph.findById(edge.id);\n            if (exist && !shouldShow) {\n              graph.removeItem(edge.id);\n              currentEdgeExistMap_1[edge.id] = false;\n            } else if (!exist && shouldShow) {\n              graph.addItem('edge', edge);\n              currentEdgeExistMap_1[edge.id] = true;\n            } else if (!exist) {\n              currentEdgeExistMap_1[edge.id] = false;\n            }\n          });\n        }\n        if (this.get('filterEdge') || filterItemTypes.includes('edge')) {\n          originEdges === null || originEdges === void 0 ? void 0 : originEdges.filter(function (edge) {\n            var date = +((getDate_1 === null || getDate_1 === void 0 ? void 0 : getDate_1(edge)) || edge.date);\n            var hitRange = date >= minDate_1 && date <= maxDate_1 || (shouldIgnore_1 === null || shouldIgnore_1 === void 0 ? void 0 : shouldIgnore_1('edge', edge, {\n              min: minDate_1,\n              max: maxDate_1\n            }));\n            var endsExist = currentNodeExistMap_1[edge.source] && currentNodeExistMap_1[edge.target];\n            var shouldShow = hitRange && endsExist;\n            var exist = currentEdgeExistMap_1[edge.id];\n            if (exist && !shouldShow) {\n              currentEdgeExistMap_1[edge.id] = false;\n              graph.removeItem(edge.id);\n            } else if (!exist && shouldShow) {\n              currentEdgeExistMap_1[edge.id] = true;\n              graph.addItem('edge', edge);\n            }\n          });\n        }\n      } else {\n        if (filterItemTypes.includes('node')) {\n          graph.getNodes().forEach(function (node) {\n            var model = node.getModel();\n            if (shouldIgnore_1 === null || shouldIgnore_1 === void 0 ? void 0 : shouldIgnore_1('node', model, {\n              min: minDate_1,\n              max: maxDate_1\n            })) return;\n            var date = +((getDate_1 === null || getDate_1 === void 0 ? void 0 : getDate_1(model)) || model.date);\n            if (date < minDate_1 || date > maxDate_1) {\n              graph.hideItem(node);\n            } else {\n              graph.showItem(node);\n            }\n          });\n        }\n        if (this.get('filterEdge') || filterItemTypes.includes('edge')) {\n          graph.getEdges().forEach(function (edge) {\n            var model = edge.getModel();\n            if (shouldIgnore_1 === null || shouldIgnore_1 === void 0 ? void 0 : shouldIgnore_1('edge', model, {\n              min: trendData[min].date,\n              max: trendData[max].date\n            })) return;\n            var date = +((getDate_1 === null || getDate_1 === void 0 ? void 0 : getDate_1(model)) || model.date);\n            if (date < trendData[min].date || date > trendData[max].date) {\n              graph.hideItem(edge);\n            } else {\n              var sourceVisible = edge.getSource().isVisible();\n              var targetVisible = edge.getTarget().isVisible();\n              if (sourceVisible && targetVisible) graph.showItem(edge);\n            }\n          });\n        }\n      }\n    }\n  };\n  TimeBar.prototype.initEvent = function () {\n    var graph = this.get('graph');\n    // 图数据变化，更新时间轴的原始数据\n    graph.on('afterchangedata', this.changeData);\n    // 图渲染，触发时间轴筛选\n    graph.on('afterrender', this.afterrenderListener);\n    // 时间轴的值发生改变的事件，触发筛选\n    graph.on(VALUE_CHANGE, this.valueChangeListener);\n  };\n  TimeBar.prototype.destroy = function () {\n    var graph = this.get('graph');\n    graph.off('afterchangedata', this.changeData);\n    graph.off('afterrender', this.afterrenderListener);\n    graph.off(VALUE_CHANGE, this.valueChangeListener);\n    var timebar = this.get('timebar');\n    if (timebar && timebar.destory) {\n      timebar.destory();\n    }\n    _super.prototype.destroy.call(this);\n    var timeBarContainer = this.get('timeBarContainer');\n    if (timeBarContainer) {\n      var container = this.get('container');\n      if (!container) {\n        container = this.get('graph').get('container');\n      }\n      if (isString(container)) {\n        container = document.getElementById(container);\n      }\n      container.removeChild(timeBarContainer);\n    }\n  };\n  return TimeBar;\n}(Base);\nexport default TimeBar;","map":{"version":3,"names":["__extends","_extendStatics","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","TypeError","String","__","constructor","create","__assign","assign","t","s","i","n","arguments","length","apply","__rest","e","indexOf","getOwnPropertySymbols","propertyIsEnumerable","Canvas","GCanvas","GSVGCanvas","createDom","modifyCSS","Base","TrendTimeBar","TimeBarSlice","VALUE_CHANGE","isString","throttle","DEFAULT_SIMPLE_HEIGHT","DEFAULT_TREND_HEIGHT","TimeBar","_super","config","_this","afterrenderListener","filterData","valueChangeListener","trailing","leading","changeData","graph","get","cacheGraphData","getDefaultCfgs","container","className","padding","type","trend","data","isArea","smooth","controllerCfg","speed","loop","slider","start","end","minText","maxText","tick","textStyle","filterEdge","filterItemTypes","containerCSS","initContainer","_a","_cfgs","width","height","graphContainer","timeBarContainer","concat","position","document","getElementById","appendChild","set","canvas","renderer","init","timeBarGroup","addGroup","name","renderTrend","initEvent","fontFamily","window","getComputedStyle","body","getPropertyValue","play","togglePlay","pause","timebar","isPlay","changePlayStatus","x","y","backgroundStyle","foregroundStyle","other","realWidth","defaultHeight","group","getValue_1","trendCfg","map","value","ticks","tickLabelFormatter","tickLabelStyle","tickLineStyle","handlerStyle","handleMouseUp","timebarInstance","draggingHandler","currentHandler","maxHandlerShape","removeEventListener","on","target","foregroundShape","addEventListener","evt","type_1","trendData","console","warn","rangeChange","min","Math","round","max","date","setText","nodes","getDate_1","shouldIgnore_1","minDate_1","maxDate_1","undefined","originNodes","originEdges","edges","currentNodeExistMap_1","currentEdgeExistMap_1","getNodes","forEach","node","getID","getEdges","edge","includes","hitRange","exist","id","removeItem","addItem","shouldShow","source","findById","filter","endsExist","model","getModel","hideItem","showItem","sourceVisible","getSource","isVisible","targetVisible","getTarget","destroy","off","destory","removeChild"],"sources":["/home/iam/Documents/LocalWeb-master/node_modules/@antv/g6-plugin/es/timeBar/index.js"],"sourcesContent":["var __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n    };\n    return _extendStatics(d, b);\n  };\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n    _extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\n/**\n * 基于 G 的时间轴组件\n */\nimport { Canvas as GCanvas } from '@antv/g-canvas';\nimport { Canvas as GSVGCanvas } from '@antv/g-svg';\nimport { createDom, modifyCSS } from '@antv/dom-util';\nimport Base from '../base';\nimport TrendTimeBar from './trendTimeBar';\nimport TimeBarSlice from './timeBarSlice';\nimport { VALUE_CHANGE } from './constant';\nimport { isString, throttle } from '@antv/util';\n// simple 版本默认高度\nvar DEFAULT_SIMPLE_HEIGHT = 4;\n// trend 版本默认高度\nvar DEFAULT_TREND_HEIGHT = 26;\nvar TimeBar = /** @class */function (_super) {\n  __extends(TimeBar, _super);\n  function TimeBar(config) {\n    var _this = _super.call(this, config) || this;\n    _this.afterrenderListener = function (e) {\n      return _this.filterData({});\n    };\n    _this.valueChangeListener = throttle(function (e) {\n      return _this.filterData(e);\n    },\n    // 不可简写，否则 filterData 中 this 指针不对\n    200, {\n      trailing: true,\n      leading: true\n    });\n    _this.changeData = function (e) {\n      var graph = _this.get('graph');\n      _this.cacheGraphData = graph.get('data');\n      _this.filterData({});\n    };\n    return _this;\n  }\n  TimeBar.prototype.getDefaultCfgs = function () {\n    return {\n      container: null,\n      className: 'g6-component-timebar',\n      padding: 10,\n      type: 'trend',\n      trend: {\n        data: [],\n        isArea: false,\n        smooth: true\n      },\n      controllerCfg: {\n        speed: 1,\n        loop: false\n      },\n      slider: {\n        start: 0.1,\n        end: 0.9,\n        minText: 'min',\n        maxText: 'max'\n      },\n      tick: {\n        start: 0.1,\n        end: 0.9,\n        data: []\n      },\n      textStyle: {},\n      filterEdge: false,\n      filterItemTypes: ['node'],\n      containerCSS: {}\n    };\n  };\n  /**\n   * 初始化 TimeBar 的容器\n   */\n  TimeBar.prototype.initContainer = function () {\n    var graph = this.get('graph');\n    var _a = this._cfgs,\n      width = _a.width,\n      height = _a.height;\n    var className = this.get('className') || 'g6-component-timebar';\n    var container = this.get('container');\n    var graphContainer = this.get('graph').get('container');\n    var timeBarContainer;\n    if (!container) {\n      timeBarContainer = createDom(\"<div class='\".concat(className, \"'></div>\"));\n      modifyCSS(timeBarContainer, {\n        position: 'relative'\n      });\n    } else {\n      if (isString(container)) {\n        container = document.getElementById(container);\n      }\n      timeBarContainer = container;\n    }\n    graphContainer.appendChild(timeBarContainer);\n    this.set('timeBarContainer', timeBarContainer);\n    var canvas;\n    var renderer = graph.get('renderer');\n    if (renderer === 'SVG') {\n      canvas = new GSVGCanvas({\n        container: timeBarContainer,\n        width: width,\n        height: height\n      });\n    } else {\n      canvas = new GCanvas({\n        container: timeBarContainer,\n        width: width,\n        height: height\n      });\n    }\n    // 根据传入的参数修改容器 CSS 样式\n    if (this.get('containerCSS')) modifyCSS(timeBarContainer, this.get('containerCSS'));\n    this.set('canvas', canvas);\n  };\n  TimeBar.prototype.init = function () {\n    this.initContainer();\n    var canvas = this.get('canvas');\n    var timeBarGroup = canvas.addGroup({\n      name: 'timebar-group'\n    });\n    this.set('timeBarGroup', timeBarGroup);\n    this.renderTrend();\n    this.initEvent();\n    var fontFamily = typeof window !== 'undefined' ? window.getComputedStyle(document.body, null).getPropertyValue('font-family') || 'Arial, sans-serif' : 'Arial, sans-serif';\n    this.set('fontFamily', fontFamily);\n  };\n  /**\n   * 触发时间轴播放\n   */\n  TimeBar.prototype.play = function () {\n    this.togglePlay(true);\n  };\n  /**\n   * 触发时间轴暂停\n   */\n  TimeBar.prototype.pause = function () {\n    this.togglePlay(false);\n  };\n  /**\n   * 时间轴播放状态（播放/暂停）的切换\n   */\n  TimeBar.prototype.togglePlay = function (play) {\n    var timebar = this.get('timebar');\n    if (!timebar) return;\n    timebar.isPlay = !!play;\n    timebar.changePlayStatus();\n  };\n  TimeBar.prototype.renderTrend = function () {\n    var _this = this;\n    var _a = this._cfgs,\n      width = _a.width,\n      x = _a.x,\n      y = _a.y,\n      padding = _a.padding,\n      type = _a.type,\n      trend = _a.trend,\n      slider = _a.slider,\n      controllerCfg = _a.controllerCfg,\n      textStyle = _a.textStyle,\n      tick = _a.tick,\n      backgroundStyle = _a.backgroundStyle,\n      foregroundStyle = _a.foregroundStyle;\n    var data = trend.data,\n      other = __rest(trend, [\"data\"]);\n    var realWidth = width - 2 * padding;\n    var defaultHeight = type === 'trend' ? DEFAULT_TREND_HEIGHT : DEFAULT_SIMPLE_HEIGHT;\n    var graph = this.get('graph');\n    var group = this.get('timeBarGroup');\n    var canvas = this.get('canvas');\n    var timebar = null;\n    if (type === 'trend' || type === 'simple') {\n      var getValue_1 = this.get('getValue');\n      timebar = new TrendTimeBar(__assign(__assign({\n        graph: graph,\n        canvas: canvas,\n        group: group,\n        type: type,\n        x: x + padding,\n        y: type === 'trend' ? y + padding : y + padding + 15,\n        width: realWidth,\n        height: defaultHeight,\n        padding: padding,\n        backgroundStyle: backgroundStyle,\n        foregroundStyle: foregroundStyle,\n        trendCfg: __assign(__assign({}, other), {\n          data: data.map(function (d) {\n            return (getValue_1 === null || getValue_1 === void 0 ? void 0 : getValue_1(d)) || d.value;\n          })\n        })\n      }, slider), {\n        tick: {\n          ticks: data,\n          tickLabelFormatter: tick.tickLabelFormatter,\n          tickLabelStyle: tick.tickLabelStyle,\n          tickLineStyle: tick.tickLineStyle\n        },\n        handlerStyle: __assign(__assign({}, slider.handlerStyle), {\n          height: slider.height || defaultHeight\n        }),\n        controllerCfg: controllerCfg,\n        textStyle: textStyle\n      }));\n    } else if (type === 'tick') {\n      // 刻度时间轴\n      timebar = new TimeBarSlice(__assign({\n        graph: graph,\n        canvas: canvas,\n        group: group,\n        x: x + padding,\n        y: y + padding,\n        width: width,\n        height: 42,\n        padding: 2,\n        controllerCfg: controllerCfg\n      }, tick));\n    }\n    // 鼠标按下左/右滑块或范围条后在任意地方释放，都触发暂停播放\n    var handleMouseUp = function handleMouseUp() {\n      var timebarInstance = _this.get('timebar');\n      timebarInstance.draggingHandler = false;\n      if (timebarInstance.isPlay) {\n        timebarInstance.isPlay = false;\n        timebarInstance.currentHandler = timebarInstance.maxHandlerShape;\n        timebarInstance.changePlayStatus();\n      }\n      document.removeEventListener('mouseup', handleMouseUp);\n    };\n    canvas.on('mousedown', function (e) {\n      if (e.target.get('name') === 'maxHandlerShape-handler' || e.target.get('name') === 'minHandlerShape-handler' || e.target === timebar.foregroundShape) {\n        document.addEventListener('mouseup', handleMouseUp);\n      }\n    });\n    this.set('timebar', timebar);\n  };\n  TimeBar.prototype.filterData = function (evt) {\n    var _a;\n    var value = evt.value;\n    if (!value) {\n      value = [];\n      var type_1 = this._cfgs.type;\n      if (!type_1 || type_1 === 'trend' || type_1 === 'simple') {\n        value[0] = this._cfgs.slider.start;\n        value[1] = this._cfgs.slider.end;\n      } else if (type_1 === 'tick') {\n        value[0] = this._cfgs.tick.start;\n        value[1] = this._cfgs.tick.end;\n      }\n    }\n    var trendData = null;\n    var type = this._cfgs.type;\n    if (type === 'trend' || type === 'simple') {\n      trendData = this._cfgs.trend.data;\n    } else if (type === 'tick') {\n      trendData = this._cfgs.tick.data;\n    }\n    if (!trendData || trendData.length === 0) {\n      console.warn('请配置 TimeBar 组件的数据');\n      return;\n    }\n    var rangeChange = this.get('rangeChange');\n    var graph = this.get('graph');\n    var min = Math.round(trendData.length * value[0]);\n    var max = Math.round(trendData.length * value[1]);\n    max = max >= trendData.length ? trendData.length - 1 : max;\n    min = min >= trendData.length ? trendData.length - 1 : min;\n    var tickLabelFormatter = (_a = this._cfgs.tick) === null || _a === void 0 ? void 0 : _a.tickLabelFormatter;\n    var minText = tickLabelFormatter ? tickLabelFormatter(trendData[min]) : trendData[min].date;\n    var maxText = tickLabelFormatter ? tickLabelFormatter(trendData[max]) : trendData[max].date;\n    if (type !== 'tick') {\n      var timebar = this.get('timebar');\n      timebar.setText(minText, maxText);\n    }\n    if (rangeChange) {\n      rangeChange(graph, minText, maxText);\n    } else {\n      // 自动过滤数据，并渲染 graph\n      if (!this.cacheGraphData || this.cacheGraphData.nodes && this.cacheGraphData.nodes.length === 0) {\n        this.cacheGraphData = graph.get('data'); // graph.save() as GraphData;\n      }\n\n      var filterItemTypes = this.get('filterItemTypes');\n      var changeData = this.get('changeData');\n      // 过滤不在 min 和 max 范围内的节点\n      var getDate_1 = this.get('getDate');\n      var shouldIgnore_1 = this.get('shouldIgnore');\n      var minDate_1 = trendData[min].date,\n        maxDate_1 = trendData[max].date;\n      if (changeData || changeData === undefined) {\n        var originNodes = this.cacheGraphData.nodes;\n        var originEdges = this.cacheGraphData.edges;\n        var currentNodeExistMap_1 = {};\n        var currentEdgeExistMap_1 = {};\n        graph.getNodes().forEach(function (node) {\n          return currentNodeExistMap_1[node.getID()] = true;\n        });\n        graph.getEdges().forEach(function (edge) {\n          return currentEdgeExistMap_1[edge.getID()] = true;\n        });\n        if (filterItemTypes.includes('node')) {\n          originNodes.forEach(function (node) {\n            var date = +((getDate_1 === null || getDate_1 === void 0 ? void 0 : getDate_1(node)) || node.date);\n            var hitRange = date >= minDate_1 && date <= maxDate_1 || (shouldIgnore_1 === null || shouldIgnore_1 === void 0 ? void 0 : shouldIgnore_1('node', node, {\n              min: minDate_1,\n              max: maxDate_1\n            }));\n            var exist = currentNodeExistMap_1[node.id];\n            if (exist && !hitRange) {\n              graph.removeItem(node.id);\n              currentNodeExistMap_1[node.id] = false;\n            } else if (!exist && hitRange) {\n              graph.addItem('node', node);\n              currentNodeExistMap_1[node.id] = true;\n            }\n          });\n          // 过滤 source 或 target 不在 min 和 max 范围内的边\n          originEdges === null || originEdges === void 0 ? void 0 : originEdges.forEach(function (edge) {\n            var shouldShow = currentNodeExistMap_1[edge.source] && currentNodeExistMap_1[edge.target] || (shouldIgnore_1 === null || shouldIgnore_1 === void 0 ? void 0 : shouldIgnore_1('edge', edge, {\n              min: minDate_1,\n              max: maxDate_1\n            }));\n            var exist = !!graph.findById(edge.id);\n            if (exist && !shouldShow) {\n              graph.removeItem(edge.id);\n              currentEdgeExistMap_1[edge.id] = false;\n            } else if (!exist && shouldShow) {\n              graph.addItem('edge', edge);\n              currentEdgeExistMap_1[edge.id] = true;\n            } else if (!exist) {\n              currentEdgeExistMap_1[edge.id] = false;\n            }\n          });\n        }\n        if (this.get('filterEdge') || filterItemTypes.includes('edge')) {\n          originEdges === null || originEdges === void 0 ? void 0 : originEdges.filter(function (edge) {\n            var date = +((getDate_1 === null || getDate_1 === void 0 ? void 0 : getDate_1(edge)) || edge.date);\n            var hitRange = date >= minDate_1 && date <= maxDate_1 || (shouldIgnore_1 === null || shouldIgnore_1 === void 0 ? void 0 : shouldIgnore_1('edge', edge, {\n              min: minDate_1,\n              max: maxDate_1\n            }));\n            var endsExist = currentNodeExistMap_1[edge.source] && currentNodeExistMap_1[edge.target];\n            var shouldShow = hitRange && endsExist;\n            var exist = currentEdgeExistMap_1[edge.id];\n            if (exist && !shouldShow) {\n              currentEdgeExistMap_1[edge.id] = false;\n              graph.removeItem(edge.id);\n            } else if (!exist && shouldShow) {\n              currentEdgeExistMap_1[edge.id] = true;\n              graph.addItem('edge', edge);\n            }\n          });\n        }\n      } else {\n        if (filterItemTypes.includes('node')) {\n          graph.getNodes().forEach(function (node) {\n            var model = node.getModel();\n            if (shouldIgnore_1 === null || shouldIgnore_1 === void 0 ? void 0 : shouldIgnore_1('node', model, {\n              min: minDate_1,\n              max: maxDate_1\n            })) return;\n            var date = +((getDate_1 === null || getDate_1 === void 0 ? void 0 : getDate_1(model)) || model.date);\n            if (date < minDate_1 || date > maxDate_1) {\n              graph.hideItem(node);\n            } else {\n              graph.showItem(node);\n            }\n          });\n        }\n        if (this.get('filterEdge') || filterItemTypes.includes('edge')) {\n          graph.getEdges().forEach(function (edge) {\n            var model = edge.getModel();\n            if (shouldIgnore_1 === null || shouldIgnore_1 === void 0 ? void 0 : shouldIgnore_1('edge', model, {\n              min: trendData[min].date,\n              max: trendData[max].date\n            })) return;\n            var date = +((getDate_1 === null || getDate_1 === void 0 ? void 0 : getDate_1(model)) || model.date);\n            if (date < trendData[min].date || date > trendData[max].date) {\n              graph.hideItem(edge);\n            } else {\n              var sourceVisible = edge.getSource().isVisible();\n              var targetVisible = edge.getTarget().isVisible();\n              if (sourceVisible && targetVisible) graph.showItem(edge);\n            }\n          });\n        }\n      }\n    }\n  };\n  TimeBar.prototype.initEvent = function () {\n    var graph = this.get('graph');\n    // 图数据变化，更新时间轴的原始数据\n    graph.on('afterchangedata', this.changeData);\n    // 图渲染，触发时间轴筛选\n    graph.on('afterrender', this.afterrenderListener);\n    // 时间轴的值发生改变的事件，触发筛选\n    graph.on(VALUE_CHANGE, this.valueChangeListener);\n  };\n  TimeBar.prototype.destroy = function () {\n    var graph = this.get('graph');\n    graph.off('afterchangedata', this.changeData);\n    graph.off('afterrender', this.afterrenderListener);\n    graph.off(VALUE_CHANGE, this.valueChangeListener);\n    var timebar = this.get('timebar');\n    if (timebar && timebar.destory) {\n      timebar.destory();\n    }\n    _super.prototype.destroy.call(this);\n    var timeBarContainer = this.get('timeBarContainer');\n    if (timeBarContainer) {\n      var container = this.get('container');\n      if (!container) {\n        container = this.get('graph').get('container');\n      }\n      if (isString(container)) {\n        container = document.getElementById(container);\n      }\n      container.removeChild(timeBarContainer);\n    }\n  };\n  return TimeBar;\n}(Base);\nexport default TimeBar;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}