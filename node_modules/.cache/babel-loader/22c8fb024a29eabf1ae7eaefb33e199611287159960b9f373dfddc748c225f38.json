{"ast":null,"code":"import _regeneratorRuntime from\"/home/iam/Documents/network/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/iam/Documents/network/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/iam/Documents/network/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{message as antdMessage,Form,Input,Button,Space,Row,Card,Col}from'antd';import React from'react';import ubusApi from'../../../../service/api/ubus-api';import{useTranslation}from\"react-i18next\";import\"../../../../translations/i18n\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var EditPassword=function EditPassword(props){var item=props.item;var _Form$useForm=Form.useForm(),_Form$useForm2=_slicedToArray(_Form$useForm,1),form=_Form$useForm2[0];var _React$useState=React.useState(false),_React$useState2=_slicedToArray(_React$useState,2),passwordVisible=_React$useState2[0],setPasswordVisible=_React$useState2[1];var _useTranslation=useTranslation(),t=_useTranslation.t;var abc=t('error_fill');if(item){var account_type=item.account_type;form.setFieldsValue({type:account_type});}var onFinish=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(values){var param,key,result,code,status;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:param={current_password:values.current_password,new_password:values.new_password};if(!(values.new_password!==values.confim_password)){_context.next=5;break;}antdMessage.error(t(\"wrong_confirm_password\"));_context.next=13;break;case 5:key='updatable';antdMessage.loading({content:t(\"loading\"),key:key});setTimeout(function(){antdMessage.success({content:t(\"success\"),key:key,duration:2});},1000);_context.next=10;return ubusApi.config_system_password(param);case 10:result=_context.sent;code=result.code,status=result.status;if(code===1)antdMessage.error(t(\"wrong_current_password\"));else antdMessage.success(t(\"change_password_ok\"));case 13:case\"end\":return _context.stop();}}},_callee);}));return function onFinish(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{span:4}),/*#__PURE__*/_jsx(Col,{span:16,children:/*#__PURE__*/_jsx(Card,{title:t(\"change_password\"),type:\"inner\",headStyle:{background:\"linear-gradient(45deg, #07117e, #07117e\",color:'white'},children:/*#__PURE__*/_jsxs(Form,{labelCol:{span:6},wrapperCol:{span:20},form:form,onFinish:onFinish,children:[/*#__PURE__*/_jsx(Form.Item,{name:\"current_password\",label:t(\"current_password\"),rules:[{required:true,message:String(t(\"error_fill\"))}],children:/*#__PURE__*/_jsx(Space,{direction:\"horizontal\",children:/*#__PURE__*/_jsx(Input.Password,{visibilityToggle:{visible:passwordVisible,onVisibleChange:setPasswordVisible}})})}),/*#__PURE__*/_jsx(Form.Item,{name:\"new_password\",label:t(\"new_password\"),rules:[{required:true,message:String(t(\"error_fill\"))}],children:/*#__PURE__*/_jsx(Space,{direction:\"horizontal\",children:/*#__PURE__*/_jsx(Input.Password,{visibilityToggle:{visible:passwordVisible,onVisibleChange:setPasswordVisible}})})}),/*#__PURE__*/_jsx(Form.Item,{name:\"confim_password\",label:t(\"confirm_new_password\"),rules:[{required:true,message:String(t(\"error_fill\"))}],children:/*#__PURE__*/_jsx(Space,{direction:\"horizontal\",children:/*#__PURE__*/_jsx(Input.Password,{})})}),/*#__PURE__*/_jsx(Form.Item,{wrapperCol:{offset:6,span:16},children:/*#__PURE__*/_jsx(Button,{htmlType:\"submit\",type:\"primary\",children:t(\"submit\")})})]})})})]});};","map":{"version":3,"names":["message","antdMessage","Form","Input","Button","Space","Row","Card","Col","React","ubusApi","useTranslation","EditPassword","props","item","useForm","form","useState","passwordVisible","setPasswordVisible","t","abc","account_type","setFieldsValue","type","onFinish","values","param","current_password","new_password","confim_password","error","key","loading","content","setTimeout","success","duration","config_system_password","result","code","status","background","color","span","required","String","visible","onVisibleChange","offset"],"sources":["/home/iam/Documents/network/src/components/antd/system/settings/authen.tsx"],"sourcesContent":["import { message as antdMessage, Form, Input, Button, Space, Row, Card, Col } from 'antd'\nimport React from 'react'\nimport ubusApi from '../../../../service/api/ubus-api'\nimport { useTranslation } from \"react-i18next\";\nimport \"../../../../translations/i18n\";\n\nexport const EditPassword = (props: any) => {\n    const { item } = props\n    const [form] = Form.useForm()\n    const [passwordVisible, setPasswordVisible] = React.useState(false);\n    const { t } = useTranslation();\n    const abc = t('error_fill')\n\n    if (item) {\n        const { account_type } = item\n        form.setFieldsValue({ type: account_type })\n    }\n    const onFinish = async (values: any) => {\n        const param = {\n            current_password: values.current_password, new_password: values.new_password,\n        }\n        if (values.new_password !== values.confim_password) {\n            antdMessage.error(t(\"wrong_confirm_password\"))\n        } else {\n            const key = 'updatable';\n            antdMessage.loading({ content: t(\"loading\"), key });\n            setTimeout(() => {\n                antdMessage.success({ content: t(\"success\"), key, duration: 2 });\n            }, 1000);\n            let result = await ubusApi.config_system_password(param)\n\n            const { code, status } = result\n\n            if (code === 1)\n                antdMessage.error(t(\"wrong_current_password\"))\n            else\n                antdMessage.success(t(\"change_password_ok\"))\n        }\n    }\n    return (\n        <Row>\n            <Col span={4}></Col>\n            <Col span={16}>\n                <Card title={t(\"change_password\")} type=\"inner\" headStyle={{background:\"linear-gradient(45deg, #07117e, #07117e\",color: 'white'}}>\n                    <Form labelCol={{ span: 6 }}\n                        wrapperCol={{ span: 20 }} form={form} onFinish={onFinish}>\n                        <Form.Item name=\"current_password\" label={t(\"current_password\")} rules={[{ required: true, message: String(t(\"error_fill\")) }]}>\n                            <Space direction=\"horizontal\">\n                                <Input.Password\n                                    visibilityToggle={{ visible: passwordVisible, onVisibleChange: setPasswordVisible }}\n                                />\n                            </Space>\n                        </Form.Item>\n                        <Form.Item name=\"new_password\" label={t(\"new_password\")} rules={[{ required: true, message: String(t(\"error_fill\")) }]}>\n                            <Space direction=\"horizontal\">\n                                <Input.Password \n                                    visibilityToggle={{ visible: passwordVisible, onVisibleChange: setPasswordVisible }}\n                                />\n                            </Space>\n                        </Form.Item>\n                        <Form.Item name=\"confim_password\" label={t(\"confirm_new_password\")} rules={[{ required: true, message: String(t(\"error_fill\")) }]}>\n                            <Space direction=\"horizontal\">\n                                <Input.Password />\n                            </Space>\n                        </Form.Item>\n                        <Form.Item wrapperCol={{ offset: 6, span: 16 }}>\n                            <Button htmlType=\"submit\" type=\"primary\" >{t(\"submit\")}</Button>\n                        </Form.Item>\n                    </Form>\n                </Card>\n            </Col>\n        </Row>\n    )\n}\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}