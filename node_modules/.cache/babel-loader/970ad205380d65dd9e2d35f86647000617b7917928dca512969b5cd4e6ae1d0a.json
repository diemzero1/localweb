{"ast":null,"code":"var __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nimport G6 from '@antv/g6';\nimport { clone, deepMix, each, isBoolean, isPlainObject, mix } from '@antv/util';\nimport { defaultCardStyle, defaultLabelStyle, defaultLineLabelStyle, defaultMargin } from '../../constants';\nimport { cloneBesidesImg, createMarker, getArrowCfg, getCssPadding, getStatusBBox, getStatusCfg, getStyle, setEllipsis, getChildrenData } from '../../utils';\nimport { getGlobalInstance } from '../../utils/global';\nvar getPathInfo = function (cfg) {\n  var edgeCfg = cfg.edgeCfg;\n  var startPoint = cfg.startPoint;\n  var endPoint = cfg.endPoint;\n  var startX = startPoint.x,\n    startY = startPoint.y;\n  var endX = endPoint.x,\n    endY = endPoint.y;\n  var yDiff = endY - startY;\n  var useControlPoint = Math.abs(yDiff) > 0;\n  var line1EndPoint;\n  var line2StartPoint;\n  var controlPoint;\n  var path;\n  if (Math.abs(yDiff) <= 5) {\n    line2StartPoint = {\n      x: startX + 20,\n      y: endY\n    };\n    path = [['M', startX, startY], ['L', endX, endY]];\n  } else {\n    var slope = useControlPoint ? Math.min(500 / Math.abs(yDiff), 20) : 0;\n    var cpOffset = slope > 15 ? 0 : 16;\n    var offset = yDiff < 0 ? cpOffset : -cpOffset;\n    line1EndPoint = {\n      x: startX + slope,\n      y: endY + offset\n    };\n    line2StartPoint = {\n      x: line1EndPoint.x + cpOffset,\n      y: endY\n    };\n    // 控制点坐标\n    controlPoint = {\n      x: (line1EndPoint.x - startX) * (endY - startY) / (line1EndPoint.y - startY) + startX,\n      y: endY\n    };\n    path = [['M', startX, startY], ['L', line1EndPoint.x, line1EndPoint.y], ['Q', controlPoint.x, controlPoint.y, line2StartPoint.x, line2StartPoint.y], ['L', endX, endY]];\n  }\n  var _a = edgeCfg,\n    startArrowCfg = _a.startArrow,\n    endArrowCfg = _a.endArrow;\n  var startArrow = getArrowCfg(startArrowCfg, cfg);\n  var endArrow = getArrowCfg(endArrowCfg, cfg);\n  return {\n    startArrow: startArrow,\n    endArrow: endArrow,\n    path: path,\n    line2StartPoint: line2StartPoint,\n    endY: endY\n  };\n};\nvar getPathText = function (value) {\n  var text;\n  var subText;\n  if (value instanceof Object) {\n    text = value.text;\n    subText = value.subText;\n  } else {\n    text = value;\n  }\n  return {\n    text: text,\n    subText: subText\n  };\n};\n// 通用指标卡\nexport var registerIndicatorGeometries = function () {\n  var defaultTitleLabelStyle = {\n    fill: '#fff',\n    fontSize: 12\n  };\n  var defaultTitleRectStyle = {\n    fill: '#40a9ff',\n    radius: [2, 2, 0, 0]\n  };\n  var defaultIconStyle = {\n    width: 12,\n    height: 12\n  };\n  var ARROWS = ['startArrow', 'endArrow'];\n  var SHAPE_DEFAULT_ATTRS = {\n    lineWidth: 1,\n    stroke: undefined,\n    fill: undefined,\n    lineAppendWidth: 1,\n    opacity: undefined,\n    strokeOpacity: undefined,\n    fillOpacity: undefined,\n    x: 0,\n    y: 0,\n    r: 10,\n    width: 20,\n    height: 20,\n    shadowColor: undefined,\n    shadowBlur: 0,\n    shadowOffsetX: 0,\n    shadowOffsetY: 0\n  };\n  var PATH_SHAPE_DEFAULT_ATTRS = {\n    lineWidth: 1,\n    stroke: '#000',\n    lineDash: undefined,\n    startArrow: false,\n    endArrow: false,\n    opacity: undefined,\n    strokeOpacity: undefined,\n    fillOpacity: undefined,\n    shadowColor: undefined,\n    shadowBlur: 0,\n    shadowOffsetX: 0,\n    shadowOffsetY: 0\n  };\n  var SHAPES_DEFAULT_ATTRS = {\n    edge: PATH_SHAPE_DEFAULT_ATTRS,\n    node: SHAPE_DEFAULT_ATTRS\n  };\n  // 注册节点\n  G6.registerNode('indicator-card', {\n    // @ts-ignore\n    draw: function (cfg, group) {\n      var _a, _b, _c;\n      if (cfg === void 0) {\n        cfg = {};\n      }\n      var _d = cfg.value,\n        value = _d === void 0 ? {} : _d,\n        nodeCfg = cfg.nodeCfg,\n        markerCfg = cfg.markerCfg;\n      var _e = nodeCfg,\n        titleCfg = _e.title,\n        itemsCfg = _e.items,\n        _f = _e.label,\n        label = _f === void 0 ? {} : _f,\n        style = _e.style,\n        _g = _e.padding,\n        padding = _g === void 0 ? 0 : _g,\n        badge = _e.badge,\n        percent = _e.percent,\n        autoWidth = _e.autoWidth,\n        customContent = _e.customContent;\n      var appendPadding = getStatusBBox(badge);\n      var labelStyle = label.style;\n      var cardPadding = getCssPadding(padding);\n      var paddingArray = cardPadding.map(function (item, index) {\n        return item + appendPadding[index];\n      });\n      var _h = titleCfg !== null && titleCfg !== void 0 ? titleCfg : {},\n        titleStyle = _h.style,\n        titleContainerStyle = _h.containerStyle,\n        _j = _h.autoEllipsis,\n        autoEllipsis = _j === void 0 ? true : _j;\n      var _k = itemsCfg !== null && itemsCfg !== void 0 ? itemsCfg : {},\n        itemStyle = _k.style,\n        itemContainerStyle = _k.containerStyle,\n        layout = _k.layout,\n        _l = _k.itemSpacing,\n        itemSpacing = _l === void 0 ? 4 : _l,\n        sort = _k.sort,\n        _m = _k.padding,\n        itemPadding = _m === void 0 ? [6, 0, 0] : _m;\n      var itemPaddingArray = getCssPadding(itemPadding);\n      var _o = value,\n        title = _o.title,\n        items = _o.items,\n        percentValue = _o.percent;\n      var size = (cfg === null || cfg === void 0 ? void 0 : cfg.size) || [100, 30];\n      if (typeof size === 'number') size = [size, size];\n      var height = 0; // 统计容器总高度，动态设置\n      var shapeWidth = size[0];\n      var contentWidth = shapeWidth - paddingArray[1] - paddingArray[3];\n      // card box\n      var cardStyle = getStyle(style, cfg, group);\n      var shape = group.addShape('rect', {\n        attrs: __assign(__assign({\n          x: 0,\n          y: 0,\n          width: size[0],\n          height: size[1]\n        }, defaultCardStyle), cardStyle),\n        name: 'main-box',\n        draggable: true\n      });\n      // node title\n      var titleTextShape;\n      var itemShape;\n      var titleShape;\n      if (title) {\n        // title rect\n        titleShape = group.addShape('rect', {\n          attrs: __assign(__assign({\n            x: 0,\n            y: 0,\n            width: size[0],\n            height: 0\n          }, defaultTitleRectStyle), getStyle(titleContainerStyle, cfg, group)),\n          name: 'title-rect',\n          draggable: true\n        });\n        var textStyle = __assign(__assign({}, defaultTitleLabelStyle), getStyle(titleStyle, cfg, group));\n        titleTextShape = group.addShape('text', {\n          attrs: __assign({\n            x: paddingArray[3],\n            y: paddingArray[0],\n            textBaseline: 'top',\n            text: autoEllipsis && !autoWidth ? setEllipsis(title, textStyle === null || textStyle === void 0 ? void 0 : textStyle.fontSize, contentWidth) : title\n          }, textStyle),\n          name: 'title'\n        });\n        var titleHeight_1 = (titleTextShape ? titleTextShape.getBBox() : {\n          height: size[1] / 2\n        }).height;\n        titleShape === null || titleShape === void 0 ? void 0 : titleShape.attr('height', titleHeight_1 + paddingArray[0] + paddingArray[2]);\n        height += titleShape.getBBox().height;\n      }\n      if (items) {\n        if (!titleShape) {\n          height += paddingArray[0];\n        }\n        itemShape = group.addShape('rect', {\n          attrs: __assign({\n            x: paddingArray[3],\n            y: height,\n            width: contentWidth,\n            height: 0\n          }, getStyle(itemContainerStyle, cfg, group)),\n          name: 'item-box',\n          draggable: true\n        });\n        height += itemPaddingArray[0];\n        var itemContentWidth_1 = contentWidth - itemPaddingArray[1] - itemPaddingArray[3];\n        var isArray_1 = Array.isArray(items);\n        var createRowItems_1 = function (item, contentWidth, startX, index) {\n          if (index === void 0) {\n            index = 0;\n          }\n          var rowHeight = [];\n          var valueShapeWidth = 0;\n          var keys = sort ? Object.keys(item) : ['text', 'value', 'icon'];\n          keys.forEach(function (key, keyIndex) {\n            var x;\n            var isIcon = key.startsWith('icon');\n            // sort 直接均分，简单化\n            if (sort || layout === 'flex') {\n              x = keyIndex * contentWidth / keys.length;\n            } else if (layout === 'follow') {\n              x = valueShapeWidth;\n            } else {\n              // layout === 'bundled'\n              // 直接均分，icon 紧随 value\n              x = key === 'text' ? 0 : contentWidth / 2;\n              x += isIcon ? valueShapeWidth : 0;\n            }\n            var keyShape = group.addShape(isIcon ? 'image' : 'text', {\n              attrs: __assign(__assign({\n                textBaseline: 'top',\n                x: startX + x,\n                y: height,\n                text: item[key],\n                img: item[key]\n              }, isIcon ? defaultIconStyle : defaultLabelStyle), getStyle(itemStyle || labelStyle, cfg, group, key)),\n              name: \"\".concat(key, \"-\").concat(index, \"-\").concat(keyIndex)\n            });\n            if (key === 'value' || layout === 'follow') {\n              valueShapeWidth += keyShape.getBBox().width;\n              valueShapeWidth += layout === 'follow' ? itemSpacing : 0;\n            }\n            rowHeight.push(keyShape.getBBox().height);\n          });\n          return rowHeight;\n        };\n        var createItems_1 = function (item, index) {\n          var _a;\n          if (index === void 0) {\n            index = 0;\n          }\n          var itemsHeight = [];\n          if (customContent) {\n            itemsHeight.push((_a = customContent(item, group, {\n              startX: paddingArray[3] + itemPaddingArray[3],\n              startY: height,\n              width: itemContentWidth_1\n            })) !== null && _a !== void 0 ? _a : 0);\n          } else {\n            itemsHeight.push.apply(itemsHeight, createRowItems_1(item, itemContentWidth_1, paddingArray[3] + itemPaddingArray[3], index));\n          }\n          height += Math.max.apply(Math, itemsHeight);\n          if (isArray_1 && index !== items.length - 1) {\n            height += defaultMargin;\n          }\n        };\n        if (Array.isArray(items)) {\n          items.forEach(function (item, index) {\n            createItems_1(item, index);\n          });\n        } else {\n          createItems_1(items);\n        }\n      }\n      var titleHeight = (titleShape === null || titleShape === void 0 ? void 0 : titleShape.getBBox().height) || 0;\n      itemShape === null || itemShape === void 0 ? void 0 : itemShape.attr('height', Math.max(height - titleHeight + itemPaddingArray[2], size[1]));\n      var itemHeight = (itemShape === null || itemShape === void 0 ? void 0 : itemShape.getBBox().height) || 0;\n      var shapeHeight = items ? (titleHeight || paddingArray[0]) + itemHeight + paddingArray[2] : titleHeight + itemHeight;\n      shape === null || shape === void 0 ? void 0 : shape.attr('height', shapeHeight);\n      var outerMaxX = shapeWidth;\n      if (autoWidth) {\n        var shapeMaxX = Math.max.apply(null, (_a = group === null || group === void 0 ? void 0 : group.getChildren()) === null || _a === void 0 ? void 0 : _a.map(function (childrenShape) {\n          return childrenShape.getBBox().maxX || 0;\n        }));\n        outerMaxX = Math.max(shapeWidth, shapeMaxX + paddingArray[1]);\n        titleShape === null || titleShape === void 0 ? void 0 : titleShape.attr('width', outerMaxX);\n        shape === null || shape === void 0 ? void 0 : shape.attr('width', outerMaxX);\n        itemShape === null || itemShape === void 0 ? void 0 : itemShape.attr('width', shapeMaxX - paddingArray[1]);\n      }\n      if (badge) {\n        var statusConfig = getStatusCfg(badge, [size[0], shapeHeight]);\n        group.addShape('rect', {\n          attrs: __assign(__assign({\n            fill: '#40a9ff'\n          }, statusConfig), getStyle(badge.style, cfg, group)),\n          name: 'status-rect'\n        });\n      }\n      if (percent && percentValue > 0) {\n        var _p = percent.size,\n          percentSize = _p === void 0 ? 4 : _p,\n          _q = percent.position,\n          position = _q === void 0 ? 'bottom' : _q,\n          _r = percent.style,\n          percentStyle = _r === void 0 ? {\n            fill: '#40a9ff'\n          } : _r,\n          _s = percent.backgroundStyle,\n          backgroundStyle = _s === void 0 ? {\n            fill: 'rgba(0,0,0,.1)',\n            radius: [0, 0, 2, 2]\n          } : _s;\n        var statusConfig = getStatusCfg({\n          position: position,\n          size: [outerMaxX, percentSize]\n        }, [outerMaxX, shapeHeight]);\n        group.addShape('rect', {\n          attrs: __assign(__assign({}, statusConfig), getStyle(backgroundStyle, cfg, group)),\n          name: 'percent-rect-background'\n        });\n        group.addShape('rect', {\n          attrs: __assign(__assign(__assign({\n            fill: '#40a9ff'\n          }, statusConfig), {\n            width: Math.min(1, percentValue) * statusConfig.width\n          }), getStyle(percentStyle, cfg, group)),\n          name: 'percent-rect'\n        });\n      }\n      // collapse marker\n      if (markerCfg) {\n        var graph = getGlobalInstance(cfg._graphId);\n        var stateCollapsed_1 = ((_c = (_b = group === null || group === void 0 ? void 0 : group.get('item')) === null || _b === void 0 ? void 0 : _b.getModel()) !== null && _c !== void 0 ? _c : {}).collapsed;\n        var _t = shape.getBBox(),\n          shapeWidth_1 = _t.width,\n          shapeHeight_1 = _t.height;\n        var markerCfgArray_1 = [];\n        if (typeof markerCfg === 'function') {\n          var callbackMarkerCfg = markerCfg(__assign(__assign({}, cfg), {\n            children: getChildrenData(graph === null || graph === void 0 ? void 0 : graph.get('eventData').getData(), cfg.g_currentPath)\n          }), group);\n          markerCfgArray_1 = callbackMarkerCfg instanceof Array ? callbackMarkerCfg : [callbackMarkerCfg];\n        } else {\n          markerCfgArray_1 = markerCfg instanceof Array ? markerCfg : [markerCfg];\n        }\n        markerCfgArray_1.forEach(function (mc) {\n          var show = mc.show,\n            _a = mc.position,\n            position = _a === void 0 ? 'right' : _a,\n            collapsed = mc.collapsed,\n            markerStyle = mc.style;\n          createMarker({\n            show: show,\n            position: position,\n            collapsed: stateCollapsed_1 !== null && stateCollapsed_1 !== void 0 ? stateCollapsed_1 : collapsed,\n            style: markerStyle\n          }, group, [shapeWidth_1, shapeHeight_1], markerCfgArray_1.length > 1);\n          shape.attr('defaultCollapsed', collapsed);\n        });\n      }\n      return shape;\n    },\n    /**\n     * 更新节点，包含文本\n     * @override\n     * @param  {Object} cfg 节点的配置项\n     * @param  {Node} node 节点\n     */\n    // @ts-ignore\n    update: undefined,\n    // @ts-ignore\n    setState: function (name, value, item) {\n      var _a, _b;\n      var shape = item.get('keyShape');\n      if (!shape || shape.destroyed) return;\n      var type = item.getType();\n      var stateName = isBoolean(value) ? name : \"\".concat(name, \":\").concat(value);\n      var itemStateStyle = item.getStateStyle(stateName);\n      // const originStyle = item.getOriginStyle();\n      // 不允许设置一个不存在的状态\n      if (!itemStateStyle) {\n        return;\n      }\n      // 要设置或取消的状态的样式\n      // 当没有 state 状态时，默认使用 model.stateStyles 中的样式\n      var styles = Object.assign({}, itemStateStyle);\n      var group = item.getContainer();\n      // 从图元素现有的样式中删除本次要取消的 states 中存在的属性值。使用对象检索更快\n      var keptAttrs = {\n        x: 1,\n        y: 1,\n        cx: 1,\n        cy: 1\n      };\n      if (value) {\n        var _loop_1 = function (key) {\n          var _c;\n          var style = styles[key];\n          if (isPlainObject(style) && !ARROWS.includes(key)) {\n            var subShape = group.find(function (element) {\n              return element.get('name') === key;\n            });\n            if (subShape) {\n              subShape.attr(style);\n            }\n          } else {\n            // 非纯对象，则认为是设置到 keyShape 上面的\n            shape.attr((_c = {}, _c[key] = style, _c));\n          }\n        };\n        // style 为要设置的状态的样式\n        for (var key in styles) {\n          _loop_1(key);\n        }\n      } else {\n        // 所有生效的 state 的样式\n        var enableStatesStyle = cloneBesidesImg(item.getCurrentStatesStyle());\n        var model = item.getModel();\n        // 原始样式\n        var originStyle_1 = mix({}, model.style, cloneBesidesImg(item.getOriginStyle()));\n        var keyShapeName_1 = shape.get('name');\n        // cloning  shape.attr(), keys.forEach to avoid cloning the img attr, which leads to maximum clone heap #2383\n        // const keyShapeStyles = clone(shape.attr())\n        var shapeAttrs_1 = shape.attr();\n        var keyShapeStyles_1 = {};\n        Object.keys(shapeAttrs_1).forEach(function (key) {\n          if (key === 'img') return;\n          var attr = shapeAttrs_1[key];\n          if (attr && typeof attr === 'object') {\n            keyShapeStyles_1[key] = clone(attr);\n          } else {\n            keyShapeStyles_1[key] = attr;\n          }\n        });\n        // 已有样式 - 要取消的状态的样式\n        var filtetDisableStatesStyle = {};\n        var _loop_2 = function (p) {\n          var style = styles[p];\n          if (isPlainObject(style) && !ARROWS.includes(p)) {\n            var subShape_1 = group.find(function (element) {\n              return element.get('name') === p;\n            });\n            if (subShape_1) {\n              var subShapeStyles_1 = clone(subShape_1.attr());\n              each(style, function (v, key) {\n                if (p === keyShapeName_1 && keyShapeStyles_1[key] && !keptAttrs[key]) {\n                  delete keyShapeStyles_1[key];\n                  var value_1 = originStyle_1[p][key] || SHAPES_DEFAULT_ATTRS[type][key];\n                  shape.attr(key, value_1);\n                } else if (subShapeStyles_1[key] || subShapeStyles_1[key] === 0) {\n                  delete subShapeStyles_1[key];\n                  var value_2 = originStyle_1[p][key] || SHAPES_DEFAULT_ATTRS[type][key];\n                  subShape_1.attr(key, value_2);\n                }\n              });\n              filtetDisableStatesStyle[p] = subShapeStyles_1;\n            }\n          } else {\n            if (keyShapeStyles_1[p] && !keptAttrs[p]) {\n              delete keyShapeStyles_1[p];\n              var value_3 = originStyle_1[p] || (originStyle_1[keyShapeName_1] ? originStyle_1[keyShapeName_1][p] : undefined) || SHAPES_DEFAULT_ATTRS[type][p];\n              shape.attr(p, value_3);\n            }\n          }\n        };\n        // styles 为要取消的状态的样式\n        for (var p in styles) {\n          _loop_2(p);\n        }\n        // 从图元素现有的样式中删除本次要取消的 states 中存在的属性值后，\n        // 如果 keyShape 有 name 属性，则 filtetDisableStatesStyle 的格式为 { keyShapeName: {} }\n        // 否则为普通对象\n        if (!keyShapeName_1) {\n          mix(filtetDisableStatesStyle, keyShapeStyles_1);\n        } else {\n          filtetDisableStatesStyle[keyShapeName_1] = keyShapeStyles_1;\n        }\n        for (var key in enableStatesStyle) {\n          if (keptAttrs[key]) continue;\n          var enableStyle = enableStatesStyle[key];\n          if (!isPlainObject(enableStyle) || ARROWS.includes(key)) {\n            // 把样式属性merge到keyShape中\n            if (!keyShapeName_1) {\n              mix(originStyle_1, (_a = {}, _a[key] = enableStyle, _a));\n            } else {\n              mix(originStyle_1[keyShapeName_1], (_b = {}, _b[key] = enableStyle, _b));\n              delete originStyle_1[key];\n            }\n            delete enableStatesStyle[key];\n          }\n        }\n        var originstyles = {};\n        deepMix(originstyles, originStyle_1, filtetDisableStatesStyle, enableStatesStyle);\n        var keyShapeSetted = false;\n        var _loop_3 = function (originKey) {\n          var _d;\n          var style = originstyles[originKey];\n          if (isPlainObject(style) && !ARROWS.includes(originKey)) {\n            var subShape = group.find(function (element) {\n              return element.get('name') === originKey;\n            });\n            if (subShape) {\n              if (originKey === keyShapeName_1) {\n                keyShapeSetted = true;\n              }\n              if (originKey !== 'collapse-icon') subShape.attr(style);\n            }\n          } else if (!keyShapeSetted) {\n            var value_4 = style || SHAPES_DEFAULT_ATTRS[type][originKey];\n            shape.attr((_d = {}, _d[originKey] = value_4, _d));\n          }\n        };\n        for (var originKey in originstyles) {\n          _loop_3(originKey);\n        }\n      }\n    }\n  }, 'single-node');\n  // 注册边\n  G6.registerEdge('labels-line', {\n    // @ts-ignore\n    draw: function draw(cfg, group) {\n      if (cfg === void 0) {\n        cfg = {};\n      }\n      var edgeCfg = cfg.edgeCfg,\n        value = cfg.value;\n      var _a = getPathText(value),\n        text = _a.text,\n        subText = _a.subText;\n      var _b = edgeCfg,\n        edgeStyle = _b.style,\n        labelCfg = _b.label;\n      var _c = getPathInfo(cfg),\n        startArrow = _c.startArrow,\n        endArrow = _c.endArrow,\n        path = _c.path,\n        line2StartPoint = _c.line2StartPoint,\n        endY = _c.endY;\n      var _d = labelCfg !== null && labelCfg !== void 0 ? labelCfg : {},\n        labelStyle = _d.style,\n        _e = _d.margin,\n        margin = _e === void 0 ? 4 : _e;\n      var line = group.addShape('path', {\n        attrs: __assign({\n          path: path,\n          stroke: '#ccc',\n          startArrow: startArrow,\n          endArrow: endArrow\n        }, typeof edgeStyle === 'function' ? edgeStyle(cfg, group) : edgeStyle),\n        name: 'path-shape'\n      });\n      var createItem = function (itemText, key, attrs) {\n        group.addShape('text', {\n          attrs: __assign({\n            text: itemText,\n            x: line2StartPoint.x\n          }, attrs),\n          name: \"line-text-\".concat(key)\n        });\n      };\n      if (text) {\n        var textStyle = __assign(__assign({}, defaultLineLabelStyle), getStyle(labelStyle, cfg, group, 'text'));\n        var offsetY = subText ? Number((\"\".concat(textStyle.fontSize) || '12').replace(/px/g, '')) / 2 : 0;\n        createItem(text, 'text', __assign({\n          y: endY - offsetY - margin / 2\n        }, textStyle));\n      }\n      if (subText) {\n        var textStyle = __assign(__assign({}, defaultLineLabelStyle), getStyle(labelStyle, cfg, group, 'subText'));\n        var offsetY = Number((\"\".concat(textStyle.fontSize) || '12').replace(/px/g, '')) / 2;\n        createItem(text, 'subText', __assign({\n          y: endY + offsetY + margin / 2\n        }, textStyle));\n      }\n      return line;\n    },\n    // @ts-ignore\n    update: function (cfg, edge) {\n      var edgeCfg = cfg.edgeCfg,\n        value = cfg.value;\n      var _a = getPathText(value),\n        text = _a.text,\n        subText = _a.subText;\n      var group = edge.getContainer();\n      var getShape = function (shapeName) {\n        return group.get('children').find(function (item) {\n          return item.get('name') === shapeName;\n        });\n      };\n      var _b = getPathInfo(cfg),\n        startArrow = _b.startArrow,\n        endArrow = _b.endArrow,\n        path = _b.path,\n        line2StartPoint = _b.line2StartPoint,\n        endY = _b.endY;\n      var _c = edgeCfg,\n        edgeStyle = _c.style,\n        labelCfg = _c.label;\n      var _d = labelCfg !== null && labelCfg !== void 0 ? labelCfg : {},\n        labelStyle = _d.style,\n        _e = _d.margin,\n        margin = _e === void 0 ? 4 : _e;\n      // path\n      var pathShape = getShape('path-shape');\n      pathShape === null || pathShape === void 0 ? void 0 : pathShape.attr(__assign({\n        path: path,\n        stroke: '#ccc',\n        startArrow: startArrow,\n        endArrow: endArrow\n      }, typeof edgeStyle === 'function' ? edgeStyle(cfg, group) : edgeStyle));\n      // path text\n      var texts = ['text', 'subText'];\n      var hasSubText = !!getShape(\"line-text-subText\");\n      texts.forEach(function (key) {\n        var textShape = getShape(\"line-text-\".concat(key));\n        var textStyle = __assign(__assign({}, defaultLineLabelStyle), getStyle(labelStyle, cfg, group, key));\n        var offsetY = hasSubText ? Number((\"\".concat(textStyle.fontSize) || '12').replace(/px/g, '')) / 2 : 0;\n        textShape === null || textShape === void 0 ? void 0 : textShape.attr(__assign({\n          x: line2StartPoint.x,\n          y: key === 'text' ? endY - offsetY - margin / 2 : endY + offsetY + margin / 2,\n          text: key === 'text' ? text : subText\n        }, textStyle));\n      });\n    }\n  }, 'single-edge');\n};","map":{"version":3,"names":["__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","G6","clone","deepMix","each","isBoolean","isPlainObject","mix","defaultCardStyle","defaultLabelStyle","defaultLineLabelStyle","defaultMargin","cloneBesidesImg","createMarker","getArrowCfg","getCssPadding","getStatusBBox","getStatusCfg","getStyle","setEllipsis","getChildrenData","getGlobalInstance","getPathInfo","cfg","edgeCfg","startPoint","endPoint","startX","x","startY","y","endX","endY","yDiff","useControlPoint","Math","abs","line1EndPoint","line2StartPoint","controlPoint","path","slope","min","cpOffset","offset","_a","startArrowCfg","startArrow","endArrowCfg","endArrow","getPathText","value","text","subText","registerIndicatorGeometries","defaultTitleLabelStyle","fill","fontSize","defaultTitleRectStyle","radius","defaultIconStyle","width","height","ARROWS","SHAPE_DEFAULT_ATTRS","lineWidth","stroke","undefined","lineAppendWidth","opacity","strokeOpacity","fillOpacity","r","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","PATH_SHAPE_DEFAULT_ATTRS","lineDash","SHAPES_DEFAULT_ATTRS","edge","node","registerNode","draw","group","_b","_c","_d","nodeCfg","markerCfg","_e","titleCfg","title","itemsCfg","items","_f","label","style","_g","padding","badge","percent","autoWidth","customContent","appendPadding","labelStyle","cardPadding","paddingArray","map","item","index","_h","titleStyle","titleContainerStyle","containerStyle","_j","autoEllipsis","_k","itemStyle","itemContainerStyle","layout","_l","itemSpacing","sort","_m","itemPadding","itemPaddingArray","_o","percentValue","size","shapeWidth","contentWidth","cardStyle","shape","addShape","attrs","name","draggable","titleTextShape","itemShape","titleShape","textStyle","textBaseline","titleHeight_1","getBBox","attr","itemContentWidth_1","isArray_1","Array","isArray","createRowItems_1","rowHeight","valueShapeWidth","keys","forEach","key","keyIndex","isIcon","startsWith","keyShape","img","concat","push","createItems_1","itemsHeight","max","titleHeight","itemHeight","shapeHeight","outerMaxX","shapeMaxX","getChildren","childrenShape","maxX","statusConfig","_p","percentSize","_q","position","_r","percentStyle","_s","backgroundStyle","graph","_graphId","stateCollapsed_1","get","getModel","collapsed","_t","shapeWidth_1","shapeHeight_1","markerCfgArray_1","callbackMarkerCfg","children","getData","g_currentPath","mc","show","markerStyle","update","setState","destroyed","type","getType","stateName","itemStateStyle","getStateStyle","styles","getContainer","keptAttrs","cx","cy","_loop_1","includes","subShape","find","element","enableStatesStyle","getCurrentStatesStyle","model","originStyle_1","getOriginStyle","keyShapeName_1","shapeAttrs_1","keyShapeStyles_1","filtetDisableStatesStyle","_loop_2","subShape_1","subShapeStyles_1","v","value_1","value_2","value_3","enableStyle","originstyles","keyShapeSetted","_loop_3","originKey","value_4","registerEdge","edgeStyle","labelCfg","margin","line","createItem","itemText","offsetY","Number","replace","getShape","shapeName","pathShape","texts","hasSubText","textShape"],"sources":["/home/iam/Documents/LocalWeb-master/node_modules/@ant-design/graphs/es/components/flow-analysis-graph/customItem.js"],"sourcesContent":["var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport G6 from '@antv/g6';\nimport { clone, deepMix, each, isBoolean, isPlainObject, mix } from '@antv/util';\nimport { defaultCardStyle, defaultLabelStyle, defaultLineLabelStyle, defaultMargin } from '../../constants';\nimport { cloneBesidesImg, createMarker, getArrowCfg, getCssPadding, getStatusBBox, getStatusCfg, getStyle, setEllipsis, getChildrenData, } from '../../utils';\nimport { getGlobalInstance } from '../../utils/global';\nvar getPathInfo = function (cfg) {\n    var edgeCfg = cfg.edgeCfg;\n    var startPoint = cfg.startPoint;\n    var endPoint = cfg.endPoint;\n    var startX = startPoint.x, startY = startPoint.y;\n    var endX = endPoint.x, endY = endPoint.y;\n    var yDiff = endY - startY;\n    var useControlPoint = Math.abs(yDiff) > 0;\n    var line1EndPoint;\n    var line2StartPoint;\n    var controlPoint;\n    var path;\n    if (Math.abs(yDiff) <= 5) {\n        line2StartPoint = {\n            x: startX + 20,\n            y: endY,\n        };\n        path = [\n            ['M', startX, startY],\n            ['L', endX, endY],\n        ];\n    }\n    else {\n        var slope = useControlPoint ? Math.min(500 / Math.abs(yDiff), 20) : 0;\n        var cpOffset = slope > 15 ? 0 : 16;\n        var offset = yDiff < 0 ? cpOffset : -cpOffset;\n        line1EndPoint = {\n            x: startX + slope,\n            y: endY + offset,\n        };\n        line2StartPoint = {\n            x: line1EndPoint.x + cpOffset,\n            y: endY,\n        };\n        // 控制点坐标\n        controlPoint = {\n            x: ((line1EndPoint.x - startX) * (endY - startY)) / (line1EndPoint.y - startY) + startX,\n            y: endY,\n        };\n        path = [\n            ['M', startX, startY],\n            ['L', line1EndPoint.x, line1EndPoint.y],\n            ['Q', controlPoint.x, controlPoint.y, line2StartPoint.x, line2StartPoint.y],\n            ['L', endX, endY],\n        ];\n    }\n    var _a = edgeCfg, startArrowCfg = _a.startArrow, endArrowCfg = _a.endArrow;\n    var startArrow = getArrowCfg(startArrowCfg, cfg);\n    var endArrow = getArrowCfg(endArrowCfg, cfg);\n    return {\n        startArrow: startArrow,\n        endArrow: endArrow,\n        path: path,\n        line2StartPoint: line2StartPoint,\n        endY: endY,\n    };\n};\nvar getPathText = function (value) {\n    var text;\n    var subText;\n    if (value instanceof Object) {\n        text = value.text;\n        subText = value.subText;\n    }\n    else {\n        text = value;\n    }\n    return { text: text, subText: subText };\n};\n// 通用指标卡\nexport var registerIndicatorGeometries = function () {\n    var defaultTitleLabelStyle = {\n        fill: '#fff',\n        fontSize: 12,\n    };\n    var defaultTitleRectStyle = {\n        fill: '#40a9ff',\n        radius: [2, 2, 0, 0],\n    };\n    var defaultIconStyle = {\n        width: 12,\n        height: 12,\n    };\n    var ARROWS = ['startArrow', 'endArrow'];\n    var SHAPE_DEFAULT_ATTRS = {\n        lineWidth: 1,\n        stroke: undefined,\n        fill: undefined,\n        lineAppendWidth: 1,\n        opacity: undefined,\n        strokeOpacity: undefined,\n        fillOpacity: undefined,\n        x: 0,\n        y: 0,\n        r: 10,\n        width: 20,\n        height: 20,\n        shadowColor: undefined,\n        shadowBlur: 0,\n        shadowOffsetX: 0,\n        shadowOffsetY: 0,\n    };\n    var PATH_SHAPE_DEFAULT_ATTRS = {\n        lineWidth: 1,\n        stroke: '#000',\n        lineDash: undefined,\n        startArrow: false,\n        endArrow: false,\n        opacity: undefined,\n        strokeOpacity: undefined,\n        fillOpacity: undefined,\n        shadowColor: undefined,\n        shadowBlur: 0,\n        shadowOffsetX: 0,\n        shadowOffsetY: 0,\n    };\n    var SHAPES_DEFAULT_ATTRS = {\n        edge: PATH_SHAPE_DEFAULT_ATTRS,\n        node: SHAPE_DEFAULT_ATTRS,\n    };\n    // 注册节点\n    G6.registerNode('indicator-card', {\n        // @ts-ignore\n        draw: function (cfg, group) {\n            var _a, _b, _c;\n            if (cfg === void 0) { cfg = {}; }\n            var _d = cfg.value, value = _d === void 0 ? {} : _d, nodeCfg = cfg.nodeCfg, markerCfg = cfg.markerCfg;\n            var _e = nodeCfg, titleCfg = _e.title, itemsCfg = _e.items, _f = _e.label, label = _f === void 0 ? {} : _f, style = _e.style, _g = _e.padding, padding = _g === void 0 ? 0 : _g, badge = _e.badge, percent = _e.percent, autoWidth = _e.autoWidth, customContent = _e.customContent;\n            var appendPadding = getStatusBBox(badge);\n            var labelStyle = label.style;\n            var cardPadding = getCssPadding(padding);\n            var paddingArray = cardPadding.map(function (item, index) { return item + appendPadding[index]; });\n            var _h = titleCfg !== null && titleCfg !== void 0 ? titleCfg : {}, titleStyle = _h.style, titleContainerStyle = _h.containerStyle, _j = _h.autoEllipsis, autoEllipsis = _j === void 0 ? true : _j;\n            var _k = itemsCfg !== null && itemsCfg !== void 0 ? itemsCfg : {}, itemStyle = _k.style, itemContainerStyle = _k.containerStyle, layout = _k.layout, _l = _k.itemSpacing, itemSpacing = _l === void 0 ? 4 : _l, sort = _k.sort, _m = _k.padding, itemPadding = _m === void 0 ? [6, 0, 0] : _m;\n            var itemPaddingArray = getCssPadding(itemPadding);\n            var _o = value, title = _o.title, items = _o.items, percentValue = _o.percent;\n            var size = (cfg === null || cfg === void 0 ? void 0 : cfg.size) || [100, 30];\n            if (typeof size === 'number')\n                size = [size, size];\n            var height = 0; // 统计容器总高度，动态设置\n            var shapeWidth = size[0];\n            var contentWidth = shapeWidth - paddingArray[1] - paddingArray[3];\n            // card box\n            var cardStyle = getStyle(style, cfg, group);\n            var shape = group.addShape('rect', {\n                attrs: __assign(__assign({ x: 0, y: 0, width: size[0], height: size[1] }, defaultCardStyle), cardStyle),\n                name: 'main-box',\n                draggable: true,\n            });\n            // node title\n            var titleTextShape;\n            var itemShape;\n            var titleShape;\n            if (title) {\n                // title rect\n                titleShape = group.addShape('rect', {\n                    attrs: __assign(__assign({ x: 0, y: 0, width: size[0], height: 0 }, defaultTitleRectStyle), getStyle(titleContainerStyle, cfg, group)),\n                    name: 'title-rect',\n                    draggable: true,\n                });\n                var textStyle = __assign(__assign({}, defaultTitleLabelStyle), getStyle(titleStyle, cfg, group));\n                titleTextShape = group.addShape('text', {\n                    attrs: __assign({ x: paddingArray[3], y: paddingArray[0], textBaseline: 'top', text: autoEllipsis && !autoWidth ? setEllipsis(title, textStyle === null || textStyle === void 0 ? void 0 : textStyle.fontSize, contentWidth) : title }, textStyle),\n                    name: 'title',\n                });\n                var titleHeight_1 = (titleTextShape ? titleTextShape.getBBox() : { height: size[1] / 2 }).height;\n                titleShape === null || titleShape === void 0 ? void 0 : titleShape.attr('height', titleHeight_1 + paddingArray[0] + paddingArray[2]);\n                height += titleShape.getBBox().height;\n            }\n            if (items) {\n                if (!titleShape) {\n                    height += paddingArray[0];\n                }\n                itemShape = group.addShape('rect', {\n                    attrs: __assign({ x: paddingArray[3], y: height, width: contentWidth, height: 0 }, getStyle(itemContainerStyle, cfg, group)),\n                    name: 'item-box',\n                    draggable: true,\n                });\n                height += itemPaddingArray[0];\n                var itemContentWidth_1 = contentWidth - itemPaddingArray[1] - itemPaddingArray[3];\n                var isArray_1 = Array.isArray(items);\n                var createRowItems_1 = function (item, contentWidth, startX, index) {\n                    if (index === void 0) { index = 0; }\n                    var rowHeight = [];\n                    var valueShapeWidth = 0;\n                    var keys = sort ? Object.keys(item) : ['text', 'value', 'icon'];\n                    keys.forEach(function (key, keyIndex) {\n                        var x;\n                        var isIcon = key.startsWith('icon');\n                        // sort 直接均分，简单化\n                        if (sort || layout === 'flex') {\n                            x = (keyIndex * contentWidth) / keys.length;\n                        }\n                        else if (layout === 'follow') {\n                            x = valueShapeWidth;\n                        }\n                        else {\n                            // layout === 'bundled'\n                            // 直接均分，icon 紧随 value\n                            x = key === 'text' ? 0 : contentWidth / 2;\n                            x += isIcon ? valueShapeWidth : 0;\n                        }\n                        var keyShape = group.addShape(isIcon ? 'image' : 'text', {\n                            attrs: __assign(__assign({ textBaseline: 'top', x: startX + x, y: height, text: item[key], img: item[key] }, (isIcon ? defaultIconStyle : defaultLabelStyle)), getStyle(itemStyle || labelStyle, cfg, group, key)),\n                            name: \"\".concat(key, \"-\").concat(index, \"-\").concat(keyIndex),\n                        });\n                        if (key === 'value' || layout === 'follow') {\n                            valueShapeWidth += keyShape.getBBox().width;\n                            valueShapeWidth += layout === 'follow' ? itemSpacing : 0;\n                        }\n                        rowHeight.push(keyShape.getBBox().height);\n                    });\n                    return rowHeight;\n                };\n                var createItems_1 = function (item, index) {\n                    var _a;\n                    if (index === void 0) { index = 0; }\n                    var itemsHeight = [];\n                    if (customContent) {\n                        itemsHeight.push((_a = customContent(item, group, {\n                            startX: paddingArray[3] + itemPaddingArray[3],\n                            startY: height,\n                            width: itemContentWidth_1,\n                        })) !== null && _a !== void 0 ? _a : 0);\n                    }\n                    else {\n                        itemsHeight.push.apply(itemsHeight, createRowItems_1(item, itemContentWidth_1, paddingArray[3] + itemPaddingArray[3], index));\n                    }\n                    height += Math.max.apply(Math, itemsHeight);\n                    if (isArray_1 && index !== items.length - 1) {\n                        height += defaultMargin;\n                    }\n                };\n                if (Array.isArray(items)) {\n                    items.forEach(function (item, index) {\n                        createItems_1(item, index);\n                    });\n                }\n                else {\n                    createItems_1(items);\n                }\n            }\n            var titleHeight = (titleShape === null || titleShape === void 0 ? void 0 : titleShape.getBBox().height) || 0;\n            itemShape === null || itemShape === void 0 ? void 0 : itemShape.attr('height', Math.max(height - titleHeight + itemPaddingArray[2], size[1]));\n            var itemHeight = (itemShape === null || itemShape === void 0 ? void 0 : itemShape.getBBox().height) || 0;\n            var shapeHeight = items\n                ? (titleHeight || paddingArray[0]) + itemHeight + paddingArray[2]\n                : titleHeight + itemHeight;\n            shape === null || shape === void 0 ? void 0 : shape.attr('height', shapeHeight);\n            var outerMaxX = shapeWidth;\n            if (autoWidth) {\n                var shapeMaxX = Math.max.apply(null, (_a = group === null || group === void 0 ? void 0 : group.getChildren()) === null || _a === void 0 ? void 0 : _a.map(function (childrenShape) {\n                    return childrenShape.getBBox().maxX || 0;\n                }));\n                outerMaxX = Math.max(shapeWidth, shapeMaxX + paddingArray[1]);\n                titleShape === null || titleShape === void 0 ? void 0 : titleShape.attr('width', outerMaxX);\n                shape === null || shape === void 0 ? void 0 : shape.attr('width', outerMaxX);\n                itemShape === null || itemShape === void 0 ? void 0 : itemShape.attr('width', shapeMaxX - paddingArray[1]);\n            }\n            if (badge) {\n                var statusConfig = getStatusCfg(badge, [size[0], shapeHeight]);\n                group.addShape('rect', {\n                    attrs: __assign(__assign({ fill: '#40a9ff' }, statusConfig), getStyle(badge.style, cfg, group)),\n                    name: 'status-rect',\n                });\n            }\n            if (percent && percentValue > 0) {\n                var _p = percent.size, percentSize = _p === void 0 ? 4 : _p, _q = percent.position, position = _q === void 0 ? 'bottom' : _q, _r = percent.style, percentStyle = _r === void 0 ? {\n                    fill: '#40a9ff',\n                } : _r, _s = percent.backgroundStyle, backgroundStyle = _s === void 0 ? {\n                    fill: 'rgba(0,0,0,.1)',\n                    radius: [0, 0, 2, 2],\n                } : _s;\n                var statusConfig = getStatusCfg({\n                    position: position,\n                    size: [outerMaxX, percentSize],\n                }, [outerMaxX, shapeHeight]);\n                group.addShape('rect', {\n                    attrs: __assign(__assign({}, statusConfig), getStyle(backgroundStyle, cfg, group)),\n                    name: 'percent-rect-background',\n                });\n                group.addShape('rect', {\n                    attrs: __assign(__assign(__assign({ fill: '#40a9ff' }, statusConfig), { width: Math.min(1, percentValue) * statusConfig.width }), getStyle(percentStyle, cfg, group)),\n                    name: 'percent-rect',\n                });\n            }\n            // collapse marker\n            if (markerCfg) {\n                var graph = getGlobalInstance(cfg._graphId);\n                var stateCollapsed_1 = ((_c = (_b = group === null || group === void 0 ? void 0 : group.get('item')) === null || _b === void 0 ? void 0 : _b.getModel()) !== null && _c !== void 0 ? _c : {}).collapsed;\n                var _t = shape.getBBox(), shapeWidth_1 = _t.width, shapeHeight_1 = _t.height;\n                var markerCfgArray_1 = [];\n                if (typeof markerCfg === 'function') {\n                    var callbackMarkerCfg = markerCfg(__assign(__assign({}, cfg), { children: getChildrenData(graph === null || graph === void 0 ? void 0 : graph.get('eventData').getData(), cfg.g_currentPath) }), group);\n                    markerCfgArray_1 = callbackMarkerCfg instanceof Array ? callbackMarkerCfg : [callbackMarkerCfg];\n                }\n                else {\n                    markerCfgArray_1 = markerCfg instanceof Array ? markerCfg : [markerCfg];\n                }\n                markerCfgArray_1.forEach(function (mc) {\n                    var show = mc.show, _a = mc.position, position = _a === void 0 ? 'right' : _a, collapsed = mc.collapsed, markerStyle = mc.style;\n                    createMarker({\n                        show: show,\n                        position: position,\n                        collapsed: stateCollapsed_1 !== null && stateCollapsed_1 !== void 0 ? stateCollapsed_1 : collapsed,\n                        style: markerStyle,\n                    }, group, [shapeWidth_1, shapeHeight_1], markerCfgArray_1.length > 1);\n                    shape.attr('defaultCollapsed', collapsed);\n                });\n            }\n            return shape;\n        },\n        /**\n         * 更新节点，包含文本\n         * @override\n         * @param  {Object} cfg 节点的配置项\n         * @param  {Node} node 节点\n         */\n        // @ts-ignore\n        update: undefined,\n        // @ts-ignore\n        setState: function (name, value, item) {\n            var _a, _b;\n            var shape = item.get('keyShape');\n            if (!shape || shape.destroyed)\n                return;\n            var type = item.getType();\n            var stateName = isBoolean(value) ? name : \"\".concat(name, \":\").concat(value);\n            var itemStateStyle = item.getStateStyle(stateName);\n            // const originStyle = item.getOriginStyle();\n            // 不允许设置一个不存在的状态\n            if (!itemStateStyle) {\n                return;\n            }\n            // 要设置或取消的状态的样式\n            // 当没有 state 状态时，默认使用 model.stateStyles 中的样式\n            var styles = Object.assign({}, itemStateStyle);\n            var group = item.getContainer();\n            // 从图元素现有的样式中删除本次要取消的 states 中存在的属性值。使用对象检索更快\n            var keptAttrs = { x: 1, y: 1, cx: 1, cy: 1 };\n            if (value) {\n                var _loop_1 = function (key) {\n                    var _c;\n                    var style = styles[key];\n                    if (isPlainObject(style) && !ARROWS.includes(key)) {\n                        var subShape = group.find(function (element) { return element.get('name') === key; });\n                        if (subShape) {\n                            subShape.attr(style);\n                        }\n                    }\n                    else {\n                        // 非纯对象，则认为是设置到 keyShape 上面的\n                        shape.attr((_c = {},\n                            _c[key] = style,\n                            _c));\n                    }\n                };\n                // style 为要设置的状态的样式\n                for (var key in styles) {\n                    _loop_1(key);\n                }\n            }\n            else {\n                // 所有生效的 state 的样式\n                var enableStatesStyle = cloneBesidesImg(item.getCurrentStatesStyle());\n                var model = item.getModel();\n                // 原始样式\n                var originStyle_1 = mix({}, model.style, cloneBesidesImg(item.getOriginStyle()));\n                var keyShapeName_1 = shape.get('name');\n                // cloning  shape.attr(), keys.forEach to avoid cloning the img attr, which leads to maximum clone heap #2383\n                // const keyShapeStyles = clone(shape.attr())\n                var shapeAttrs_1 = shape.attr();\n                var keyShapeStyles_1 = {};\n                Object.keys(shapeAttrs_1).forEach(function (key) {\n                    if (key === 'img')\n                        return;\n                    var attr = shapeAttrs_1[key];\n                    if (attr && typeof attr === 'object') {\n                        keyShapeStyles_1[key] = clone(attr);\n                    }\n                    else {\n                        keyShapeStyles_1[key] = attr;\n                    }\n                });\n                // 已有样式 - 要取消的状态的样式\n                var filtetDisableStatesStyle = {};\n                var _loop_2 = function (p) {\n                    var style = styles[p];\n                    if (isPlainObject(style) && !ARROWS.includes(p)) {\n                        var subShape_1 = group.find(function (element) { return element.get('name') === p; });\n                        if (subShape_1) {\n                            var subShapeStyles_1 = clone(subShape_1.attr());\n                            each(style, function (v, key) {\n                                if (p === keyShapeName_1 && keyShapeStyles_1[key] && !keptAttrs[key]) {\n                                    delete keyShapeStyles_1[key];\n                                    var value_1 = originStyle_1[p][key] || SHAPES_DEFAULT_ATTRS[type][key];\n                                    shape.attr(key, value_1);\n                                }\n                                else if (subShapeStyles_1[key] || subShapeStyles_1[key] === 0) {\n                                    delete subShapeStyles_1[key];\n                                    var value_2 = originStyle_1[p][key] || SHAPES_DEFAULT_ATTRS[type][key];\n                                    subShape_1.attr(key, value_2);\n                                }\n                            });\n                            filtetDisableStatesStyle[p] = subShapeStyles_1;\n                        }\n                    }\n                    else {\n                        if (keyShapeStyles_1[p] && !keptAttrs[p]) {\n                            delete keyShapeStyles_1[p];\n                            var value_3 = originStyle_1[p] ||\n                                (originStyle_1[keyShapeName_1] ? originStyle_1[keyShapeName_1][p] : undefined) ||\n                                SHAPES_DEFAULT_ATTRS[type][p];\n                            shape.attr(p, value_3);\n                        }\n                    }\n                };\n                // styles 为要取消的状态的样式\n                for (var p in styles) {\n                    _loop_2(p);\n                }\n                // 从图元素现有的样式中删除本次要取消的 states 中存在的属性值后，\n                // 如果 keyShape 有 name 属性，则 filtetDisableStatesStyle 的格式为 { keyShapeName: {} }\n                // 否则为普通对象\n                if (!keyShapeName_1) {\n                    mix(filtetDisableStatesStyle, keyShapeStyles_1);\n                }\n                else {\n                    filtetDisableStatesStyle[keyShapeName_1] = keyShapeStyles_1;\n                }\n                for (var key in enableStatesStyle) {\n                    if (keptAttrs[key])\n                        continue;\n                    var enableStyle = enableStatesStyle[key];\n                    if (!isPlainObject(enableStyle) || ARROWS.includes(key)) {\n                        // 把样式属性merge到keyShape中\n                        if (!keyShapeName_1) {\n                            mix(originStyle_1, (_a = {},\n                                _a[key] = enableStyle,\n                                _a));\n                        }\n                        else {\n                            mix(originStyle_1[keyShapeName_1], (_b = {},\n                                _b[key] = enableStyle,\n                                _b));\n                            delete originStyle_1[key];\n                        }\n                        delete enableStatesStyle[key];\n                    }\n                }\n                var originstyles = {};\n                deepMix(originstyles, originStyle_1, filtetDisableStatesStyle, enableStatesStyle);\n                var keyShapeSetted = false;\n                var _loop_3 = function (originKey) {\n                    var _d;\n                    var style = originstyles[originKey];\n                    if (isPlainObject(style) && !ARROWS.includes(originKey)) {\n                        var subShape = group.find(function (element) { return element.get('name') === originKey; });\n                        if (subShape) {\n                            if (originKey === keyShapeName_1) {\n                                keyShapeSetted = true;\n                            }\n                            if (originKey !== 'collapse-icon')\n                                subShape.attr(style);\n                        }\n                    }\n                    else if (!keyShapeSetted) {\n                        var value_4 = style || SHAPES_DEFAULT_ATTRS[type][originKey];\n                        shape.attr((_d = {},\n                            _d[originKey] = value_4,\n                            _d));\n                    }\n                };\n                for (var originKey in originstyles) {\n                    _loop_3(originKey);\n                }\n            }\n        },\n    }, 'single-node');\n    // 注册边\n    G6.registerEdge('labels-line', {\n        // @ts-ignore\n        draw: function draw(cfg, group) {\n            if (cfg === void 0) { cfg = {}; }\n            var edgeCfg = cfg.edgeCfg, value = cfg.value;\n            var _a = getPathText(value), text = _a.text, subText = _a.subText;\n            var _b = edgeCfg, edgeStyle = _b.style, labelCfg = _b.label;\n            var _c = getPathInfo(cfg), startArrow = _c.startArrow, endArrow = _c.endArrow, path = _c.path, line2StartPoint = _c.line2StartPoint, endY = _c.endY;\n            var _d = labelCfg !== null && labelCfg !== void 0 ? labelCfg : {}, labelStyle = _d.style, _e = _d.margin, margin = _e === void 0 ? 4 : _e;\n            var line = group.addShape('path', {\n                attrs: __assign({ path: path, stroke: '#ccc', startArrow: startArrow, endArrow: endArrow }, (typeof edgeStyle === 'function' ? edgeStyle(cfg, group) : edgeStyle)),\n                name: 'path-shape',\n            });\n            var createItem = function (itemText, key, attrs) {\n                group.addShape('text', {\n                    attrs: __assign({ text: itemText, x: line2StartPoint.x }, attrs),\n                    name: \"line-text-\".concat(key),\n                });\n            };\n            if (text) {\n                var textStyle = __assign(__assign({}, defaultLineLabelStyle), getStyle(labelStyle, cfg, group, 'text'));\n                var offsetY = subText ? Number((\"\".concat(textStyle.fontSize) || '12').replace(/px/g, '')) / 2 : 0;\n                createItem(text, 'text', __assign({ y: endY - offsetY - margin / 2 }, textStyle));\n            }\n            if (subText) {\n                var textStyle = __assign(__assign({}, defaultLineLabelStyle), getStyle(labelStyle, cfg, group, 'subText'));\n                var offsetY = Number((\"\".concat(textStyle.fontSize) || '12').replace(/px/g, '')) / 2;\n                createItem(text, 'subText', __assign({ y: endY + offsetY + margin / 2 }, textStyle));\n            }\n            return line;\n        },\n        // @ts-ignore\n        update: function (cfg, edge) {\n            var edgeCfg = cfg.edgeCfg, value = cfg.value;\n            var _a = getPathText(value), text = _a.text, subText = _a.subText;\n            var group = edge.getContainer();\n            var getShape = function (shapeName) {\n                return group.get('children').find(function (item) { return item.get('name') === shapeName; });\n            };\n            var _b = getPathInfo(cfg), startArrow = _b.startArrow, endArrow = _b.endArrow, path = _b.path, line2StartPoint = _b.line2StartPoint, endY = _b.endY;\n            var _c = edgeCfg, edgeStyle = _c.style, labelCfg = _c.label;\n            var _d = labelCfg !== null && labelCfg !== void 0 ? labelCfg : {}, labelStyle = _d.style, _e = _d.margin, margin = _e === void 0 ? 4 : _e;\n            // path\n            var pathShape = getShape('path-shape');\n            pathShape === null || pathShape === void 0 ? void 0 : pathShape.attr(__assign({ path: path, stroke: '#ccc', startArrow: startArrow, endArrow: endArrow }, (typeof edgeStyle === 'function' ? edgeStyle(cfg, group) : edgeStyle)));\n            // path text\n            var texts = ['text', 'subText'];\n            var hasSubText = !!getShape(\"line-text-subText\");\n            texts.forEach(function (key) {\n                var textShape = getShape(\"line-text-\".concat(key));\n                var textStyle = __assign(__assign({}, defaultLineLabelStyle), getStyle(labelStyle, cfg, group, key));\n                var offsetY = hasSubText ? Number((\"\".concat(textStyle.fontSize) || '12').replace(/px/g, '')) / 2 : 0;\n                textShape === null || textShape === void 0 ? void 0 : textShape.attr(__assign({ x: line2StartPoint.x, y: key === 'text' ? endY - offsetY - margin / 2 : endY + offsetY + margin / 2, text: key === 'text' ? text : subText }, textStyle));\n            });\n        },\n    }, 'single-edge');\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}