{"ast":null,"code":"import _regeneratorRuntime from\"/home/iam/Documents/LocalWeb-master/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/iam/Documents/LocalWeb-master/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import{DeleteOutlined,EditOutlined}from'@ant-design/icons';import{Table,Space,Button,Popconfirm,message}from'antd';import React from'react';import ubusApi from'service/api/ubus-api';import{useTranslation}from\"react-i18next\";import\"../../../../translations/i18n\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var URLfilterTable=function URLfilterTable(props){var onEditItem=props.onEditItem,onDeleteItem=props.onDeleteItem,tableData=props.tableData,haha=props.haha,dataraw=props.dataraw,item=props.item,name=props.name,url=props.url,type=props.type,action=props.action,data=props.data;var _useTranslation=useTranslation(),t=_useTranslation.t;var abc=t('edit');var def=t('delete');var refreshPage=function refreshPage(){window.location.reload();};var confirmDeleteGroup=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(group){var name,url,type,action,deleteURL,key;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:name=group.name,url=group.url,type=group.type,action=group.action;_context.next=3;return ubusApi.config_url_filter(name,\"del\",type,url);case 3:deleteURL=_context.sent;key='updatable';message.loading({content:t('loading'),key:key});setTimeout(function(){message.success({content:t('success'),key:key,duration:2});},1000);setTimeout(function(){window.location.reload();},1500);case 8:case\"end\":return _context.stop();}}},_callee);}));return function confirmDeleteGroup(_x){return _ref.apply(this,arguments);};}();var columns=[{title:'URL',key:'URL',dataIndex:'url'},{title:t('action'),key:'action',render:function render(_,record){if(record.admin_id<=0){return null;}return/*#__PURE__*/_jsxs(Space,{children:[/*#__PURE__*/_jsx(Button,{title:abc,icon:/*#__PURE__*/_jsx(EditOutlined,{}),onClick:function onClick(){return onEditItem(record);}}),/*#__PURE__*/_jsx(Popconfirm,{placement:\"top\",title:t('delete_cf'),onConfirm:function onConfirm(){return confirmDeleteGroup(record);},okText:t('yes'),cancelText:t('no'),children:/*#__PURE__*/_jsx(Button,{icon:/*#__PURE__*/_jsx(DeleteOutlined,{}),danger:true,type:\"primary\",title:def})})]});}}];if(!haha){return/*#__PURE__*/_jsx(Table,{columns:columns,dataSource:haha,loading:true,style:{minWidth:400}});}else{return/*#__PURE__*/_jsx(Table,{columns:columns,dataSource:haha,style:{minWidth:400}});}};","map":{"version":3,"names":["DeleteOutlined","EditOutlined","Table","Space","Button","Popconfirm","message","React","ubusApi","useTranslation","URLfilterTable","props","onEditItem","onDeleteItem","tableData","haha","dataraw","item","name","url","type","action","data","t","abc","def","refreshPage","window","location","reload","confirmDeleteGroup","group","config_url_filter","deleteURL","key","loading","content","setTimeout","success","duration","columns","title","dataIndex","render","_","record","admin_id","minWidth"],"sources":["/home/iam/Documents/LocalWeb-master/src/components/antd/security/URLfilter/URLfilterTable.tsx"],"sourcesContent":["import { DeleteOutlined, EditOutlined } from '@ant-design/icons'\nimport { Table, Space, Button, Popconfirm, message } from 'antd'\nimport React from 'react'\nimport AntdLayout from '../../../../components/antd/layout'\nimport ubusApi from 'service/api/ubus-api'\nimport { useTranslation } from \"react-i18next\"\nimport \"../../../../translations/i18n\"\n\nexport const URLfilterTable = (props: any) => {\n  const { onEditItem, onDeleteItem, tableData, haha, dataraw, item, name, url, type, action, data } = props\n  const { t } = useTranslation()\n  const abc = t('edit')\n  const def = t('delete')\n  const refreshPage = () => {\n    window.location.reload()\n  }\n  const confirmDeleteGroup = async (group: any) => {\n    const { name, url, type, action } = group\n    const deleteURL = await ubusApi.config_url_filter(name, \"del\", type, url,)\n    const key = 'updatable';\n    message.loading({ content: t('loading'), key });\n    setTimeout(() => {\n      message.success({ content: t('success'), key, duration: 2 });\n    }, 1000);\n    setTimeout(() => {\n      window.location.reload()\n    }, 1500);\n  }\n  const columns = [\n    { title: 'URL', key: 'URL', dataIndex: 'url' },\n    {\n      title: t('action'),\n      key: 'action',\n      render: (_: string, record: any) => {\n        if (record.admin_id <= 0) {\n          return null\n        }\n        return (\n          <Space>\n            <Button title={abc} icon={<EditOutlined />} onClick={() => onEditItem(record)} />\n            <Popconfirm\n              placement=\"top\"\n              title={t('delete_cf')}\n              onConfirm={() => confirmDeleteGroup(record)}\n              okText={t('yes')}\n              cancelText={t('no')}\n            >\n              <Button icon={<DeleteOutlined />}  danger type=\"primary\" title={def} />\n            </Popconfirm>\n          </Space>\n        )\n      },\n    },\n  ]\n  if ( !haha ) {\n    return(\n      <Table columns={columns} dataSource={haha} loading style={{ minWidth: 400 }} /> \n    )\n  } else {\n    return(\n      <Table columns={columns} dataSource={haha} style={{ minWidth: 400 }} /> \n    )\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}