{"ast":null,"code":"import { __assign, __extends } from \"tslib\";\nimport ListState from './list-state';\nimport { isEqual } from '@antv/util';\nimport { TOOLTIP_CSS_CONST } from '@antv/component';\nimport { HtmlTooltip } from '../../../dependents';\nvar STATUS_SHOW = 'showRadio';\nvar TIP_ID = 'legend-radio-tip';\nvar ListRadio = /** @class */function (_super) {\n  __extends(ListRadio, _super);\n  function ListRadio() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.timeStamp = 0;\n    return _this;\n  }\n  ListRadio.prototype.show = function () {\n    var triggerInfo = this.getTriggerListInfo();\n    if (triggerInfo === null || triggerInfo === void 0 ? void 0 : triggerInfo.item) {\n      var list = triggerInfo.list,\n        item = triggerInfo.item;\n      list.setItemState(item, STATUS_SHOW, true);\n    }\n  };\n  ListRadio.prototype.hide = function () {\n    var triggerInfo = this.getTriggerListInfo();\n    if (triggerInfo === null || triggerInfo === void 0 ? void 0 : triggerInfo.item) {\n      var list = triggerInfo.list,\n        item = triggerInfo.item;\n      list.setItemState(item, STATUS_SHOW, false);\n    }\n  };\n  ListRadio.prototype.destroy = function () {\n    _super.prototype.destroy.call(this);\n    this.tooltip && this.tooltip.destroy();\n  };\n  /**\n   * 显示 Tooltip (展示在上方)\n   * @returns\n   */\n  ListRadio.prototype.showTip = function () {\n    var context = this.context;\n    var ev = context.event;\n    var lastTimeStamp = this.timeStamp;\n    var timeStamp = +new Date();\n    var target = this.context.event.target;\n    if (timeStamp - lastTimeStamp > 16 && target.get('name') === 'legend-item-radio') {\n      var preLoc = this.location;\n      var curLoc = {\n        x: ev.x,\n        y: ev.y\n      };\n      this.timeStamp = timeStamp;\n      this.location = curLoc;\n      if (!preLoc || !isEqual(preLoc, curLoc)) {\n        this.showTooltip(curLoc);\n      }\n    }\n  };\n  /**\n   * 隐藏 Tooltip。\n   * @returns\n   */\n  ListRadio.prototype.hideTip = function () {\n    this.hideTooltip();\n    this.location = null;\n  };\n  ListRadio.prototype.showTooltip = function (curLoc) {\n    var context = this.context;\n    var ev = context.event;\n    var target = ev.target;\n    if (target && target.get('tip')) {\n      if (!this.tooltip) {\n        this.renderTooltip(); // 延迟生成\n      }\n      // 展示 tooltip\n      var _a = context.view.getCanvas().get('el').getBoundingClientRect(),\n        offsetX = _a.x,\n        offsetY = _a.y;\n      this.tooltip.update(__assign(__assign({\n        title: target.get('tip')\n      }, curLoc), {\n        x: curLoc.x + offsetX,\n        y: curLoc.y + offsetY\n      }));\n      this.tooltip.show();\n    }\n  };\n  ListRadio.prototype.hideTooltip = function () {\n    this.tooltip && this.tooltip.hide();\n  };\n  ListRadio.prototype.renderTooltip = function () {\n    var _a;\n    var tooltipStyles = (_a = {}, _a[TOOLTIP_CSS_CONST.CONTAINER_CLASS] = {\n      padding: '6px 8px',\n      transform: 'translate(-50%, -80%)',\n      background: 'rgba(0,0,0,0.75)',\n      color: '#fff',\n      'border-radius': '2px',\n      // 避免遮挡，如果还不够的话，再考虑开放用户配置\n      'z-index': 100\n    }, _a[TOOLTIP_CSS_CONST.TITLE_CLASS] = {\n      'font-size': '12px',\n      'line-height': '14px',\n      'margin-bottom': 0,\n      'word-break': 'break-all'\n    }, _a);\n    if (document.getElementById(TIP_ID)) {\n      document.body.removeChild(document.getElementById(TIP_ID));\n    }\n    var tooltip = new HtmlTooltip({\n      parent: document.body,\n      // tooltip 限制的区域\n      region: null,\n      visible: false,\n      crosshairs: null,\n      domStyles: tooltipStyles,\n      containerId: TIP_ID\n    });\n    tooltip.init();\n    tooltip.setCapture(false); // 不允许捕获事件\n    this.tooltip = tooltip;\n  };\n  return ListRadio;\n}(ListState);\nexport default ListRadio;","map":{"version":3,"mappings":"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","names":["ListState","isEqual","TOOLTIP_CSS_CONST","HtmlTooltip","STATUS_SHOW","TIP_ID","__extends","_this","ListRadio","triggerInfo","getTriggerListInfo","item","list","setItemState","_super","destroy","tooltip","context","ev","event","lastTimeStamp","timeStamp","Date","target","get","preLoc","location","curLoc","x","y","showTooltip","hideTooltip","renderTooltip","view","getCanvas","getBoundingClientRect","offsetX","offsetY","update","title","show","hide","tooltipStyles","_a","CONTAINER_CLASS","padding","transform","background","color","TITLE_CLASS","document","getElementById","body","removeChild","parent","region","visible","crosshairs","domStyles","containerId","init","setCapture"],"sources":["/home/iam/Documents/LocalWeb-master/node_modules/@antv/g2/src/interaction/action/component/list-radio.ts"],"sourcesContent":["import ListState from './list-state';\nimport { isEqual } from '@antv/util';\nimport { TOOLTIP_CSS_CONST } from '@antv/component';\nimport { HtmlTooltip } from '../../../dependents';\nimport { Point } from '../../../interface';\n\nconst STATUS_SHOW = 'showRadio';\nconst TIP_ID = 'legend-radio-tip';\n\nclass ListRadio extends ListState {\n  public show() {\n    const triggerInfo = this.getTriggerListInfo();\n    if (triggerInfo?.item) {\n      const { list, item } = triggerInfo;\n      list.setItemState(item, STATUS_SHOW, true);\n    }\n  }\n\n  public hide() {\n    const triggerInfo = this.getTriggerListInfo();\n    if (triggerInfo?.item) {\n      const { list, item } = triggerInfo;\n      list.setItemState(item, STATUS_SHOW, false);\n    }\n  }\n\n  private timeStamp: number = 0;\n  private location: Point;\n  private tooltip;\n\n  public destroy() {\n    super.destroy();\n    this.tooltip && this.tooltip.destroy();\n  }\n\n  /**\n   * 显示 Tooltip (展示在上方)\n   * @returns\n   */\n  public showTip() {\n    const context = this.context;\n    const ev = context.event;\n    const lastTimeStamp = this.timeStamp;\n    const timeStamp = +new Date();\n\n    const target = this.context.event.target;\n    if (timeStamp - lastTimeStamp > 16 && target.get('name') === 'legend-item-radio') {\n      const preLoc = this.location;\n      const curLoc = { x: ev.x, y: ev.y };\n      this.timeStamp = timeStamp;\n      this.location = curLoc;      \n      if (!preLoc || !isEqual(preLoc, curLoc)) {\n        this.showTooltip(curLoc);\n      }\n    }\n  }\n\n  /**\n   * 隐藏 Tooltip。\n   * @returns\n   */\n  public hideTip() {\n    this.hideTooltip();\n    this.location = null;\n  }\n\n  protected showTooltip(curLoc: Point) {\n    const context = this.context;\n    const ev = context.event;\n    const target = ev.target;\n\n    if (target && target.get('tip')) {\n      if (!this.tooltip) {\n        this.renderTooltip(); // 延迟生成\n      }\n      // 展示 tooltip\n      const { x: offsetX, y: offsetY } = context.view.getCanvas().get('el').getBoundingClientRect();\n      this.tooltip.update({\n        title: target.get('tip'),\n        ...curLoc,\n        x: curLoc.x + offsetX,\n        y: curLoc.y + offsetY,\n      });\n      this.tooltip.show();\n    }\n  }\n\n  protected hideTooltip() {\n    this.tooltip && this.tooltip.hide();\n  }\n\n  private renderTooltip() {\n    const tooltipStyles = {\n      [TOOLTIP_CSS_CONST.CONTAINER_CLASS]: {\n        padding: '6px 8px',\n        transform: 'translate(-50%, -80%)',\n        background: 'rgba(0,0,0,0.75)',\n        color: '#fff',\n        'border-radius': '2px',\n        // 避免遮挡，如果还不够的话，再考虑开放用户配置\n        'z-index': 100,\n      },\n      [TOOLTIP_CSS_CONST.TITLE_CLASS]: {\n        'font-size': '12px',\n        'line-height': '14px',\n        'margin-bottom': 0,\n        'word-break': 'break-all',\n      }\n    };\n    if (document.getElementById(TIP_ID)) {\n      document.body.removeChild(document.getElementById(TIP_ID));\n    }\n    const tooltip = new HtmlTooltip({\n      parent: document.body,\n      // tooltip 限制的区域\n      region: null,\n      visible: false,\n      crosshairs: null,\n      domStyles: tooltipStyles,\n      containerId: TIP_ID,\n    });\n    tooltip.init();\n    tooltip.setCapture(false); // 不允许捕获事件\n    this.tooltip = tooltip;\n  }\n}\n\nexport default ListRadio;\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}