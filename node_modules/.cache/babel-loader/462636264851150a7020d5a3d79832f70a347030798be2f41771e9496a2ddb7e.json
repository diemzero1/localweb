{"ast":null,"code":"import _regeneratorRuntime from\"/home/iam/Documents/LocalWeb-master/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/iam/Documents/LocalWeb-master/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import{DeleteOutlined,EditOutlined}from'@ant-design/icons';import{Table,Space,Button,Popconfirm,message}from'antd';import React from'react';import ubusApi from'../../../../service/api/ubus-api';import{useTranslation}from\"react-i18next\";import\"../../../../translations/i18n\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var IpfilterTable=function IpfilterTable(props){var onEditItem=props.onEditItem,tableData=props.tableData,haha=props.haha;var _useTranslation=useTranslation(),t=_useTranslation.t;var abc=t('edit');var def=t('delete');var refreshPage=function refreshPage(){window.location.reload();};var confirmDeleteGroup=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(group){var name,type,src,dest,sport,dport,tcp_udp,deleterules,key;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:name=group.name,type=group.type,src=group.src,dest=group.dest,sport=group.sport,dport=group.dport,tcp_udp=group.tcp_udp;_context.next=3;return ubusApi.config_ip_filter(name,\"del\",type,src,dest,sport,dport,tcp_udp);case 3:deleterules=_context.sent;console.log(\"values: \",deleterules);key='updatable';message.loading({content:t('loading'),key:key});setTimeout(function(){message.success({content:t('success'),key:key,duration:2});},1000);setTimeout(function(){window.location.reload();},1500);case 9:case\"end\":return _context.stop();}}},_callee);}));return function confirmDeleteGroup(_x){return _ref.apply(this,arguments);};}();var columns=[// { title: t('name'), key: 'name', dataIndex: 'name' },\n{title:t('source_ip'),key:'src',dataIndex:'src'},{title:t('source_port'),key:'sport',dataIndex:'sport'},{title:t('dest_ip'),key:'dest',dataIndex:'dest'},{title:t('dest_port'),key:'dport',dataIndex:'dport'},{title:t('protocol'),key:'tcp_udp',dataIndex:'tcp_udp'},{title:t('action'),key:'action',render:function render(_,record){if(record.admin_id<=0){return null;}return/*#__PURE__*/_jsxs(Space,{children:[/*#__PURE__*/_jsx(Button,{title:abc,icon:/*#__PURE__*/_jsx(EditOutlined,{}),onClick:function onClick(){return onEditItem(record);}}),/*#__PURE__*/_jsx(Popconfirm,{placement:\"top\",title:t('delete_cf'),onConfirm:function onConfirm(){return confirmDeleteGroup(record);},okText:t('yes'),cancelText:t('no'),children:/*#__PURE__*/_jsx(Button,{icon:/*#__PURE__*/_jsx(DeleteOutlined,{}),danger:true,type:\"primary\",title:def})})]});}}];if(!haha){return/*#__PURE__*/_jsx(Table,{columns:columns,dataSource:haha,loading:true,style:{minWidth:400}});}else{return/*#__PURE__*/_jsx(Table,{columns:columns,dataSource:haha,style:{minWidth:400}});}};","map":{"version":3,"names":["DeleteOutlined","EditOutlined","Table","Space","Button","Popconfirm","message","React","ubusApi","useTranslation","IpfilterTable","props","onEditItem","tableData","haha","t","abc","def","refreshPage","window","location","reload","confirmDeleteGroup","group","name","type","src","dest","sport","dport","tcp_udp","config_ip_filter","deleterules","console","log","key","loading","content","setTimeout","success","duration","columns","title","dataIndex","render","_","record","admin_id","minWidth"],"sources":["/home/iam/Documents/LocalWeb-master/src/components/antd/security/ipfilter/table.tsx"],"sourcesContent":["import { DeleteOutlined, EditOutlined } from '@ant-design/icons'\nimport { Table, Space, Button, Popconfirm, message } from 'antd'\nimport React from 'react'\nimport ubusApi from '../../../../service/api/ubus-api'\nimport { useTranslation } from \"react-i18next\"\nimport \"../../../../translations/i18n\"\n\nexport const IpfilterTable = (props: any) => {\n  const { onEditItem, tableData, haha } = props\n  const { t } = useTranslation()\n  const abc = t('edit')\n  const def = t('delete')\n  const refreshPage = () => {\n    window.location.reload()\n  }\n  const confirmDeleteGroup = async (group: any) => {\n    const { name, type, src, dest, sport, dport, tcp_udp } = group\n    const deleterules = await ubusApi.config_ip_filter(name, \"del\", type, src, dest, sport, dport, tcp_udp)\n    console.log(\"values: \", deleterules)\n    const key = 'updatable';\n    message.loading({ content: t('loading'), key });\n    setTimeout(() => {\n      message.success({ content: t('success'), key, duration: 2 });\n    }, 1000);\n    setTimeout(() => {\n      window.location.reload()\n    }, 1500);\n  }\n  const columns = [\n    // { title: t('name'), key: 'name', dataIndex: 'name' },\n    { title: t('source_ip'), key: 'src', dataIndex: 'src' },\n    { title: t('source_port'), key: 'sport', dataIndex: 'sport' },\n    { title: t('dest_ip'), key: 'dest', dataIndex: 'dest' },\n    { title: t('dest_port'), key: 'dport', dataIndex: 'dport' },\n    { title: t('protocol'), key: 'tcp_udp', dataIndex: 'tcp_udp' },\n    {\n      title: t('action'),\n      key: 'action',\n      render: (_: string, record: any) => {\n        if (record.admin_id <= 0) {\n          return null\n        }\n        return (\n          <Space>\n            <Button title={abc} icon={<EditOutlined />} onClick={() => onEditItem(record)} />\n            <Popconfirm\n              placement=\"top\"\n              title={t('delete_cf')}\n              onConfirm={() => confirmDeleteGroup(record)}\n              okText={t('yes')}\n              cancelText={t('no')}\n            >\n              <Button icon={<DeleteOutlined />} danger type=\"primary\" title={def} />\n            </Popconfirm>\n          </Space>\n        )\n      },\n    },\n  ]\n  if ( !haha ) {\n    return(\n      <Table columns={columns} dataSource={haha} loading style={{ minWidth: 400 }} /> \n    )\n  } else {\n    return(\n      <Table columns={columns} dataSource={haha} style={{ minWidth: 400 }} /> \n    )\n  }\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}