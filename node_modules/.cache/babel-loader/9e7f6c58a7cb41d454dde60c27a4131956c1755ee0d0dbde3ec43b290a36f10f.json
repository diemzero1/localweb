{"ast":null,"code":"import _regeneratorRuntime from\"/home/iam/Documents/network/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/iam/Documents/network/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import{DeleteOutlined,EditOutlined}from'@ant-design/icons';import{Table,Space,Button,Popconfirm,message}from'antd';import React from'react';import ubusApi from\"service/api/ubus-api\";import{useTranslation}from\"react-i18next\";import\"../../../../translations/i18n\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var PortForwardTable=function PortForwardTable(props){var onEditItem=props.onEditItem,onDeleteItem=props.onDeleteItem,tableData=props.tableData;var _useTranslation=useTranslation(),t=_useTranslation.t;var abc=t('edit');var def=t('delete');var refreshPage=function refreshPage(){window.location.reload();};var confirmDeleteGroup=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(group){var lanip,lanport,wanip,wanport,proto,name,result,key;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:lanip=group.lanip,lanport=group.lanport,wanip=group.wanip,wanport=group.wanport,proto=group.proto,name=group.name;_context.next=3;return ubusApi.config_network_nat(\"disable\",name,proto,wanip,wanport,lanip,lanport);case 3:result=_context.sent;key='updatable';message.loading({content:t('loading'),key:key});setTimeout(function(){message.success({content:t('success'),key:key,duration:2});},1000);setTimeout(function(){window.location.reload();},1500);case 8:case\"end\":return _context.stop();}}},_callee);}));return function confirmDeleteGroup(_x){return _ref.apply(this,arguments);};}();var columns=[{title:t(\"wan_ip\"),key:'wanip',dataIndex:'wanip'},{title:t(\"wan_port\"),key:'wanport',dataIndex:'wanport'},{title:t('lan_ip'),key:'lanip',dataIndex:'lanip'},{title:t('lan_port'),key:'lanport',dataIndex:'lanport'},{title:t('protocol'),key:'proto',dataIndex:'proto'},{title:t('action'),key:'action',render:function render(_,record){if(record.admin_id<=0){return null;}return/*#__PURE__*/_jsxs(Space,{children:[/*#__PURE__*/_jsx(Button,{title:abc,icon:/*#__PURE__*/_jsx(EditOutlined,{}),onClick:function onClick(){return onEditItem(record);}}),/*#__PURE__*/_jsx(Popconfirm,{placement:\"top\",title:t('delete_cf'),onConfirm:function onConfirm(){return confirmDeleteGroup(record);},okText:t('yes'),cancelText:t('no'),children:/*#__PURE__*/_jsx(Button,{icon:/*#__PURE__*/_jsx(DeleteOutlined,{}),danger:true,type:\"primary\",title:def})})]});}}];if(!tableData){return/*#__PURE__*/_jsx(Table,{columns:columns,dataSource:tableData,loading:true,style:{minWidth:400}});}else{return/*#__PURE__*/_jsx(Table,{columns:columns,dataSource:tableData,style:{minWidth:400}});}};","map":{"version":3,"names":["DeleteOutlined","EditOutlined","Table","Space","Button","Popconfirm","message","React","ubusApi","useTranslation","PortForwardTable","props","onEditItem","onDeleteItem","tableData","t","abc","def","refreshPage","window","location","reload","confirmDeleteGroup","group","lanip","lanport","wanip","wanport","proto","name","config_network_nat","result","key","loading","content","setTimeout","success","duration","columns","title","dataIndex","render","_","record","admin_id","minWidth"],"sources":["/home/iam/Documents/network/src/components/antd/security/port-forward/table.tsx"],"sourcesContent":["import { DeleteOutlined, EditOutlined } from '@ant-design/icons'\nimport { Table, Space, Button, Popconfirm, message } from 'antd'\nimport React from 'react'\nimport ubusApi from \"service/api/ubus-api\"\nimport { useTranslation } from \"react-i18next\"\nimport \"../../../../translations/i18n\"\n\nexport const PortForwardTable = (props: any) => {\n    const { onEditItem, onDeleteItem, tableData } = props\n    const {t} = useTranslation()\n    const abc = t('edit')\n    const def = t('delete')\n    const refreshPage = ()=>{\n        window.location.reload()\n    }\n    const confirmDeleteGroup = async (group: any) => {\n        const {lanip, lanport, wanip, wanport, proto, name} = group\n        const result = await ubusApi.config_network_nat(\"disable\", name, proto, wanip, wanport, lanip, lanport)\n        const key = 'updatable';\n        message.loading({ content: t('loading'), key });\n        setTimeout(() => {\n            message.success({ content: t('success'), key, duration: 2 });\n        }, 1000);\n        setTimeout(() => {\n            window.location.reload()\n        }, 1500);\n    }\n    const columns = [\n        { title: t(\"wan_ip\"), key: 'wanip', dataIndex: 'wanip' },\n        { title: t(\"wan_port\"), key: 'wanport', dataIndex: 'wanport' },\n        { title: t('lan_ip'), key: 'lanip', dataIndex: 'lanip' },\n        { title: t('lan_port'), key: 'lanport', dataIndex: 'lanport' },\n        { title: t('protocol'), key: 'proto', dataIndex: 'proto' },\n        {\n            title: t('action'),\n            key: 'action',\n            render: (_: string, record: any) => {\n                if (record.admin_id <= 0) {\n                    return null\n                }\n                return (\n                    <Space>\n                        <Button title={abc}  icon={<EditOutlined />} onClick={() => onEditItem(record)} />\n                        <Popconfirm\n                            placement=\"top\"\n                            title={t('delete_cf')}\n                            onConfirm={() => confirmDeleteGroup(record)}\n                            okText={t('yes')}\n                            cancelText={t('no')}\n                        >\n                            <Button icon={<DeleteOutlined />} danger type=\"primary\" title={def}/>\n                        </Popconfirm>\n                    </Space>\n                )\n            },\n        },\n    ]\n    if ( !tableData ) {\n        return(\n          <Table columns={columns} dataSource={tableData} loading style={{ minWidth: 400 }} /> \n        )\n      } else {\n        return(\n          <Table columns={columns} dataSource={tableData} style={{ minWidth: 400 }} /> \n        )\n      }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}