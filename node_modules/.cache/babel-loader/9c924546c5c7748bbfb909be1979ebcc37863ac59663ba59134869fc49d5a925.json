{"ast":null,"code":"import React from'react';import{RouterProvider}from'react-router-dom';import router from'./router';import{SessionKeepAlive}from'components/keep-alive';import{LoginBox}from'components/antd/login-box';import{Logout}from'components/antd/logout-box';import useToken from'./useToken';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){var _useToken=useToken(),token=_useToken.token,setToken=_useToken.setToken;var logoutTimerIdRef=React.useRef(null);React.useEffect(function(){var autoLogout=function autoLogout(){var timeOutId=window.setTimeout(Logout,1000);logoutTimerIdRef.current=timeOutId;};document.addEventListener('visibilitychange',autoLogout);return function(){document.removeEventListener('visibilitychange',autoLogout);};},[]);if(!token){return/*#__PURE__*/_jsx(LoginBox,{});}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(SessionKeepAlive,{}),/*#__PURE__*/_jsx(RouterProvider,{router:router})]});}export default App;","map":{"version":3,"names":["React","RouterProvider","router","SessionKeepAlive","LoginBox","Logout","useToken","App","token","setToken","logoutTimerIdRef","useRef","useEffect","autoLogout","timeOutId","window","setTimeout","current","document","addEventListener","removeEventListener"],"sources":["/home/iam/Documents/network/src/App.tsx"],"sourcesContent":["import React from 'react'\nimport { RouterProvider } from 'react-router-dom'\nimport { Provider } from 'react-redux'\n\nimport router from './router'\nimport store from './redux/store'\nimport { SessionKeepAlive } from 'components/keep-alive'\n\nimport AntdLayout from 'components/antd/layout'\nimport { LoginBox } from 'components/antd/login-box'\nimport { Logout } from 'components/antd/logout-box'\n\nimport useToken from './useToken';\n\nfunction App() {\n\n  const { token, setToken } = useToken();\n  const logoutTimerIdRef = React.useRef<number | null>(null)\n\n  React.useEffect(() => {\n    const autoLogout = () => {\n        const timeOutId = window.setTimeout(Logout, 1000)\n        logoutTimerIdRef.current = timeOutId\n    };\n  \n    document.addEventListener('visibilitychange', autoLogout);\n  \n    return () => {\n      document.removeEventListener('visibilitychange', autoLogout);\n    };\n  }, []);\n\n  if (!token) {\n    return (\n        <LoginBox />\n    );\n  } \n\n  return (\n      <>\n      <SessionKeepAlive />\n      <RouterProvider router={router} />\n      </>\n  );\n}\n\nexport default App;\n"],"mappings":"AAAA,MAAOA,MAAK,KAAM,OAAO,CACzB,OAASC,cAAc,KAAQ,kBAAkB,CAGjD,MAAOC,OAAM,KAAM,UAAU,CAE7B,OAASC,gBAAgB,KAAQ,uBAAuB,CAGxD,OAASC,QAAQ,KAAQ,2BAA2B,CACpD,OAASC,MAAM,KAAQ,4BAA4B,CAEnD,MAAOC,SAAQ,KAAM,YAAY,CAAC,6IAElC,QAASC,IAAG,EAAG,CAEb,cAA4BD,QAAQ,EAAE,CAA9BE,KAAK,WAALA,KAAK,CAAEC,QAAQ,WAARA,QAAQ,CACvB,GAAMC,iBAAgB,CAAGV,KAAK,CAACW,MAAM,CAAgB,IAAI,CAAC,CAE1DX,KAAK,CAACY,SAAS,CAAC,UAAM,CACpB,GAAMC,WAAU,CAAG,QAAbA,WAAU,EAAS,CACrB,GAAMC,UAAS,CAAGC,MAAM,CAACC,UAAU,CAACX,MAAM,CAAE,IAAI,CAAC,CACjDK,gBAAgB,CAACO,OAAO,CAAGH,SAAS,CACxC,CAAC,CAEDI,QAAQ,CAACC,gBAAgB,CAAC,kBAAkB,CAAEN,UAAU,CAAC,CAEzD,MAAO,WAAM,CACXK,QAAQ,CAACE,mBAAmB,CAAC,kBAAkB,CAAEP,UAAU,CAAC,CAC9D,CAAC,CACH,CAAC,CAAE,EAAE,CAAC,CAEN,GAAI,CAACL,KAAK,CAAE,CACV,mBACI,KAAC,QAAQ,IAAG,CAElB,CAEA,mBACI,wCACA,KAAC,gBAAgB,IAAG,cACpB,KAAC,cAAc,EAAC,MAAM,CAAEN,MAAO,EAAG,GAC/B,CAET,CAEA,cAAeK,IAAG"},"metadata":{},"sourceType":"module","externalDependencies":[]}