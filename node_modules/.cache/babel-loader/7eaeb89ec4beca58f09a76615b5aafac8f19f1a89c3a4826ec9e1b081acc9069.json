{"ast":null,"code":"import _objectSpread from\"/home/iam/Documents/network/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"/home/iam/Documents/network/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/iam/Documents/network/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/iam/Documents/network/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{Form,Input,Button,Select}from'antd';import React from'react';import ubusApi from'service/api/ubus-api';import{Alert,Spin,Result}from'antd';import{useTranslation}from\"react-i18next\";import\"../../../../translations/i18n\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var formItemLayout={labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16}}};export var PingSystem=function PingSystem(props){var patternIpv4=/^((25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/;var check1;var check2;var item=props.item,value=props.value;var _React$useState=React.useState(\"\"),_React$useState2=_slicedToArray(_React$useState,2),hostname=_React$useState2[0],setValue=_React$useState2[1];var _React$useState3=React.useState(\"\"),_React$useState4=_slicedToArray(_React$useState3,2),data=_React$useState4[0],setData=_React$useState4[1];var _React$useState5=React.useState(false),_React$useState6=_slicedToArray(_React$useState5,2),loading=_React$useState6[0],setLoading=_React$useState6[1];var _useTranslation=useTranslation(),t=_useTranslation.t;var _Form$useForm=Form.useForm(),_Form$useForm2=_slicedToArray(_Form$useForm,1),form=_Form$useForm2[0];var refreshData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var name,vid,dev;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(item){name=item.name,vid=item.vid,dev=item.dev;form.setFieldsValue({name:name,mode:value,interface:dev,vid:vid});}case 1:case\"end\":return _context.stop();}}},_callee);}));return function refreshData(){return _ref.apply(this,arguments);};}();React.useEffect(function(){refreshData();},[]);var onFinish=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(values){var param,result;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:setLoading(true);param={hostname:values.hostname,version:values.version,source:values.source,max:values.max,second:values.second,ttl:values.ttl};_context2.next=4;return ubusApi.config_system_ping(param);case 4:result=_context2.sent;setLoading(false);console.log(result);setData(result.output);case 8:case\"end\":return _context2.stop();}}},_callee2);}));return function onFinish(_x){return _ref2.apply(this,arguments);};}();var options=[];var ttl=[];for(var i=1;i<11;i++){options.push({value:i,label:i});}for(var _i=1;_i<255;_i++){ttl.push({value:_i,label:_i});}return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(Form,{form:form,labelCol:{span:6},wrapperCol:{span:10},onFinish:onFinish,children:[/*#__PURE__*/_jsx(Form.Item,_objectSpread(_objectSpread({},formItemLayout),{},{label:t(\"hostname_system\"),name:\"hostname\",rules:[{required:true,message:'Please input hostname!'}],children:/*#__PURE__*/_jsx(Input,{allowClear:true,style:{width:'40%'}})})),/*#__PURE__*/_jsx(Form.Item,_objectSpread(_objectSpread({},formItemLayout),{},{label:t(\"ip_version\"),name:\"version\",children:/*#__PURE__*/_jsx(Select,{style:{width:'40%'},defaultValue:\"IPv4\",options:[{value:'4',label:'IPv4'},{value:'6',label:'IPv6'}]})})),/*#__PURE__*/_jsx(Form.Item,_objectSpread(_objectSpread({},formItemLayout),{},{label:t(\"src_ip\"),name:\"source\",rules:[{required:true,message:String(t(\"error_fill\"))},{validator:function validator(_,value,callback){if(value===undefined){callback();}else{check1=value.split(\".\");check2=check1[check1.length-1];return Number(check2)<256&&patternIpv4.test(value)?Promise.resolve():Promise.reject(t('Error_Ip_address'));}}}],children:/*#__PURE__*/_jsx(Input,{style:{width:'40%'}})})),/*#__PURE__*/_jsx(Form.Item,_objectSpread(_objectSpread({},formItemLayout),{},{label:\"TTL\",name:\"ttl\",children:/*#__PURE__*/_jsx(Select,{style:{width:'40%'},showSearch:true,defaultValue:\"255\",placeholder:\"Select TTL\",options:ttl})})),/*#__PURE__*/_jsx(Form.Item,_objectSpread(_objectSpread({},formItemLayout),{},{label:t(\"max_pings\"),name:\"max\",children:/*#__PURE__*/_jsx(Select,{style:{width:'40%'},defaultValue:\"5\",options:options})})),/*#__PURE__*/_jsx(Form.Item,_objectSpread(_objectSpread({},formItemLayout),{},{label:t(\"seconds_between_pings\"),name:\"second\",children:/*#__PURE__*/_jsx(Select,{style:{width:'40%'},defaultValue:\"1\",options:options})})),/*#__PURE__*/_jsx(Form.Item,{wrapperCol:{offset:8,span:16},children:/*#__PURE__*/_jsx(Button,{type:\"primary\",htmlType:\"submit\",children:t(\"submit_system\")})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Result,{style:{whiteSpace:'pre-wrap'},children:/*#__PURE__*/_jsx(Spin,{spinning:loading,children:/*#__PURE__*/_jsx(Alert,{message:data})})})})]})});};","map":{"version":3,"names":["Form","Input","Button","Select","React","ubusApi","Alert","Spin","Result","useTranslation","formItemLayout","labelCol","xs","span","sm","wrapperCol","PingSystem","props","patternIpv4","check1","check2","item","value","useState","hostname","setValue","data","setData","loading","setLoading","t","useForm","form","refreshData","name","vid","dev","setFieldsValue","mode","interface","useEffect","onFinish","values","param","version","source","max","second","ttl","config_system_ping","result","console","log","output","options","i","push","label","required","message","width","String","validator","_","callback","undefined","split","length","Number","test","Promise","resolve","reject","offset","whiteSpace"],"sources":["/home/iam/Documents/network/src/components/antd/system/ping/form.tsx"],"sourcesContent":["\nimport { Form, Input, Button, Select, SelectProps } from 'antd'\nimport React from 'react'\nimport ubusApi from 'service/api/ubus-api'\nimport { Alert, Spin, Result } from 'antd';\n\nimport { useTranslation } from \"react-i18next\";\nimport \"../../../../translations/i18n\";\n\nconst formItemLayout = {\n    labelCol: {\n        xs: { span: 24 },\n        sm: { span: 8 },\n    },\n    wrapperCol: {\n        xs: { span: 24 },\n        sm: { span: 16 },\n    },\n}\n\nexport const PingSystem = (props: any) => {\n    let patternIpv4 = /^((25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/\n    let check1: any\n    let check2: any\n    const { item, value } = props\n    const [hostname, setValue] = React.useState(\"\");\n    const [data, setData] = React.useState(\"\");\n    const [loading, setLoading] = React.useState(false);\n    const { t } = useTranslation();\n\n    const [form] = Form.useForm()\n    const refreshData = async () => {\n        if (item) {\n            const { name, vid, dev, } = item\n            form.setFieldsValue({\n                name, mode: value, interface: dev, vid\n            })\n        }\n    }\n    React.useEffect(() => {\n        refreshData()\n    }, [])\n\n    const onFinish = async (values: any) => {\n        setLoading(true)\n        const param = {\n            hostname: values.hostname, version: values.version, source: values.source,\n            max: values.max, second: values.second,\n            ttl: values.ttl,\n        }\n        const result = await ubusApi.config_system_ping(param)\n        setLoading(false)\n        console.log(result)\n        setData(result.output)\n    }\n\n    const options: SelectProps['options'] = [];\n    const ttl: SelectProps['options'] = [];\n\n    for (let i = 1; i < 11; i++) {\n        options.push({\n            value: i,\n            label: i,\n        });\n    }\n\n    for (let i = 1; i < 255; i++) {\n        ttl.push({\n            value: i,\n            label: i,\n        });\n    }\n\n    return (\n        <>\n            <Form\n                form={form}\n                labelCol={{ span: 6 }}\n                wrapperCol={{ span: 10 }}\n                onFinish={onFinish}\n            >\n                <Form.Item {...formItemLayout} label={t(\"hostname_system\")} name=\"hostname\" rules={[{ required: true, message: 'Please input hostname!' }]}\n                >\n                    <Input allowClear style={{ width: '40%' }} />\n                </Form.Item>\n                <Form.Item {...formItemLayout} label={t(\"ip_version\")} name=\"version\"\n                >\n                    <Select\n                        style={{ width: '40%' }}\n                        defaultValue='IPv4'\n                        options={[\n                            {\n                                value: '4',\n                                label: 'IPv4'\n                            },\n                            {\n                                value: '6',\n                                label: 'IPv6'\n                            },\n                        ]}\n                    ></Select>\n                </Form.Item>\n                <Form.Item {...formItemLayout} label={t(\"src_ip\")} name=\"source\"\n                    rules={[\n                        { required: true, message: String(t(\"error_fill\")) },\n                        {\n                            validator: (_, value, callback) => {\n                                if (value === undefined) {\n                                    callback();\n                                }\n                                else {\n                                    check1 = value.split(\".\")\n                                    check2 = check1[check1.length - 1]\n                                    return Number(check2) < 256 && patternIpv4.test(value) ? Promise.resolve() : Promise.reject(t('Error_Ip_address'))\n                                }\n                            }\n                        }\n                    ]}\n                >\n                    <Input style={{ width: '40%' }} ></Input>\n                </Form.Item>\n                <Form.Item {...formItemLayout} label=\"TTL\" name=\"ttl\"\n                >\n                    <Select\n                        style={{ width: '40%' }}\n                        showSearch\n                        defaultValue='255'\n                        placeholder=\"Select TTL\"\n                        options={ttl}\n                    />\n                </Form.Item>\n                <Form.Item {...formItemLayout} label={t(\"max_pings\")} name=\"max\"\n                >\n                    <Select\n                        style={{ width: '40%' }}\n                        defaultValue='5'\n                        options={options}\n                    ></Select>\n                </Form.Item>\n\n                <Form.Item {...formItemLayout} label={t(\"seconds_between_pings\")} name=\"second\"\n                >\n                    <Select\n                        style={{ width: '40%' }}\n                        defaultValue='1'\n                        options={options}\n                    ></Select>\n                </Form.Item>\n                <Form.Item wrapperCol={{ offset: 8, span: 16 }}>\n                    <Button\n                        type='primary'\n                        htmlType=\"submit\"\n                    >\n                        {t(\"submit_system\")}\n                    </Button>\n                </Form.Item>\n                <div>\n                    <Result style={{ whiteSpace: 'pre-wrap' }} >\n                        <Spin spinning={loading}>\n                            <Alert\n                                message={data}\n                            />\n                        </Spin>\n                    </Result>\n                </div>\n            </Form>\n        </>\n    )\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}